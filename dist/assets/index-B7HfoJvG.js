function wg(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in e)){const a=Object.getOwnPropertyDescriptor(s,n);a&&Object.defineProperty(e,n,a.get?a:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();function bg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Yh={exports:{}},Ja={},Zh={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ni=Symbol.for("react.element"),jg=Symbol.for("react.portal"),_g=Symbol.for("react.fragment"),Ng=Symbol.for("react.strict_mode"),kg=Symbol.for("react.profiler"),Sg=Symbol.for("react.provider"),Eg=Symbol.for("react.context"),Cg=Symbol.for("react.forward_ref"),Tg=Symbol.for("react.suspense"),Pg=Symbol.for("react.memo"),Rg=Symbol.for("react.lazy"),Ku=Symbol.iterator;function Ag(e){return e===null||typeof e!="object"?null:(e=Ku&&e[Ku]||e["@@iterator"],typeof e=="function"?e:null)}var ef={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tf=Object.assign,rf={};function gn(e,t,r){this.props=e,this.context=t,this.refs=rf,this.updater=r||ef}gn.prototype.isReactComponent={};gn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function sf(){}sf.prototype=gn.prototype;function Sc(e,t,r){this.props=e,this.context=t,this.refs=rf,this.updater=r||ef}var Ec=Sc.prototype=new sf;Ec.constructor=Sc;tf(Ec,gn.prototype);Ec.isPureReactComponent=!0;var Gu=Array.isArray,nf=Object.prototype.hasOwnProperty,Cc={current:null},af={key:!0,ref:!0,__self:!0,__source:!0};function lf(e,t,r){var s,n={},a=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)nf.call(t,s)&&!af.hasOwnProperty(s)&&(n[s]=t[s]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];n.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)n[s]===void 0&&(n[s]=o[s]);return{$$typeof:Ni,type:e,key:a,ref:l,props:n,_owner:Cc.current}}function Og(e,t){return{$$typeof:Ni,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Tc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ni}function Ig(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Ju=/\/+/g;function Sl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ig(""+e.key):t.toString(36)}function ia(e,t,r,s,n){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Ni:case jg:l=!0}}if(l)return l=e,n=n(l),e=s===""?"."+Sl(l,0):s,Gu(n)?(r="",e!=null&&(r=e.replace(Ju,"$&/")+"/"),ia(n,t,r,"",function(u){return u})):n!=null&&(Tc(n)&&(n=Og(n,r+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(Ju,"$&/")+"/")+e)),t.push(n)),1;if(l=0,s=s===""?".":s+":",Gu(e))for(var o=0;o<e.length;o++){a=e[o];var c=s+Sl(a,o);l+=ia(a,t,r,c,n)}else if(c=Ag(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=s+Sl(a,o++),l+=ia(a,t,r,c,n);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Di(e,t,r){if(e==null)return e;var s=[],n=0;return ia(e,s,"","",function(a){return t.call(r,a,n++)}),s}function $g(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rt={current:null},aa={transition:null},Dg={ReactCurrentDispatcher:rt,ReactCurrentBatchConfig:aa,ReactCurrentOwner:Cc};function of(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:Di,forEach:function(e,t,r){Di(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Di(e,function(){t++}),t},toArray:function(e){return Di(e,function(t){return t})||[]},only:function(e){if(!Tc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Y.Component=gn;Y.Fragment=_g;Y.Profiler=kg;Y.PureComponent=Sc;Y.StrictMode=Ng;Y.Suspense=Tg;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dg;Y.act=of;Y.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=tf({},e.props),n=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=Cc.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)nf.call(t,c)&&!af.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];s.children=o}return{$$typeof:Ni,type:e.type,key:n,ref:a,props:s,_owner:l}};Y.createContext=function(e){return e={$$typeof:Eg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Sg,_context:e},e.Consumer=e};Y.createElement=lf;Y.createFactory=function(e){var t=lf.bind(null,e);return t.type=e,t};Y.createRef=function(){return{current:null}};Y.forwardRef=function(e){return{$$typeof:Cg,render:e}};Y.isValidElement=Tc;Y.lazy=function(e){return{$$typeof:Rg,_payload:{_status:-1,_result:e},_init:$g}};Y.memo=function(e,t){return{$$typeof:Pg,type:e,compare:t===void 0?null:t}};Y.startTransition=function(e){var t=aa.transition;aa.transition={};try{e()}finally{aa.transition=t}};Y.unstable_act=of;Y.useCallback=function(e,t){return rt.current.useCallback(e,t)};Y.useContext=function(e){return rt.current.useContext(e)};Y.useDebugValue=function(){};Y.useDeferredValue=function(e){return rt.current.useDeferredValue(e)};Y.useEffect=function(e,t){return rt.current.useEffect(e,t)};Y.useId=function(){return rt.current.useId()};Y.useImperativeHandle=function(e,t,r){return rt.current.useImperativeHandle(e,t,r)};Y.useInsertionEffect=function(e,t){return rt.current.useInsertionEffect(e,t)};Y.useLayoutEffect=function(e,t){return rt.current.useLayoutEffect(e,t)};Y.useMemo=function(e,t){return rt.current.useMemo(e,t)};Y.useReducer=function(e,t,r){return rt.current.useReducer(e,t,r)};Y.useRef=function(e){return rt.current.useRef(e)};Y.useState=function(e){return rt.current.useState(e)};Y.useSyncExternalStore=function(e,t,r){return rt.current.useSyncExternalStore(e,t,r)};Y.useTransition=function(){return rt.current.useTransition()};Y.version="18.3.1";Zh.exports=Y;var b=Zh.exports;const Ke=bg(b),Lg=wg({__proto__:null,default:Ke},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug=b,Mg=Symbol.for("react.element"),Fg=Symbol.for("react.fragment"),zg=Object.prototype.hasOwnProperty,Vg=Ug.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bg={key:!0,ref:!0,__self:!0,__source:!0};function cf(e,t,r){var s,n={},a=null,l=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)zg.call(t,s)&&!Bg.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)n[s]===void 0&&(n[s]=t[s]);return{$$typeof:Mg,type:e,key:a,ref:l,props:n,_owner:Vg.current}}Ja.Fragment=Fg;Ja.jsx=cf;Ja.jsxs=cf;Yh.exports=Ja;var i=Yh.exports,ho={},uf={exports:{}},vt={},df={exports:{}},hf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,X){var Q=D.length;D.push(X);e:for(;0<Q;){var ue=Q-1>>>1,we=D[ue];if(0<n(we,X))D[ue]=X,D[Q]=we,Q=ue;else break e}}function r(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var X=D[0],Q=D.pop();if(Q!==X){D[0]=Q;e:for(var ue=0,we=D.length,ks=we>>>1;ue<ks;){var Wt=2*(ue+1)-1,jn=D[Wt],Ht=Wt+1,Ss=D[Ht];if(0>n(jn,Q))Ht<we&&0>n(Ss,jn)?(D[ue]=Ss,D[Ht]=Q,ue=Ht):(D[ue]=jn,D[Wt]=Q,ue=Wt);else if(Ht<we&&0>n(Ss,Q))D[ue]=Ss,D[Ht]=Q,ue=Ht;else break e}}return X}function n(D,X){var Q=D.sortIndex-X.sortIndex;return Q!==0?Q:D.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],u=[],f=1,d=null,p=3,h=!1,v=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(D){for(var X=r(u);X!==null;){if(X.callback===null)s(u);else if(X.startTime<=D)s(u),X.sortIndex=X.expirationTime,t(c,X);else break;X=r(u)}}function N(D){if(x=!1,m(D),!v)if(r(c)!==null)v=!0,$e(_);else{var X=r(u);X!==null&&ce(N,X.startTime-D)}}function _(D,X){v=!1,x&&(x=!1,y(C),C=-1),h=!0;var Q=p;try{for(m(X),d=r(c);d!==null&&(!(d.expirationTime>X)||D&&!V());){var ue=d.callback;if(typeof ue=="function"){d.callback=null,p=d.priorityLevel;var we=ue(d.expirationTime<=X);X=e.unstable_now(),typeof we=="function"?d.callback=we:d===r(c)&&s(c),m(X)}else s(c);d=r(c)}if(d!==null)var ks=!0;else{var Wt=r(u);Wt!==null&&ce(N,Wt.startTime-X),ks=!1}return ks}finally{d=null,p=Q,h=!1}}var j=!1,E=null,C=-1,A=5,S=-1;function V(){return!(e.unstable_now()-S<A)}function M(){if(E!==null){var D=e.unstable_now();S=D;var X=!0;try{X=E(!0,D)}finally{X?B():(j=!1,E=null)}}else j=!1}var B;if(typeof g=="function")B=function(){g(M)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,J=P.port2;P.port1.onmessage=M,B=function(){J.postMessage(null)}}else B=function(){w(M,0)};function $e(D){E=D,j||(j=!0,B())}function ce(D,X){C=w(function(){D(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){v||h||(v=!0,$e(_))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(D){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var Q=p;p=X;try{return D()}finally{p=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,X){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var Q=p;p=D;try{return X()}finally{p=Q}},e.unstable_scheduleCallback=function(D,X,Q){var ue=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ue+Q:ue):Q=ue,D){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=Q+we,D={id:f++,callback:X,priorityLevel:D,startTime:Q,expirationTime:we,sortIndex:-1},Q>ue?(D.sortIndex=Q,t(u,D),r(c)===null&&D===r(u)&&(x?(y(C),C=-1):x=!0,ce(N,Q-ue))):(D.sortIndex=we,t(c,D),v||h||(v=!0,$e(_))),D},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(D){var X=p;return function(){var Q=p;p=X;try{return D.apply(this,arguments)}finally{p=Q}}}})(hf);df.exports=hf;var qg=df.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg=b,yt=qg;function O(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ff=new Set,Qn={};function js(e,t){on(e,t),on(e+"Capture",t)}function on(e,t){for(Qn[e]=t,e=0;e<t.length;e++)ff.add(t[e])}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fo=Object.prototype.hasOwnProperty,Hg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xu={},Qu={};function Kg(e){return fo.call(Qu,e)?!0:fo.call(Xu,e)?!1:Hg.test(e)?Qu[e]=!0:(Xu[e]=!0,!1)}function Gg(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Jg(e,t,r,s){if(t===null||typeof t>"u"||Gg(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function st(e,t,r,s,n,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qe[e]=new st(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qe[t]=new st(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qe[e]=new st(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qe[e]=new st(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qe[e]=new st(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qe[e]=new st(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qe[e]=new st(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qe[e]=new st(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qe[e]=new st(e,5,!1,e.toLowerCase(),null,!1,!1)});var Pc=/[\-:]([a-z])/g;function Rc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Pc,Rc);qe[t]=new st(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Pc,Rc);qe[t]=new st(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Pc,Rc);qe[t]=new st(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qe[e]=new st(e,1,!1,e.toLowerCase(),null,!1,!1)});qe.xlinkHref=new st("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qe[e]=new st(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ac(e,t,r,s){var n=qe.hasOwnProperty(t)?qe[t]:null;(n!==null?n.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Jg(t,r,n,s)&&(r=null),s||n===null?Kg(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,s=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var yr=Wg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Li=Symbol.for("react.element"),Ms=Symbol.for("react.portal"),Fs=Symbol.for("react.fragment"),Oc=Symbol.for("react.strict_mode"),po=Symbol.for("react.profiler"),pf=Symbol.for("react.provider"),mf=Symbol.for("react.context"),Ic=Symbol.for("react.forward_ref"),mo=Symbol.for("react.suspense"),go=Symbol.for("react.suspense_list"),$c=Symbol.for("react.memo"),Nr=Symbol.for("react.lazy"),gf=Symbol.for("react.offscreen"),Yu=Symbol.iterator;function _n(e){return e===null||typeof e!="object"?null:(e=Yu&&e[Yu]||e["@@iterator"],typeof e=="function"?e:null)}var ge=Object.assign,El;function On(e){if(El===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);El=t&&t[1]||""}return`
`+El+e}var Cl=!1;function Tl(e,t){if(!e||Cl)return"";Cl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),a=s.stack.split(`
`),l=n.length-1,o=a.length-1;1<=l&&0<=o&&n[l]!==a[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==a[o]){if(l!==1||o!==1)do if(l--,o--,0>o||n[l]!==a[o]){var c=`
`+n[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{Cl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?On(e):""}function Xg(e){switch(e.tag){case 5:return On(e.type);case 16:return On("Lazy");case 13:return On("Suspense");case 19:return On("SuspenseList");case 0:case 2:case 15:return e=Tl(e.type,!1),e;case 11:return e=Tl(e.type.render,!1),e;case 1:return e=Tl(e.type,!0),e;default:return""}}function xo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fs:return"Fragment";case Ms:return"Portal";case po:return"Profiler";case Oc:return"StrictMode";case mo:return"Suspense";case go:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case mf:return(e.displayName||"Context")+".Consumer";case pf:return(e._context.displayName||"Context")+".Provider";case Ic:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $c:return t=e.displayName||null,t!==null?t:xo(e.type)||"Memo";case Nr:t=e._payload,e=e._init;try{return xo(e(t))}catch{}}return null}function Qg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xo(t);case 8:return t===Oc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Wr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Yg(e){var t=xf(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(l){s=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ui(e){e._valueTracker||(e._valueTracker=Yg(e))}function yf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=xf(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function ya(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function yo(e,t){var r=t.checked;return ge({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Zu(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Wr(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function vf(e,t){t=t.checked,t!=null&&Ac(e,"checked",t,!1)}function vo(e,t){vf(e,t);var r=Wr(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?wo(e,t.type,r):t.hasOwnProperty("defaultValue")&&wo(e,t.type,Wr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ed(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function wo(e,t,r){(t!=="number"||ya(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var In=Array.isArray;function Ys(e,t,r,s){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Wr(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function bo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return ge({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function td(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(O(92));if(In(r)){if(1<r.length)throw Error(O(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Wr(r)}}function wf(e,t){var r=Wr(t.value),s=Wr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function rd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function bf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?bf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Mi,jf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Mi=Mi||document.createElement("div"),Mi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Mi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Yn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Un={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zg=["Webkit","ms","Moz","O"];Object.keys(Un).forEach(function(e){Zg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Un[t]=Un[e]})});function _f(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Un.hasOwnProperty(e)&&Un[e]?(""+t).trim():t+"px"}function Nf(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,n=_f(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,n):e[r]=n}}var e0=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _o(e,t){if(t){if(e0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function No(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ko=null;function Dc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var So=null,Zs=null,en=null;function sd(e){if(e=Ei(e)){if(typeof So!="function")throw Error(O(280));var t=e.stateNode;t&&(t=el(t),So(e.stateNode,e.type,t))}}function kf(e){Zs?en?en.push(e):en=[e]:Zs=e}function Sf(){if(Zs){var e=Zs,t=en;if(en=Zs=null,sd(e),t)for(e=0;e<t.length;e++)sd(t[e])}}function Ef(e,t){return e(t)}function Cf(){}var Pl=!1;function Tf(e,t,r){if(Pl)return e(t,r);Pl=!0;try{return Ef(e,t,r)}finally{Pl=!1,(Zs!==null||en!==null)&&(Cf(),Sf())}}function Zn(e,t){var r=e.stateNode;if(r===null)return null;var s=el(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(O(231,t,typeof r));return r}var Eo=!1;if(fr)try{var Nn={};Object.defineProperty(Nn,"passive",{get:function(){Eo=!0}}),window.addEventListener("test",Nn,Nn),window.removeEventListener("test",Nn,Nn)}catch{Eo=!1}function t0(e,t,r,s,n,a,l,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var Mn=!1,va=null,wa=!1,Co=null,r0={onError:function(e){Mn=!0,va=e}};function s0(e,t,r,s,n,a,l,o,c){Mn=!1,va=null,t0.apply(r0,arguments)}function n0(e,t,r,s,n,a,l,o,c){if(s0.apply(this,arguments),Mn){if(Mn){var u=va;Mn=!1,va=null}else throw Error(O(198));wa||(wa=!0,Co=u)}}function _s(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Pf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nd(e){if(_s(e)!==e)throw Error(O(188))}function i0(e){var t=e.alternate;if(!t){if(t=_s(e),t===null)throw Error(O(188));return t!==e?null:e}for(var r=e,s=t;;){var n=r.return;if(n===null)break;var a=n.alternate;if(a===null){if(s=n.return,s!==null){r=s;continue}break}if(n.child===a.child){for(a=n.child;a;){if(a===r)return nd(n),e;if(a===s)return nd(n),t;a=a.sibling}throw Error(O(188))}if(r.return!==s.return)r=n,s=a;else{for(var l=!1,o=n.child;o;){if(o===r){l=!0,r=n,s=a;break}if(o===s){l=!0,s=n,r=a;break}o=o.sibling}if(!l){for(o=a.child;o;){if(o===r){l=!0,r=a,s=n;break}if(o===s){l=!0,s=a,r=n;break}o=o.sibling}if(!l)throw Error(O(189))}}if(r.alternate!==s)throw Error(O(190))}if(r.tag!==3)throw Error(O(188));return r.stateNode.current===r?e:t}function Rf(e){return e=i0(e),e!==null?Af(e):null}function Af(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Af(e);if(t!==null)return t;e=e.sibling}return null}var Of=yt.unstable_scheduleCallback,id=yt.unstable_cancelCallback,a0=yt.unstable_shouldYield,l0=yt.unstable_requestPaint,_e=yt.unstable_now,o0=yt.unstable_getCurrentPriorityLevel,Lc=yt.unstable_ImmediatePriority,If=yt.unstable_UserBlockingPriority,ba=yt.unstable_NormalPriority,c0=yt.unstable_LowPriority,$f=yt.unstable_IdlePriority,Xa=null,Zt=null;function u0(e){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Xa,e,void 0,(e.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:f0,d0=Math.log,h0=Math.LN2;function f0(e){return e>>>=0,e===0?32:31-(d0(e)/h0|0)|0}var Fi=64,zi=4194304;function $n(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ja(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,n=e.suspendedLanes,a=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~n;o!==0?s=$n(o):(a&=l,a!==0&&(s=$n(a)))}else l=r&~n,l!==0?s=$n(l):a!==0&&(s=$n(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&n)&&(n=s&-s,a=t&-t,n>=a||n===16&&(a&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Ft(t),n=1<<r,s|=e[r],t&=~n;return s}function p0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m0(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-Ft(a),o=1<<l,c=n[l];c===-1?(!(o&r)||o&s)&&(n[l]=p0(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function To(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Df(){var e=Fi;return Fi<<=1,!(Fi&4194240)&&(Fi=64),e}function Rl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ki(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ft(t),e[t]=r}function g0(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-Ft(r),a=1<<n;t[n]=0,s[n]=-1,e[n]=-1,r&=~a}}function Uc(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Ft(r),n=1<<s;n&t|e[s]&t&&(e[s]|=t),r&=~n}}var se=0;function Lf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Uf,Mc,Mf,Ff,zf,Po=!1,Vi=[],$r=null,Dr=null,Lr=null,ei=new Map,ti=new Map,Er=[],x0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ad(e,t){switch(e){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":ei.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ti.delete(t.pointerId)}}function kn(e,t,r,s,n,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[n]},t!==null&&(t=Ei(t),t!==null&&Mc(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function y0(e,t,r,s,n){switch(t){case"focusin":return $r=kn($r,e,t,r,s,n),!0;case"dragenter":return Dr=kn(Dr,e,t,r,s,n),!0;case"mouseover":return Lr=kn(Lr,e,t,r,s,n),!0;case"pointerover":var a=n.pointerId;return ei.set(a,kn(ei.get(a)||null,e,t,r,s,n)),!0;case"gotpointercapture":return a=n.pointerId,ti.set(a,kn(ti.get(a)||null,e,t,r,s,n)),!0}return!1}function Vf(e){var t=is(e.target);if(t!==null){var r=_s(t);if(r!==null){if(t=r.tag,t===13){if(t=Pf(r),t!==null){e.blockedOn=t,zf(e.priority,function(){Mf(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function la(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ro(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);ko=s,r.target.dispatchEvent(s),ko=null}else return t=Ei(r),t!==null&&Mc(t),e.blockedOn=r,!1;t.shift()}return!0}function ld(e,t,r){la(e)&&r.delete(t)}function v0(){Po=!1,$r!==null&&la($r)&&($r=null),Dr!==null&&la(Dr)&&(Dr=null),Lr!==null&&la(Lr)&&(Lr=null),ei.forEach(ld),ti.forEach(ld)}function Sn(e,t){e.blockedOn===t&&(e.blockedOn=null,Po||(Po=!0,yt.unstable_scheduleCallback(yt.unstable_NormalPriority,v0)))}function ri(e){function t(n){return Sn(n,e)}if(0<Vi.length){Sn(Vi[0],e);for(var r=1;r<Vi.length;r++){var s=Vi[r];s.blockedOn===e&&(s.blockedOn=null)}}for($r!==null&&Sn($r,e),Dr!==null&&Sn(Dr,e),Lr!==null&&Sn(Lr,e),ei.forEach(t),ti.forEach(t),r=0;r<Er.length;r++)s=Er[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Er.length&&(r=Er[0],r.blockedOn===null);)Vf(r),r.blockedOn===null&&Er.shift()}var tn=yr.ReactCurrentBatchConfig,_a=!0;function w0(e,t,r,s){var n=se,a=tn.transition;tn.transition=null;try{se=1,Fc(e,t,r,s)}finally{se=n,tn.transition=a}}function b0(e,t,r,s){var n=se,a=tn.transition;tn.transition=null;try{se=4,Fc(e,t,r,s)}finally{se=n,tn.transition=a}}function Fc(e,t,r,s){if(_a){var n=Ro(e,t,r,s);if(n===null)zl(e,t,s,Na,r),ad(e,s);else if(y0(n,e,t,r,s))s.stopPropagation();else if(ad(e,s),t&4&&-1<x0.indexOf(e)){for(;n!==null;){var a=Ei(n);if(a!==null&&Uf(a),a=Ro(e,t,r,s),a===null&&zl(e,t,s,Na,r),a===n)break;n=a}n!==null&&s.stopPropagation()}else zl(e,t,s,null,r)}}var Na=null;function Ro(e,t,r,s){if(Na=null,e=Dc(s),e=is(e),e!==null)if(t=_s(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Pf(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Na=e,null}function Bf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o0()){case Lc:return 1;case If:return 4;case ba:case c0:return 16;case $f:return 536870912;default:return 16}default:return 16}}var Ar=null,zc=null,oa=null;function qf(){if(oa)return oa;var e,t=zc,r=t.length,s,n="value"in Ar?Ar.value:Ar.textContent,a=n.length;for(e=0;e<r&&t[e]===n[e];e++);var l=r-e;for(s=1;s<=l&&t[r-s]===n[a-s];s++);return oa=n.slice(e,1<s?1-s:void 0)}function ca(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bi(){return!0}function od(){return!1}function wt(e){function t(r,s,n,a,l){this._reactName=r,this._targetInst=n,this.type=s,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Bi:od,this.isPropagationStopped=od,this}return ge(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Bi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Bi)},persist:function(){},isPersistent:Bi}),t}var xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vc=wt(xn),Si=ge({},xn,{view:0,detail:0}),j0=wt(Si),Al,Ol,En,Qa=ge({},Si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==En&&(En&&e.type==="mousemove"?(Al=e.screenX-En.screenX,Ol=e.screenY-En.screenY):Ol=Al=0,En=e),Al)},movementY:function(e){return"movementY"in e?e.movementY:Ol}}),cd=wt(Qa),_0=ge({},Qa,{dataTransfer:0}),N0=wt(_0),k0=ge({},Si,{relatedTarget:0}),Il=wt(k0),S0=ge({},xn,{animationName:0,elapsedTime:0,pseudoElement:0}),E0=wt(S0),C0=ge({},xn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),T0=wt(C0),P0=ge({},xn,{data:0}),ud=wt(P0),R0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},O0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function I0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=O0[e])?!!t[e]:!1}function Bc(){return I0}var $0=ge({},Si,{key:function(e){if(e.key){var t=R0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ca(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?A0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bc,charCode:function(e){return e.type==="keypress"?ca(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ca(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),D0=wt($0),L0=ge({},Qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dd=wt(L0),U0=ge({},Si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bc}),M0=wt(U0),F0=ge({},xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),z0=wt(F0),V0=ge({},Qa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),B0=wt(V0),q0=[9,13,27,32],qc=fr&&"CompositionEvent"in window,Fn=null;fr&&"documentMode"in document&&(Fn=document.documentMode);var W0=fr&&"TextEvent"in window&&!Fn,Wf=fr&&(!qc||Fn&&8<Fn&&11>=Fn),hd=" ",fd=!1;function Hf(e,t){switch(e){case"keyup":return q0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zs=!1;function H0(e,t){switch(e){case"compositionend":return Kf(t);case"keypress":return t.which!==32?null:(fd=!0,hd);case"textInput":return e=t.data,e===hd&&fd?null:e;default:return null}}function K0(e,t){if(zs)return e==="compositionend"||!qc&&Hf(e,t)?(e=qf(),oa=zc=Ar=null,zs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wf&&t.locale!=="ko"?null:t.data;default:return null}}var G0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!G0[e.type]:t==="textarea"}function Gf(e,t,r,s){kf(s),t=ka(t,"onChange"),0<t.length&&(r=new Vc("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var zn=null,si=null;function J0(e){ip(e,0)}function Ya(e){var t=qs(e);if(yf(t))return e}function X0(e,t){if(e==="change")return t}var Jf=!1;if(fr){var $l;if(fr){var Dl="oninput"in document;if(!Dl){var md=document.createElement("div");md.setAttribute("oninput","return;"),Dl=typeof md.oninput=="function"}$l=Dl}else $l=!1;Jf=$l&&(!document.documentMode||9<document.documentMode)}function gd(){zn&&(zn.detachEvent("onpropertychange",Xf),si=zn=null)}function Xf(e){if(e.propertyName==="value"&&Ya(si)){var t=[];Gf(t,si,e,Dc(e)),Tf(J0,t)}}function Q0(e,t,r){e==="focusin"?(gd(),zn=t,si=r,zn.attachEvent("onpropertychange",Xf)):e==="focusout"&&gd()}function Y0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ya(si)}function Z0(e,t){if(e==="click")return Ya(t)}function ex(e,t){if(e==="input"||e==="change")return Ya(t)}function tx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qt=typeof Object.is=="function"?Object.is:tx;function ni(e,t){if(qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var n=r[s];if(!fo.call(t,n)||!qt(e[n],t[n]))return!1}return!0}function xd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yd(e,t){var r=xd(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=xd(r)}}function Qf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Yf(){for(var e=window,t=ya();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ya(e.document)}return t}function Wc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function rx(e){var t=Yf(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Qf(r.ownerDocument.documentElement,r)){if(s!==null&&Wc(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,a=Math.min(s.start,n);s=s.end===void 0?a:Math.min(s.end,n),!e.extend&&a>s&&(n=s,s=a,a=n),n=yd(r,a);var l=yd(r,s);n&&l&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sx=fr&&"documentMode"in document&&11>=document.documentMode,Vs=null,Ao=null,Vn=null,Oo=!1;function vd(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Oo||Vs==null||Vs!==ya(s)||(s=Vs,"selectionStart"in s&&Wc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Vn&&ni(Vn,s)||(Vn=s,s=ka(Ao,"onSelect"),0<s.length&&(t=new Vc("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Vs)))}function qi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Bs={animationend:qi("Animation","AnimationEnd"),animationiteration:qi("Animation","AnimationIteration"),animationstart:qi("Animation","AnimationStart"),transitionend:qi("Transition","TransitionEnd")},Ll={},Zf={};fr&&(Zf=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function Za(e){if(Ll[e])return Ll[e];if(!Bs[e])return e;var t=Bs[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Zf)return Ll[e]=t[r];return e}var ep=Za("animationend"),tp=Za("animationiteration"),rp=Za("animationstart"),sp=Za("transitionend"),np=new Map,wd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(e,t){np.set(e,t),js(t,[e])}for(var Ul=0;Ul<wd.length;Ul++){var Ml=wd[Ul],nx=Ml.toLowerCase(),ix=Ml[0].toUpperCase()+Ml.slice(1);Kr(nx,"on"+ix)}Kr(ep,"onAnimationEnd");Kr(tp,"onAnimationIteration");Kr(rp,"onAnimationStart");Kr("dblclick","onDoubleClick");Kr("focusin","onFocus");Kr("focusout","onBlur");Kr(sp,"onTransitionEnd");on("onMouseEnter",["mouseout","mouseover"]);on("onMouseLeave",["mouseout","mouseover"]);on("onPointerEnter",["pointerout","pointerover"]);on("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ax=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dn));function bd(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,n0(s,t,void 0,e),e.currentTarget=null}function ip(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],n=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var l=s.length-1;0<=l;l--){var o=s[l],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==a&&n.isPropagationStopped())break e;bd(n,o,u),a=c}else for(l=0;l<s.length;l++){if(o=s[l],c=o.instance,u=o.currentTarget,o=o.listener,c!==a&&n.isPropagationStopped())break e;bd(n,o,u),a=c}}}if(wa)throw e=Co,wa=!1,Co=null,e}function le(e,t){var r=t[Uo];r===void 0&&(r=t[Uo]=new Set);var s=e+"__bubble";r.has(s)||(ap(t,e,2,!1),r.add(s))}function Fl(e,t,r){var s=0;t&&(s|=4),ap(r,e,s,t)}var Wi="_reactListening"+Math.random().toString(36).slice(2);function ii(e){if(!e[Wi]){e[Wi]=!0,ff.forEach(function(r){r!=="selectionchange"&&(ax.has(r)||Fl(r,!1,e),Fl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wi]||(t[Wi]=!0,Fl("selectionchange",!1,t))}}function ap(e,t,r,s){switch(Bf(t)){case 1:var n=w0;break;case 4:n=b0;break;default:n=Fc}r=n.bind(null,t,r,e),n=void 0,!Eo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function zl(e,t,r,s,n){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var o=s.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(l===4)for(l=s.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;l=l.return}for(;o!==null;){if(l=is(o),l===null)return;if(c=l.tag,c===5||c===6){s=a=l;continue e}o=o.parentNode}}s=s.return}Tf(function(){var u=a,f=Dc(r),d=[];e:{var p=np.get(e);if(p!==void 0){var h=Vc,v=e;switch(e){case"keypress":if(ca(r)===0)break e;case"keydown":case"keyup":h=D0;break;case"focusin":v="focus",h=Il;break;case"focusout":v="blur",h=Il;break;case"beforeblur":case"afterblur":h=Il;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=cd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=N0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=M0;break;case ep:case tp:case rp:h=E0;break;case sp:h=z0;break;case"scroll":h=j0;break;case"wheel":h=B0;break;case"copy":case"cut":case"paste":h=T0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=dd}var x=(t&4)!==0,w=!x&&e==="scroll",y=x?p!==null?p+"Capture":null:p;x=[];for(var g=u,m;g!==null;){m=g;var N=m.stateNode;if(m.tag===5&&N!==null&&(m=N,y!==null&&(N=Zn(g,y),N!=null&&x.push(ai(g,N,m)))),w)break;g=g.return}0<x.length&&(p=new h(p,v,null,r,f),d.push({event:p,listeners:x}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&r!==ko&&(v=r.relatedTarget||r.fromElement)&&(is(v)||v[pr]))break e;if((h||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,h?(v=r.relatedTarget||r.toElement,h=u,v=v?is(v):null,v!==null&&(w=_s(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(h=null,v=u),h!==v)){if(x=cd,N="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(x=dd,N="onPointerLeave",y="onPointerEnter",g="pointer"),w=h==null?p:qs(h),m=v==null?p:qs(v),p=new x(N,g+"leave",h,r,f),p.target=w,p.relatedTarget=m,N=null,is(f)===u&&(x=new x(y,g+"enter",v,r,f),x.target=m,x.relatedTarget=w,N=x),w=N,h&&v)t:{for(x=h,y=v,g=0,m=x;m;m=Es(m))g++;for(m=0,N=y;N;N=Es(N))m++;for(;0<g-m;)x=Es(x),g--;for(;0<m-g;)y=Es(y),m--;for(;g--;){if(x===y||y!==null&&x===y.alternate)break t;x=Es(x),y=Es(y)}x=null}else x=null;h!==null&&jd(d,p,h,x,!1),v!==null&&w!==null&&jd(d,w,v,x,!0)}}e:{if(p=u?qs(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var _=X0;else if(pd(p))if(Jf)_=ex;else{_=Y0;var j=Q0}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(_=Z0);if(_&&(_=_(e,u))){Gf(d,_,r,f);break e}j&&j(e,p,u),e==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&wo(p,"number",p.value)}switch(j=u?qs(u):window,e){case"focusin":(pd(j)||j.contentEditable==="true")&&(Vs=j,Ao=u,Vn=null);break;case"focusout":Vn=Ao=Vs=null;break;case"mousedown":Oo=!0;break;case"contextmenu":case"mouseup":case"dragend":Oo=!1,vd(d,r,f);break;case"selectionchange":if(sx)break;case"keydown":case"keyup":vd(d,r,f)}var E;if(qc)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else zs?Hf(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(Wf&&r.locale!=="ko"&&(zs||C!=="onCompositionStart"?C==="onCompositionEnd"&&zs&&(E=qf()):(Ar=f,zc="value"in Ar?Ar.value:Ar.textContent,zs=!0)),j=ka(u,C),0<j.length&&(C=new ud(C,e,null,r,f),d.push({event:C,listeners:j}),E?C.data=E:(E=Kf(r),E!==null&&(C.data=E)))),(E=W0?H0(e,r):K0(e,r))&&(u=ka(u,"onBeforeInput"),0<u.length&&(f=new ud("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:u}),f.data=E))}ip(d,t)})}function ai(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ka(e,t){for(var r=t+"Capture",s=[];e!==null;){var n=e,a=n.stateNode;n.tag===5&&a!==null&&(n=a,a=Zn(e,r),a!=null&&s.unshift(ai(e,a,n)),a=Zn(e,t),a!=null&&s.push(ai(e,a,n))),e=e.return}return s}function Es(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function jd(e,t,r,s,n){for(var a=t._reactName,l=[];r!==null&&r!==s;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&u!==null&&(o=u,n?(c=Zn(r,a),c!=null&&l.unshift(ai(r,c,o))):n||(c=Zn(r,a),c!=null&&l.push(ai(r,c,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var lx=/\r\n?/g,ox=/\u0000|\uFFFD/g;function _d(e){return(typeof e=="string"?e:""+e).replace(lx,`
`).replace(ox,"")}function Hi(e,t,r){if(t=_d(t),_d(e)!==t&&r)throw Error(O(425))}function Sa(){}var Io=null,$o=null;function Do(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Lo=typeof setTimeout=="function"?setTimeout:void 0,cx=typeof clearTimeout=="function"?clearTimeout:void 0,Nd=typeof Promise=="function"?Promise:void 0,ux=typeof queueMicrotask=="function"?queueMicrotask:typeof Nd<"u"?function(e){return Nd.resolve(null).then(e).catch(dx)}:Lo;function dx(e){setTimeout(function(){throw e})}function Vl(e,t){var r=t,s=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(s===0){e.removeChild(n),ri(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=n}while(r);ri(t)}function Ur(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var yn=Math.random().toString(36).slice(2),Xt="__reactFiber$"+yn,li="__reactProps$"+yn,pr="__reactContainer$"+yn,Uo="__reactEvents$"+yn,hx="__reactListeners$"+yn,fx="__reactHandles$"+yn;function is(e){var t=e[Xt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pr]||r[Xt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=kd(e);e!==null;){if(r=e[Xt])return r;e=kd(e)}return t}e=r,r=e.parentNode}return null}function Ei(e){return e=e[Xt]||e[pr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(O(33))}function el(e){return e[li]||null}var Mo=[],Ws=-1;function Gr(e){return{current:e}}function oe(e){0>Ws||(e.current=Mo[Ws],Mo[Ws]=null,Ws--)}function ae(e,t){Ws++,Mo[Ws]=e.current,e.current=t}var Hr={},Xe=Gr(Hr),ot=Gr(!1),fs=Hr;function cn(e,t){var r=e.type.contextTypes;if(!r)return Hr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var n={},a;for(a in r)n[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function ct(e){return e=e.childContextTypes,e!=null}function Ea(){oe(ot),oe(Xe)}function Sd(e,t,r){if(Xe.current!==Hr)throw Error(O(168));ae(Xe,t),ae(ot,r)}function lp(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var n in s)if(!(n in t))throw Error(O(108,Qg(e)||"Unknown",n));return ge({},r,s)}function Ca(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Hr,fs=Xe.current,ae(Xe,e),ae(ot,ot.current),!0}function Ed(e,t,r){var s=e.stateNode;if(!s)throw Error(O(169));r?(e=lp(e,t,fs),s.__reactInternalMemoizedMergedChildContext=e,oe(ot),oe(Xe),ae(Xe,e)):oe(ot),ae(ot,r)}var or=null,tl=!1,Bl=!1;function op(e){or===null?or=[e]:or.push(e)}function px(e){tl=!0,op(e)}function Jr(){if(!Bl&&or!==null){Bl=!0;var e=0,t=se;try{var r=or;for(se=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}or=null,tl=!1}catch(n){throw or!==null&&(or=or.slice(e+1)),Of(Lc,Jr),n}finally{se=t,Bl=!1}}return null}var Hs=[],Ks=0,Ta=null,Pa=0,_t=[],Nt=0,ps=null,cr=1,ur="";function es(e,t){Hs[Ks++]=Pa,Hs[Ks++]=Ta,Ta=e,Pa=t}function cp(e,t,r){_t[Nt++]=cr,_t[Nt++]=ur,_t[Nt++]=ps,ps=e;var s=cr;e=ur;var n=32-Ft(s)-1;s&=~(1<<n),r+=1;var a=32-Ft(t)+n;if(30<a){var l=n-n%5;a=(s&(1<<l)-1).toString(32),s>>=l,n-=l,cr=1<<32-Ft(t)+n|r<<n|s,ur=a+e}else cr=1<<a|r<<n|s,ur=e}function Hc(e){e.return!==null&&(es(e,1),cp(e,1,0))}function Kc(e){for(;e===Ta;)Ta=Hs[--Ks],Hs[Ks]=null,Pa=Hs[--Ks],Hs[Ks]=null;for(;e===ps;)ps=_t[--Nt],_t[Nt]=null,ur=_t[--Nt],_t[Nt]=null,cr=_t[--Nt],_t[Nt]=null}var xt=null,gt=null,he=!1,Dt=null;function up(e,t){var r=kt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Cd(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xt=e,gt=Ur(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xt=e,gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ps!==null?{id:cr,overflow:ur}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=kt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,xt=e,gt=null,!0):!1;default:return!1}}function Fo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zo(e){if(he){var t=gt;if(t){var r=t;if(!Cd(e,t)){if(Fo(e))throw Error(O(418));t=Ur(r.nextSibling);var s=xt;t&&Cd(e,t)?up(s,r):(e.flags=e.flags&-4097|2,he=!1,xt=e)}}else{if(Fo(e))throw Error(O(418));e.flags=e.flags&-4097|2,he=!1,xt=e}}}function Td(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xt=e}function Ki(e){if(e!==xt)return!1;if(!he)return Td(e),he=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Do(e.type,e.memoizedProps)),t&&(t=gt)){if(Fo(e))throw dp(),Error(O(418));for(;t;)up(e,t),t=Ur(t.nextSibling)}if(Td(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){gt=Ur(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}gt=null}}else gt=xt?Ur(e.stateNode.nextSibling):null;return!0}function dp(){for(var e=gt;e;)e=Ur(e.nextSibling)}function un(){gt=xt=null,he=!1}function Gc(e){Dt===null?Dt=[e]:Dt.push(e)}var mx=yr.ReactCurrentBatchConfig;function Cn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(O(309));var s=r.stateNode}if(!s)throw Error(O(147,e));var n=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var o=n.refs;l===null?delete o[a]:o[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(O(284));if(!r._owner)throw Error(O(290,e))}return e}function Gi(e,t){throw e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Pd(e){var t=e._init;return t(e._payload)}function hp(e){function t(y,g){if(e){var m=y.deletions;m===null?(y.deletions=[g],y.flags|=16):m.push(g)}}function r(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function s(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function n(y,g){return y=Vr(y,g),y.index=0,y.sibling=null,y}function a(y,g,m){return y.index=m,e?(m=y.alternate,m!==null?(m=m.index,m<g?(y.flags|=2,g):m):(y.flags|=2,g)):(y.flags|=1048576,g)}function l(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,g,m,N){return g===null||g.tag!==6?(g=Xl(m,y.mode,N),g.return=y,g):(g=n(g,m),g.return=y,g)}function c(y,g,m,N){var _=m.type;return _===Fs?f(y,g,m.props.children,N,m.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Nr&&Pd(_)===g.type)?(N=n(g,m.props),N.ref=Cn(y,g,m),N.return=y,N):(N=ga(m.type,m.key,m.props,null,y.mode,N),N.ref=Cn(y,g,m),N.return=y,N)}function u(y,g,m,N){return g===null||g.tag!==4||g.stateNode.containerInfo!==m.containerInfo||g.stateNode.implementation!==m.implementation?(g=Ql(m,y.mode,N),g.return=y,g):(g=n(g,m.children||[]),g.return=y,g)}function f(y,g,m,N,_){return g===null||g.tag!==7?(g=ds(m,y.mode,N,_),g.return=y,g):(g=n(g,m),g.return=y,g)}function d(y,g,m){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Xl(""+g,y.mode,m),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Li:return m=ga(g.type,g.key,g.props,null,y.mode,m),m.ref=Cn(y,null,g),m.return=y,m;case Ms:return g=Ql(g,y.mode,m),g.return=y,g;case Nr:var N=g._init;return d(y,N(g._payload),m)}if(In(g)||_n(g))return g=ds(g,y.mode,m,null),g.return=y,g;Gi(y,g)}return null}function p(y,g,m,N){var _=g!==null?g.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return _!==null?null:o(y,g,""+m,N);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Li:return m.key===_?c(y,g,m,N):null;case Ms:return m.key===_?u(y,g,m,N):null;case Nr:return _=m._init,p(y,g,_(m._payload),N)}if(In(m)||_n(m))return _!==null?null:f(y,g,m,N,null);Gi(y,m)}return null}function h(y,g,m,N,_){if(typeof N=="string"&&N!==""||typeof N=="number")return y=y.get(m)||null,o(g,y,""+N,_);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Li:return y=y.get(N.key===null?m:N.key)||null,c(g,y,N,_);case Ms:return y=y.get(N.key===null?m:N.key)||null,u(g,y,N,_);case Nr:var j=N._init;return h(y,g,m,j(N._payload),_)}if(In(N)||_n(N))return y=y.get(m)||null,f(g,y,N,_,null);Gi(g,N)}return null}function v(y,g,m,N){for(var _=null,j=null,E=g,C=g=0,A=null;E!==null&&C<m.length;C++){E.index>C?(A=E,E=null):A=E.sibling;var S=p(y,E,m[C],N);if(S===null){E===null&&(E=A);break}e&&E&&S.alternate===null&&t(y,E),g=a(S,g,C),j===null?_=S:j.sibling=S,j=S,E=A}if(C===m.length)return r(y,E),he&&es(y,C),_;if(E===null){for(;C<m.length;C++)E=d(y,m[C],N),E!==null&&(g=a(E,g,C),j===null?_=E:j.sibling=E,j=E);return he&&es(y,C),_}for(E=s(y,E);C<m.length;C++)A=h(E,y,C,m[C],N),A!==null&&(e&&A.alternate!==null&&E.delete(A.key===null?C:A.key),g=a(A,g,C),j===null?_=A:j.sibling=A,j=A);return e&&E.forEach(function(V){return t(y,V)}),he&&es(y,C),_}function x(y,g,m,N){var _=_n(m);if(typeof _!="function")throw Error(O(150));if(m=_.call(m),m==null)throw Error(O(151));for(var j=_=null,E=g,C=g=0,A=null,S=m.next();E!==null&&!S.done;C++,S=m.next()){E.index>C?(A=E,E=null):A=E.sibling;var V=p(y,E,S.value,N);if(V===null){E===null&&(E=A);break}e&&E&&V.alternate===null&&t(y,E),g=a(V,g,C),j===null?_=V:j.sibling=V,j=V,E=A}if(S.done)return r(y,E),he&&es(y,C),_;if(E===null){for(;!S.done;C++,S=m.next())S=d(y,S.value,N),S!==null&&(g=a(S,g,C),j===null?_=S:j.sibling=S,j=S);return he&&es(y,C),_}for(E=s(y,E);!S.done;C++,S=m.next())S=h(E,y,C,S.value,N),S!==null&&(e&&S.alternate!==null&&E.delete(S.key===null?C:S.key),g=a(S,g,C),j===null?_=S:j.sibling=S,j=S);return e&&E.forEach(function(M){return t(y,M)}),he&&es(y,C),_}function w(y,g,m,N){if(typeof m=="object"&&m!==null&&m.type===Fs&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Li:e:{for(var _=m.key,j=g;j!==null;){if(j.key===_){if(_=m.type,_===Fs){if(j.tag===7){r(y,j.sibling),g=n(j,m.props.children),g.return=y,y=g;break e}}else if(j.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Nr&&Pd(_)===j.type){r(y,j.sibling),g=n(j,m.props),g.ref=Cn(y,j,m),g.return=y,y=g;break e}r(y,j);break}else t(y,j);j=j.sibling}m.type===Fs?(g=ds(m.props.children,y.mode,N,m.key),g.return=y,y=g):(N=ga(m.type,m.key,m.props,null,y.mode,N),N.ref=Cn(y,g,m),N.return=y,y=N)}return l(y);case Ms:e:{for(j=m.key;g!==null;){if(g.key===j)if(g.tag===4&&g.stateNode.containerInfo===m.containerInfo&&g.stateNode.implementation===m.implementation){r(y,g.sibling),g=n(g,m.children||[]),g.return=y,y=g;break e}else{r(y,g);break}else t(y,g);g=g.sibling}g=Ql(m,y.mode,N),g.return=y,y=g}return l(y);case Nr:return j=m._init,w(y,g,j(m._payload),N)}if(In(m))return v(y,g,m,N);if(_n(m))return x(y,g,m,N);Gi(y,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,g!==null&&g.tag===6?(r(y,g.sibling),g=n(g,m),g.return=y,y=g):(r(y,g),g=Xl(m,y.mode,N),g.return=y,y=g),l(y)):r(y,g)}return w}var dn=hp(!0),fp=hp(!1),Ra=Gr(null),Aa=null,Gs=null,Jc=null;function Xc(){Jc=Gs=Aa=null}function Qc(e){var t=Ra.current;oe(Ra),e._currentValue=t}function Vo(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function rn(e,t){Aa=e,Jc=Gs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(lt=!0),e.firstContext=null)}function Et(e){var t=e._currentValue;if(Jc!==e)if(e={context:e,memoizedValue:t,next:null},Gs===null){if(Aa===null)throw Error(O(308));Gs=e,Aa.dependencies={lanes:0,firstContext:e}}else Gs=Gs.next=e;return t}var as=null;function Yc(e){as===null?as=[e]:as.push(e)}function pp(e,t,r,s){var n=t.interleaved;return n===null?(r.next=r,Yc(t)):(r.next=n.next,n.next=r),t.interleaved=r,mr(e,s)}function mr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var kr=!1;function Zc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function dr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mr(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ee&2){var n=s.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),s.pending=t,mr(e,r)}return n=s.interleaved,n===null?(t.next=t,Yc(s)):(t.next=n.next,n.next=t),s.interleaved=t,mr(e,r)}function ua(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Uc(e,r)}}function Rd(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var n=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?n=a=l:a=a.next=l,r=r.next}while(r!==null);a===null?n=a=t:a=a.next=t}else n=a=t;r={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Oa(e,t,r,s){var n=e.updateQueue;kr=!1;var a=n.firstBaseUpdate,l=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,u=c.next;c.next=null,l===null?a=u:l.next=u,l=c;var f=e.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==l&&(o===null?f.firstBaseUpdate=u:o.next=u,f.lastBaseUpdate=c))}if(a!==null){var d=n.baseState;l=0,f=u=c=null,o=a;do{var p=o.lane,h=o.eventTime;if((s&p)===p){f!==null&&(f=f.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,x=o;switch(p=t,h=r,x.tag){case 1:if(v=x.payload,typeof v=="function"){d=v.call(h,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,p=typeof v=="function"?v.call(h,d,p):v,p==null)break e;d=ge({},d,p);break e;case 2:kr=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,p=n.effects,p===null?n.effects=[o]:p.push(o))}else h={eventTime:h,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(u=f=h,c=d):f=f.next=h,l|=p;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;p=o,o=p.next,p.next=null,n.lastBaseUpdate=p,n.shared.pending=null}}while(!0);if(f===null&&(c=d),n.baseState=c,n.firstBaseUpdate=u,n.lastBaseUpdate=f,t=n.shared.interleaved,t!==null){n=t;do l|=n.lane,n=n.next;while(n!==t)}else a===null&&(n.shared.lanes=0);gs|=l,e.lanes=l,e.memoizedState=d}}function Ad(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],n=s.callback;if(n!==null){if(s.callback=null,s=r,typeof n!="function")throw Error(O(191,n));n.call(s)}}}var Ci={},er=Gr(Ci),oi=Gr(Ci),ci=Gr(Ci);function ls(e){if(e===Ci)throw Error(O(174));return e}function eu(e,t){switch(ae(ci,t),ae(oi,e),ae(er,Ci),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:jo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=jo(t,e)}oe(er),ae(er,t)}function hn(){oe(er),oe(oi),oe(ci)}function gp(e){ls(ci.current);var t=ls(er.current),r=jo(t,e.type);t!==r&&(ae(oi,e),ae(er,r))}function tu(e){oi.current===e&&(oe(er),oe(oi))}var pe=Gr(0);function Ia(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ql=[];function ru(){for(var e=0;e<ql.length;e++)ql[e]._workInProgressVersionPrimary=null;ql.length=0}var da=yr.ReactCurrentDispatcher,Wl=yr.ReactCurrentBatchConfig,ms=0,me=null,Re=null,Le=null,$a=!1,Bn=!1,ui=0,gx=0;function We(){throw Error(O(321))}function su(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!qt(e[r],t[r]))return!1;return!0}function nu(e,t,r,s,n,a){if(ms=a,me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,da.current=e===null||e.memoizedState===null?wx:bx,e=r(s,n),Bn){a=0;do{if(Bn=!1,ui=0,25<=a)throw Error(O(301));a+=1,Le=Re=null,t.updateQueue=null,da.current=jx,e=r(s,n)}while(Bn)}if(da.current=Da,t=Re!==null&&Re.next!==null,ms=0,Le=Re=me=null,$a=!1,t)throw Error(O(300));return e}function iu(){var e=ui!==0;return ui=0,e}function Gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?me.memoizedState=Le=e:Le=Le.next=e,Le}function Ct(){if(Re===null){var e=me.alternate;e=e!==null?e.memoizedState:null}else e=Re.next;var t=Le===null?me.memoizedState:Le.next;if(t!==null)Le=t,Re=e;else{if(e===null)throw Error(O(310));Re=e,e={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},Le===null?me.memoizedState=Le=e:Le=Le.next=e}return Le}function di(e,t){return typeof t=="function"?t(e):t}function Hl(e){var t=Ct(),r=t.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=e;var s=Re,n=s.baseQueue,a=r.pending;if(a!==null){if(n!==null){var l=n.next;n.next=a.next,a.next=l}s.baseQueue=n=a,r.pending=null}if(n!==null){a=n.next,s=s.baseState;var o=l=null,c=null,u=a;do{var f=u.lane;if((ms&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=d,l=s):c=c.next=d,me.lanes|=f,gs|=f}u=u.next}while(u!==null&&u!==a);c===null?l=s:c.next=o,qt(s,t.memoizedState)||(lt=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){n=e;do a=n.lane,me.lanes|=a,gs|=a,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Kl(e){var t=Ct(),r=t.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=e;var s=r.dispatch,n=r.pending,a=t.memoizedState;if(n!==null){r.pending=null;var l=n=n.next;do a=e(a,l.action),l=l.next;while(l!==n);qt(a,t.memoizedState)||(lt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,s]}function xp(){}function yp(e,t){var r=me,s=Ct(),n=t(),a=!qt(s.memoizedState,n);if(a&&(s.memoizedState=n,lt=!0),s=s.queue,au(bp.bind(null,r,s,e),[e]),s.getSnapshot!==t||a||Le!==null&&Le.memoizedState.tag&1){if(r.flags|=2048,hi(9,wp.bind(null,r,s,n,t),void 0,null),Me===null)throw Error(O(349));ms&30||vp(r,t,n)}return n}function vp(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=me.updateQueue,t===null?(t={lastEffect:null,stores:null},me.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function wp(e,t,r,s){t.value=r,t.getSnapshot=s,jp(t)&&_p(e)}function bp(e,t,r){return r(function(){jp(t)&&_p(e)})}function jp(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!qt(e,r)}catch{return!0}}function _p(e){var t=mr(e,1);t!==null&&zt(t,e,1,-1)}function Od(e){var t=Gt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:e},t.queue=e,e=e.dispatch=vx.bind(null,me,e),[t.memoizedState,e]}function hi(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=me.updateQueue,t===null?(t={lastEffect:null,stores:null},me.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function Np(){return Ct().memoizedState}function ha(e,t,r,s){var n=Gt();me.flags|=e,n.memoizedState=hi(1|t,r,void 0,s===void 0?null:s)}function rl(e,t,r,s){var n=Ct();s=s===void 0?null:s;var a=void 0;if(Re!==null){var l=Re.memoizedState;if(a=l.destroy,s!==null&&su(s,l.deps)){n.memoizedState=hi(t,r,a,s);return}}me.flags|=e,n.memoizedState=hi(1|t,r,a,s)}function Id(e,t){return ha(8390656,8,e,t)}function au(e,t){return rl(2048,8,e,t)}function kp(e,t){return rl(4,2,e,t)}function Sp(e,t){return rl(4,4,e,t)}function Ep(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Cp(e,t,r){return r=r!=null?r.concat([e]):null,rl(4,4,Ep.bind(null,t,e),r)}function lu(){}function Tp(e,t){var r=Ct();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&su(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Pp(e,t){var r=Ct();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&su(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function Rp(e,t,r){return ms&21?(qt(r,t)||(r=Df(),me.lanes|=r,gs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,lt=!0),e.memoizedState=r)}function xx(e,t){var r=se;se=r!==0&&4>r?r:4,e(!0);var s=Wl.transition;Wl.transition={};try{e(!1),t()}finally{se=r,Wl.transition=s}}function Ap(){return Ct().memoizedState}function yx(e,t,r){var s=zr(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Op(e))Ip(t,r);else if(r=pp(e,t,r,s),r!==null){var n=Ze();zt(r,e,s,n),$p(r,t,s)}}function vx(e,t,r){var s=zr(e),n={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Op(e))Ip(t,n);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,o=a(l,r);if(n.hasEagerState=!0,n.eagerState=o,qt(o,l)){var c=t.interleaved;c===null?(n.next=n,Yc(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}r=pp(e,t,n,s),r!==null&&(n=Ze(),zt(r,e,s,n),$p(r,t,s))}}function Op(e){var t=e.alternate;return e===me||t!==null&&t===me}function Ip(e,t){Bn=$a=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function $p(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Uc(e,r)}}var Da={readContext:Et,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useInsertionEffect:We,useLayoutEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useMutableSource:We,useSyncExternalStore:We,useId:We,unstable_isNewReconciler:!1},wx={readContext:Et,useCallback:function(e,t){return Gt().memoizedState=[e,t===void 0?null:t],e},useContext:Et,useEffect:Id,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ha(4194308,4,Ep.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ha(4194308,4,e,t)},useInsertionEffect:function(e,t){return ha(4,2,e,t)},useMemo:function(e,t){var r=Gt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Gt();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=yx.bind(null,me,e),[s.memoizedState,e]},useRef:function(e){var t=Gt();return e={current:e},t.memoizedState=e},useState:Od,useDebugValue:lu,useDeferredValue:function(e){return Gt().memoizedState=e},useTransition:function(){var e=Od(!1),t=e[0];return e=xx.bind(null,e[1]),Gt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=me,n=Gt();if(he){if(r===void 0)throw Error(O(407));r=r()}else{if(r=t(),Me===null)throw Error(O(349));ms&30||vp(s,t,r)}n.memoizedState=r;var a={value:r,getSnapshot:t};return n.queue=a,Id(bp.bind(null,s,a,e),[e]),s.flags|=2048,hi(9,wp.bind(null,s,a,r,t),void 0,null),r},useId:function(){var e=Gt(),t=Me.identifierPrefix;if(he){var r=ur,s=cr;r=(s&~(1<<32-Ft(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=ui++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=gx++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},bx={readContext:Et,useCallback:Tp,useContext:Et,useEffect:au,useImperativeHandle:Cp,useInsertionEffect:kp,useLayoutEffect:Sp,useMemo:Pp,useReducer:Hl,useRef:Np,useState:function(){return Hl(di)},useDebugValue:lu,useDeferredValue:function(e){var t=Ct();return Rp(t,Re.memoizedState,e)},useTransition:function(){var e=Hl(di)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:xp,useSyncExternalStore:yp,useId:Ap,unstable_isNewReconciler:!1},jx={readContext:Et,useCallback:Tp,useContext:Et,useEffect:au,useImperativeHandle:Cp,useInsertionEffect:kp,useLayoutEffect:Sp,useMemo:Pp,useReducer:Kl,useRef:Np,useState:function(){return Kl(di)},useDebugValue:lu,useDeferredValue:function(e){var t=Ct();return Re===null?t.memoizedState=e:Rp(t,Re.memoizedState,e)},useTransition:function(){var e=Kl(di)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:xp,useSyncExternalStore:yp,useId:Ap,unstable_isNewReconciler:!1};function At(e,t){if(e&&e.defaultProps){t=ge({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Bo(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:ge({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var sl={isMounted:function(e){return(e=e._reactInternals)?_s(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Ze(),n=zr(e),a=dr(s,n);a.payload=t,r!=null&&(a.callback=r),t=Mr(e,a,n),t!==null&&(zt(t,e,n,s),ua(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Ze(),n=zr(e),a=dr(s,n);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Mr(e,a,n),t!==null&&(zt(t,e,n,s),ua(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ze(),s=zr(e),n=dr(r,s);n.tag=2,t!=null&&(n.callback=t),t=Mr(e,n,s),t!==null&&(zt(t,e,s,r),ua(t,e,s))}};function $d(e,t,r,s,n,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,l):t.prototype&&t.prototype.isPureReactComponent?!ni(r,s)||!ni(n,a):!0}function Dp(e,t,r){var s=!1,n=Hr,a=t.contextType;return typeof a=="object"&&a!==null?a=Et(a):(n=ct(t)?fs:Xe.current,s=t.contextTypes,a=(s=s!=null)?cn(e,n):Hr),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sl,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),t}function Dd(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&sl.enqueueReplaceState(t,t.state,null)}function qo(e,t,r,s){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},Zc(e);var a=t.contextType;typeof a=="object"&&a!==null?n.context=Et(a):(a=ct(t)?fs:Xe.current,n.context=cn(e,a)),n.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Bo(e,t,a,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&sl.enqueueReplaceState(n,n.state,null),Oa(e,r,n,s),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function fn(e,t){try{var r="",s=t;do r+=Xg(s),s=s.return;while(s);var n=r}catch(a){n=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:n,digest:null}}function Gl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Wo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var _x=typeof WeakMap=="function"?WeakMap:Map;function Lp(e,t,r){r=dr(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Ua||(Ua=!0,tc=s),Wo(e,t)},r}function Up(e,t,r){r=dr(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var n=t.value;r.payload=function(){return s(n)},r.callback=function(){Wo(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Wo(e,t),typeof s!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function Ld(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new _x;var n=new Set;s.set(t,n)}else n=s.get(t),n===void 0&&(n=new Set,s.set(t,n));n.has(r)||(n.add(r),e=Lx.bind(null,e,t,r),t.then(e,e))}function Ud(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Md(e,t,r,s,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=dr(-1,1),t.tag=2,Mr(r,t,1))),r.lanes|=1),e)}var Nx=yr.ReactCurrentOwner,lt=!1;function Ye(e,t,r,s){t.child=e===null?fp(t,null,r,s):dn(t,e.child,r,s)}function Fd(e,t,r,s,n){r=r.render;var a=t.ref;return rn(t,n),s=nu(e,t,r,s,a,n),r=iu(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,gr(e,t,n)):(he&&r&&Hc(t),t.flags|=1,Ye(e,t,s,n),t.child)}function zd(e,t,r,s,n){if(e===null){var a=r.type;return typeof a=="function"&&!mu(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Mp(e,t,a,s,n)):(e=ga(r.type,null,s,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&n)){var l=a.memoizedProps;if(r=r.compare,r=r!==null?r:ni,r(l,s)&&e.ref===t.ref)return gr(e,t,n)}return t.flags|=1,e=Vr(a,s),e.ref=t.ref,e.return=t,t.child=e}function Mp(e,t,r,s,n){if(e!==null){var a=e.memoizedProps;if(ni(a,s)&&e.ref===t.ref)if(lt=!1,t.pendingProps=s=a,(e.lanes&n)!==0)e.flags&131072&&(lt=!0);else return t.lanes=e.lanes,gr(e,t,n)}return Ho(e,t,r,s,n)}function Fp(e,t,r){var s=t.pendingProps,n=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae(Xs,ht),ht|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ae(Xs,ht),ht|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:r,ae(Xs,ht),ht|=s}else a!==null?(s=a.baseLanes|r,t.memoizedState=null):s=r,ae(Xs,ht),ht|=s;return Ye(e,t,n,r),t.child}function zp(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ho(e,t,r,s,n){var a=ct(r)?fs:Xe.current;return a=cn(t,a),rn(t,n),r=nu(e,t,r,s,a,n),s=iu(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,gr(e,t,n)):(he&&s&&Hc(t),t.flags|=1,Ye(e,t,r,n),t.child)}function Vd(e,t,r,s,n){if(ct(r)){var a=!0;Ca(t)}else a=!1;if(rn(t,n),t.stateNode===null)fa(e,t),Dp(t,r,s),qo(t,r,s,n),s=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,u=r.contextType;typeof u=="object"&&u!==null?u=Et(u):(u=ct(r)?fs:Xe.current,u=cn(t,u));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function";d||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==s||c!==u)&&Dd(t,l,s,u),kr=!1;var p=t.memoizedState;l.state=p,Oa(t,s,l,n),c=t.memoizedState,o!==s||p!==c||ot.current||kr?(typeof f=="function"&&(Bo(t,r,f,s),c=t.memoizedState),(o=kr||$d(t,r,o,s,p,c,u))?(d||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),l.props=s,l.state=c,l.context=u,s=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,mp(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:At(t.type,o),l.props=u,d=t.pendingProps,p=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=Et(c):(c=ct(r)?fs:Xe.current,c=cn(t,c));var h=r.getDerivedStateFromProps;(f=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==d||p!==c)&&Dd(t,l,s,c),kr=!1,p=t.memoizedState,l.state=p,Oa(t,s,l,n);var v=t.memoizedState;o!==d||p!==v||ot.current||kr?(typeof h=="function"&&(Bo(t,r,h,s),v=t.memoizedState),(u=kr||$d(t,r,u,s,p,v,c)||!1)?(f||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,v,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,v,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=v),l.props=s,l.state=v,l.context=c,s=u):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),s=!1)}return Ko(e,t,r,s,a,n)}function Ko(e,t,r,s,n,a){zp(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return n&&Ed(t,r,!1),gr(e,t,a);s=t.stateNode,Nx.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=dn(t,e.child,null,a),t.child=dn(t,null,o,a)):Ye(e,t,o,a),t.memoizedState=s.state,n&&Ed(t,r,!0),t.child}function Vp(e){var t=e.stateNode;t.pendingContext?Sd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sd(e,t.context,!1),eu(e,t.containerInfo)}function Bd(e,t,r,s,n){return un(),Gc(n),t.flags|=256,Ye(e,t,r,s),t.child}var Go={dehydrated:null,treeContext:null,retryLane:0};function Jo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bp(e,t,r){var s=t.pendingProps,n=pe.current,a=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(n&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),ae(pe,n&1),e===null)return zo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,a?(s=t.mode,a=t.child,l={mode:"hidden",children:l},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=al(l,s,0,null),e=ds(e,s,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Jo(r),t.memoizedState=Go,e):ou(t,l));if(n=e.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return kx(e,t,l,s,o,n,r);if(a){a=s.fallback,l=t.mode,n=e.child,o=n.sibling;var c={mode:"hidden",children:s.children};return!(l&1)&&t.child!==n?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Vr(n,c),s.subtreeFlags=n.subtreeFlags&14680064),o!==null?a=Vr(o,a):(a=ds(a,l,r,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,l=e.child.memoizedState,l=l===null?Jo(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~r,t.memoizedState=Go,s}return a=e.child,e=a.sibling,s=Vr(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function ou(e,t){return t=al({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ji(e,t,r,s){return s!==null&&Gc(s),dn(t,e.child,null,r),e=ou(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kx(e,t,r,s,n,a,l){if(r)return t.flags&256?(t.flags&=-257,s=Gl(Error(O(422))),Ji(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,n=t.mode,s=al({mode:"visible",children:s.children},n,0,null),a=ds(a,n,l,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&dn(t,e.child,null,l),t.child.memoizedState=Jo(l),t.memoizedState=Go,a);if(!(t.mode&1))return Ji(e,t,l,null);if(n.data==="$!"){if(s=n.nextSibling&&n.nextSibling.dataset,s)var o=s.dgst;return s=o,a=Error(O(419)),s=Gl(a,s,void 0),Ji(e,t,l,s)}if(o=(l&e.childLanes)!==0,lt||o){if(s=Me,s!==null){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(s.suspendedLanes|l)?0:n,n!==0&&n!==a.retryLane&&(a.retryLane=n,mr(e,n),zt(s,e,n,-1))}return pu(),s=Gl(Error(O(421))),Ji(e,t,l,s)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=Ux.bind(null,e),n._reactRetry=t,null):(e=a.treeContext,gt=Ur(n.nextSibling),xt=t,he=!0,Dt=null,e!==null&&(_t[Nt++]=cr,_t[Nt++]=ur,_t[Nt++]=ps,cr=e.id,ur=e.overflow,ps=t),t=ou(t,s.children),t.flags|=4096,t)}function qd(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Vo(e.return,t,r)}function Jl(e,t,r,s,n){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:n}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=n)}function qp(e,t,r){var s=t.pendingProps,n=s.revealOrder,a=s.tail;if(Ye(e,t,s.children,r),s=pe.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qd(e,r,t);else if(e.tag===19)qd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(ae(pe,s),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&Ia(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),Jl(t,!1,n,r,a);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Ia(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Jl(t,!0,r,null,a);break;case"together":Jl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function fa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),gs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,r=Vr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Vr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Sx(e,t,r){switch(t.tag){case 3:Vp(t),un();break;case 5:gp(t);break;case 1:ct(t.type)&&Ca(t);break;case 4:eu(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,n=t.memoizedProps.value;ae(Ra,s._currentValue),s._currentValue=n;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(ae(pe,pe.current&1),t.flags|=128,null):r&t.child.childLanes?Bp(e,t,r):(ae(pe,pe.current&1),e=gr(e,t,r),e!==null?e.sibling:null);ae(pe,pe.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return qp(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ae(pe,pe.current),s)break;return null;case 22:case 23:return t.lanes=0,Fp(e,t,r)}return gr(e,t,r)}var Wp,Xo,Hp,Kp;Wp=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Xo=function(){};Hp=function(e,t,r,s){var n=e.memoizedProps;if(n!==s){e=t.stateNode,ls(er.current);var a=null;switch(r){case"input":n=yo(e,n),s=yo(e,s),a=[];break;case"select":n=ge({},n,{value:void 0}),s=ge({},s,{value:void 0}),a=[];break;case"textarea":n=bo(e,n),s=bo(e,s),a=[];break;default:typeof n.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Sa)}_o(r,s);var l;r=null;for(u in n)if(!s.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var o=n[u];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qn.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in s){var c=s[u];if(o=n!=null?n[u]:void 0,s.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qn.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&le("scroll",e),a||o===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};Kp=function(e,t,r,s){r!==s&&(t.flags|=4)};function Tn(e,t){if(!he)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function He(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags&14680064,s|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function Ex(e,t,r){var s=t.pendingProps;switch(Kc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(t),null;case 1:return ct(t.type)&&Ea(),He(t),null;case 3:return s=t.stateNode,hn(),oe(ot),oe(Xe),ru(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ki(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Dt!==null&&(nc(Dt),Dt=null))),Xo(e,t),He(t),null;case 5:tu(t);var n=ls(ci.current);if(r=t.type,e!==null&&t.stateNode!=null)Hp(e,t,r,s,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(O(166));return He(t),null}if(e=ls(er.current),Ki(t)){s=t.stateNode,r=t.type;var a=t.memoizedProps;switch(s[Xt]=t,s[li]=a,e=(t.mode&1)!==0,r){case"dialog":le("cancel",s),le("close",s);break;case"iframe":case"object":case"embed":le("load",s);break;case"video":case"audio":for(n=0;n<Dn.length;n++)le(Dn[n],s);break;case"source":le("error",s);break;case"img":case"image":case"link":le("error",s),le("load",s);break;case"details":le("toggle",s);break;case"input":Zu(s,a),le("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},le("invalid",s);break;case"textarea":td(s,a),le("invalid",s)}_o(r,a),n=null;for(var l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="children"?typeof o=="string"?s.textContent!==o&&(a.suppressHydrationWarning!==!0&&Hi(s.textContent,o,e),n=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Hi(s.textContent,o,e),n=["children",""+o]):Qn.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&le("scroll",s)}switch(r){case"input":Ui(s),ed(s,a,!0);break;case"textarea":Ui(s),rd(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=Sa)}s=n,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=bf(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(r,{is:s.is}):(e=l.createElement(r),r==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,r),e[Xt]=t,e[li]=s,Wp(e,t,!1,!1),t.stateNode=e;e:{switch(l=No(r,s),r){case"dialog":le("cancel",e),le("close",e),n=s;break;case"iframe":case"object":case"embed":le("load",e),n=s;break;case"video":case"audio":for(n=0;n<Dn.length;n++)le(Dn[n],e);n=s;break;case"source":le("error",e),n=s;break;case"img":case"image":case"link":le("error",e),le("load",e),n=s;break;case"details":le("toggle",e),n=s;break;case"input":Zu(e,s),n=yo(e,s),le("invalid",e);break;case"option":n=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},n=ge({},s,{value:void 0}),le("invalid",e);break;case"textarea":td(e,s),n=bo(e,s),le("invalid",e);break;default:n=s}_o(r,n),o=n;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?Nf(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&jf(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Yn(e,c):typeof c=="number"&&Yn(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Qn.hasOwnProperty(a)?c!=null&&a==="onScroll"&&le("scroll",e):c!=null&&Ac(e,a,c,l))}switch(r){case"input":Ui(e),ed(e,s,!1);break;case"textarea":Ui(e),rd(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Wr(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?Ys(e,!!s.multiple,a,!1):s.defaultValue!=null&&Ys(e,!!s.multiple,s.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Sa)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return He(t),null;case 6:if(e&&t.stateNode!=null)Kp(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(O(166));if(r=ls(ci.current),ls(er.current),Ki(t)){if(s=t.stateNode,r=t.memoizedProps,s[Xt]=t,(a=s.nodeValue!==r)&&(e=xt,e!==null))switch(e.tag){case 3:Hi(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Hi(s.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Xt]=t,t.stateNode=s}return He(t),null;case 13:if(oe(pe),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(he&&gt!==null&&t.mode&1&&!(t.flags&128))dp(),un(),t.flags|=98560,a=!1;else if(a=Ki(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(O(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(O(317));a[Xt]=t}else un(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;He(t),a=!1}else Dt!==null&&(nc(Dt),Dt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||pe.current&1?Oe===0&&(Oe=3):pu())),t.updateQueue!==null&&(t.flags|=4),He(t),null);case 4:return hn(),Xo(e,t),e===null&&ii(t.stateNode.containerInfo),He(t),null;case 10:return Qc(t.type._context),He(t),null;case 17:return ct(t.type)&&Ea(),He(t),null;case 19:if(oe(pe),a=t.memoizedState,a===null)return He(t),null;if(s=(t.flags&128)!==0,l=a.rendering,l===null)if(s)Tn(a,!1);else{if(Oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Ia(e),l!==null){for(t.flags|=128,Tn(a,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)a=r,e=s,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ae(pe,pe.current&1|2),t.child}e=e.sibling}a.tail!==null&&_e()>pn&&(t.flags|=128,s=!0,Tn(a,!1),t.lanes=4194304)}else{if(!s)if(e=Ia(l),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Tn(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!he)return He(t),null}else 2*_e()-a.renderingStartTime>pn&&r!==1073741824&&(t.flags|=128,s=!0,Tn(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(r=a.last,r!==null?r.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=_e(),t.sibling=null,r=pe.current,ae(pe,s?r&1|2:r&1),t):(He(t),null);case 22:case 23:return fu(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?ht&1073741824&&(He(t),t.subtreeFlags&6&&(t.flags|=8192)):He(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function Cx(e,t){switch(Kc(t),t.tag){case 1:return ct(t.type)&&Ea(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hn(),oe(ot),oe(Xe),ru(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return tu(t),null;case 13:if(oe(pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));un()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return oe(pe),null;case 4:return hn(),null;case 10:return Qc(t.type._context),null;case 22:case 23:return fu(),null;case 24:return null;default:return null}}var Xi=!1,Ge=!1,Tx=typeof WeakSet=="function"?WeakSet:Set,U=null;function Js(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){ye(e,t,s)}else r.current=null}function Qo(e,t,r){try{r()}catch(s){ye(e,t,s)}}var Wd=!1;function Px(e,t){if(Io=_a,e=Yf(),Wc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var n=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,u=0,f=0,d=e,p=null;t:for(;;){for(var h;d!==r||n!==0&&d.nodeType!==3||(o=l+n),d!==a||s!==0&&d.nodeType!==3||(c=l+s),d.nodeType===3&&(l+=d.nodeValue.length),(h=d.firstChild)!==null;)p=d,d=h;for(;;){if(d===e)break t;if(p===r&&++u===n&&(o=l),p===a&&++f===s&&(c=l),(h=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=h}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for($o={focusedElem:e,selectionRange:r},_a=!1,U=t;U!==null;)if(t=U,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,U=e;else for(;U!==null;){t=U;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,w=v.memoizedState,y=t.stateNode,g=y.getSnapshotBeforeUpdate(t.elementType===t.type?x:At(t.type,x),w);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(N){ye(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,U=e;break}U=t.return}return v=Wd,Wd=!1,v}function qn(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&e)===e){var a=n.destroy;n.destroy=void 0,a!==void 0&&Qo(t,r,a)}n=n.next}while(n!==s)}}function nl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Yo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Gp(e){var t=e.alternate;t!==null&&(e.alternate=null,Gp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xt],delete t[li],delete t[Uo],delete t[hx],delete t[fx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jp(e){return e.tag===5||e.tag===3||e.tag===4}function Hd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zo(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Sa));else if(s!==4&&(e=e.child,e!==null))for(Zo(e,t,r),e=e.sibling;e!==null;)Zo(e,t,r),e=e.sibling}function ec(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(ec(e,t,r),e=e.sibling;e!==null;)ec(e,t,r),e=e.sibling}var Ve=null,It=!1;function jr(e,t,r){for(r=r.child;r!==null;)Xp(e,t,r),r=r.sibling}function Xp(e,t,r){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Xa,r)}catch{}switch(r.tag){case 5:Ge||Js(r,t);case 6:var s=Ve,n=It;Ve=null,jr(e,t,r),Ve=s,It=n,Ve!==null&&(It?(e=Ve,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ve.removeChild(r.stateNode));break;case 18:Ve!==null&&(It?(e=Ve,r=r.stateNode,e.nodeType===8?Vl(e.parentNode,r):e.nodeType===1&&Vl(e,r),ri(e)):Vl(Ve,r.stateNode));break;case 4:s=Ve,n=It,Ve=r.stateNode.containerInfo,It=!0,jr(e,t,r),Ve=s,It=n;break;case 0:case 11:case 14:case 15:if(!Ge&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){n=s=s.next;do{var a=n,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&Qo(r,t,l),n=n.next}while(n!==s)}jr(e,t,r);break;case 1:if(!Ge&&(Js(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(o){ye(r,t,o)}jr(e,t,r);break;case 21:jr(e,t,r);break;case 22:r.mode&1?(Ge=(s=Ge)||r.memoizedState!==null,jr(e,t,r),Ge=s):jr(e,t,r);break;default:jr(e,t,r)}}function Kd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Tx),t.forEach(function(s){var n=Mx.bind(null,e,s);r.has(s)||(r.add(s),s.then(n,n))})}}function Tt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var n=r[s];try{var a=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Ve=o.stateNode,It=!1;break e;case 3:Ve=o.stateNode.containerInfo,It=!0;break e;case 4:Ve=o.stateNode.containerInfo,It=!0;break e}o=o.return}if(Ve===null)throw Error(O(160));Xp(a,l,n),Ve=null,It=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(u){ye(n,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Qp(t,e),t=t.sibling}function Qp(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Tt(t,e),Kt(e),s&4){try{qn(3,e,e.return),nl(3,e)}catch(x){ye(e,e.return,x)}try{qn(5,e,e.return)}catch(x){ye(e,e.return,x)}}break;case 1:Tt(t,e),Kt(e),s&512&&r!==null&&Js(r,r.return);break;case 5:if(Tt(t,e),Kt(e),s&512&&r!==null&&Js(r,r.return),e.flags&32){var n=e.stateNode;try{Yn(n,"")}catch(x){ye(e,e.return,x)}}if(s&4&&(n=e.stateNode,n!=null)){var a=e.memoizedProps,l=r!==null?r.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&vf(n,a),No(o,l);var u=No(o,a);for(l=0;l<c.length;l+=2){var f=c[l],d=c[l+1];f==="style"?Nf(n,d):f==="dangerouslySetInnerHTML"?jf(n,d):f==="children"?Yn(n,d):Ac(n,f,d,u)}switch(o){case"input":vo(n,a);break;case"textarea":wf(n,a);break;case"select":var p=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?Ys(n,!!a.multiple,h,!1):p!==!!a.multiple&&(a.defaultValue!=null?Ys(n,!!a.multiple,a.defaultValue,!0):Ys(n,!!a.multiple,a.multiple?[]:"",!1))}n[li]=a}catch(x){ye(e,e.return,x)}}break;case 6:if(Tt(t,e),Kt(e),s&4){if(e.stateNode===null)throw Error(O(162));n=e.stateNode,a=e.memoizedProps;try{n.nodeValue=a}catch(x){ye(e,e.return,x)}}break;case 3:if(Tt(t,e),Kt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{ri(t.containerInfo)}catch(x){ye(e,e.return,x)}break;case 4:Tt(t,e),Kt(e);break;case 13:Tt(t,e),Kt(e),n=e.child,n.flags&8192&&(a=n.memoizedState!==null,n.stateNode.isHidden=a,!a||n.alternate!==null&&n.alternate.memoizedState!==null||(du=_e())),s&4&&Kd(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(Ge=(u=Ge)||f,Tt(t,e),Ge=u):Tt(t,e),Kt(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(U=e,f=e.child;f!==null;){for(d=U=f;U!==null;){switch(p=U,h=p.child,p.tag){case 0:case 11:case 14:case 15:qn(4,p,p.return);break;case 1:Js(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){s=p,r=p.return;try{t=s,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){ye(s,r,x)}}break;case 5:Js(p,p.return);break;case 22:if(p.memoizedState!==null){Jd(d);continue}}h!==null?(h.return=p,U=h):Jd(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{n=d.stateNode,u?(a=n.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=d.stateNode,c=d.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=_f("display",l))}catch(x){ye(e,e.return,x)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(x){ye(e,e.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Tt(t,e),Kt(e),s&4&&Kd(e);break;case 21:break;default:Tt(t,e),Kt(e)}}function Kt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Jp(r)){var s=r;break e}r=r.return}throw Error(O(160))}switch(s.tag){case 5:var n=s.stateNode;s.flags&32&&(Yn(n,""),s.flags&=-33);var a=Hd(e);ec(e,a,n);break;case 3:case 4:var l=s.stateNode.containerInfo,o=Hd(e);Zo(e,o,l);break;default:throw Error(O(161))}}catch(c){ye(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Rx(e,t,r){U=e,Yp(e)}function Yp(e,t,r){for(var s=(e.mode&1)!==0;U!==null;){var n=U,a=n.child;if(n.tag===22&&s){var l=n.memoizedState!==null||Xi;if(!l){var o=n.alternate,c=o!==null&&o.memoizedState!==null||Ge;o=Xi;var u=Ge;if(Xi=l,(Ge=c)&&!u)for(U=n;U!==null;)l=U,c=l.child,l.tag===22&&l.memoizedState!==null?Xd(n):c!==null?(c.return=l,U=c):Xd(n);for(;a!==null;)U=a,Yp(a),a=a.sibling;U=n,Xi=o,Ge=u}Gd(e)}else n.subtreeFlags&8772&&a!==null?(a.return=n,U=a):Gd(e)}}function Gd(e){for(;U!==null;){var t=U;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ge||nl(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Ge)if(r===null)s.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:At(t.type,r.memoizedProps);s.componentDidUpdate(n,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Ad(t,a,s);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Ad(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&ri(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Ge||t.flags&512&&Yo(t)}catch(p){ye(t,t.return,p)}}if(t===e){U=null;break}if(r=t.sibling,r!==null){r.return=t.return,U=r;break}U=t.return}}function Jd(e){for(;U!==null;){var t=U;if(t===e){U=null;break}var r=t.sibling;if(r!==null){r.return=t.return,U=r;break}U=t.return}}function Xd(e){for(;U!==null;){var t=U;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nl(4,t)}catch(c){ye(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var n=t.return;try{s.componentDidMount()}catch(c){ye(t,n,c)}}var a=t.return;try{Yo(t)}catch(c){ye(t,a,c)}break;case 5:var l=t.return;try{Yo(t)}catch(c){ye(t,l,c)}}}catch(c){ye(t,t.return,c)}if(t===e){U=null;break}var o=t.sibling;if(o!==null){o.return=t.return,U=o;break}U=t.return}}var Ax=Math.ceil,La=yr.ReactCurrentDispatcher,cu=yr.ReactCurrentOwner,St=yr.ReactCurrentBatchConfig,ee=0,Me=null,Ce=null,Be=0,ht=0,Xs=Gr(0),Oe=0,fi=null,gs=0,il=0,uu=0,Wn=null,at=null,du=0,pn=1/0,ar=null,Ua=!1,tc=null,Fr=null,Qi=!1,Or=null,Ma=0,Hn=0,rc=null,pa=-1,ma=0;function Ze(){return ee&6?_e():pa!==-1?pa:pa=_e()}function zr(e){return e.mode&1?ee&2&&Be!==0?Be&-Be:mx.transition!==null?(ma===0&&(ma=Df()),ma):(e=se,e!==0||(e=window.event,e=e===void 0?16:Bf(e.type)),e):1}function zt(e,t,r,s){if(50<Hn)throw Hn=0,rc=null,Error(O(185));ki(e,r,s),(!(ee&2)||e!==Me)&&(e===Me&&(!(ee&2)&&(il|=r),Oe===4&&Cr(e,Be)),ut(e,s),r===1&&ee===0&&!(t.mode&1)&&(pn=_e()+500,tl&&Jr()))}function ut(e,t){var r=e.callbackNode;m0(e,t);var s=ja(e,e===Me?Be:0);if(s===0)r!==null&&id(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&id(r),t===1)e.tag===0?px(Qd.bind(null,e)):op(Qd.bind(null,e)),ux(function(){!(ee&6)&&Jr()}),r=null;else{switch(Lf(s)){case 1:r=Lc;break;case 4:r=If;break;case 16:r=ba;break;case 536870912:r=$f;break;default:r=ba}r=am(r,Zp.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Zp(e,t){if(pa=-1,ma=0,ee&6)throw Error(O(327));var r=e.callbackNode;if(sn()&&e.callbackNode!==r)return null;var s=ja(e,e===Me?Be:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Fa(e,s);else{t=s;var n=ee;ee|=2;var a=tm();(Me!==e||Be!==t)&&(ar=null,pn=_e()+500,us(e,t));do try{$x();break}catch(o){em(e,o)}while(!0);Xc(),La.current=a,ee=n,Ce!==null?t=0:(Me=null,Be=0,t=Oe)}if(t!==0){if(t===2&&(n=To(e),n!==0&&(s=n,t=sc(e,n))),t===1)throw r=fi,us(e,0),Cr(e,s),ut(e,_e()),r;if(t===6)Cr(e,s);else{if(n=e.current.alternate,!(s&30)&&!Ox(n)&&(t=Fa(e,s),t===2&&(a=To(e),a!==0&&(s=a,t=sc(e,a))),t===1))throw r=fi,us(e,0),Cr(e,s),ut(e,_e()),r;switch(e.finishedWork=n,e.finishedLanes=s,t){case 0:case 1:throw Error(O(345));case 2:ts(e,at,ar);break;case 3:if(Cr(e,s),(s&130023424)===s&&(t=du+500-_e(),10<t)){if(ja(e,0)!==0)break;if(n=e.suspendedLanes,(n&s)!==s){Ze(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=Lo(ts.bind(null,e,at,ar),t);break}ts(e,at,ar);break;case 4:if(Cr(e,s),(s&4194240)===s)break;for(t=e.eventTimes,n=-1;0<s;){var l=31-Ft(s);a=1<<l,l=t[l],l>n&&(n=l),s&=~a}if(s=n,s=_e()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Ax(s/1960))-s,10<s){e.timeoutHandle=Lo(ts.bind(null,e,at,ar),s);break}ts(e,at,ar);break;case 5:ts(e,at,ar);break;default:throw Error(O(329))}}}return ut(e,_e()),e.callbackNode===r?Zp.bind(null,e):null}function sc(e,t){var r=Wn;return e.current.memoizedState.isDehydrated&&(us(e,t).flags|=256),e=Fa(e,t),e!==2&&(t=at,at=r,t!==null&&nc(t)),e}function nc(e){at===null?at=e:at.push.apply(at,e)}function Ox(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var n=r[s],a=n.getSnapshot;n=n.value;try{if(!qt(a(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cr(e,t){for(t&=~uu,t&=~il,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ft(t),s=1<<r;e[r]=-1,t&=~s}}function Qd(e){if(ee&6)throw Error(O(327));sn();var t=ja(e,0);if(!(t&1))return ut(e,_e()),null;var r=Fa(e,t);if(e.tag!==0&&r===2){var s=To(e);s!==0&&(t=s,r=sc(e,s))}if(r===1)throw r=fi,us(e,0),Cr(e,t),ut(e,_e()),r;if(r===6)throw Error(O(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ts(e,at,ar),ut(e,_e()),null}function hu(e,t){var r=ee;ee|=1;try{return e(t)}finally{ee=r,ee===0&&(pn=_e()+500,tl&&Jr())}}function xs(e){Or!==null&&Or.tag===0&&!(ee&6)&&sn();var t=ee;ee|=1;var r=St.transition,s=se;try{if(St.transition=null,se=1,e)return e()}finally{se=s,St.transition=r,ee=t,!(ee&6)&&Jr()}}function fu(){ht=Xs.current,oe(Xs)}function us(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,cx(r)),Ce!==null)for(r=Ce.return;r!==null;){var s=r;switch(Kc(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Ea();break;case 3:hn(),oe(ot),oe(Xe),ru();break;case 5:tu(s);break;case 4:hn();break;case 13:oe(pe);break;case 19:oe(pe);break;case 10:Qc(s.type._context);break;case 22:case 23:fu()}r=r.return}if(Me=e,Ce=e=Vr(e.current,null),Be=ht=t,Oe=0,fi=null,uu=il=gs=0,at=Wn=null,as!==null){for(t=0;t<as.length;t++)if(r=as[t],s=r.interleaved,s!==null){r.interleaved=null;var n=s.next,a=r.pending;if(a!==null){var l=a.next;a.next=n,s.next=l}r.pending=s}as=null}return e}function em(e,t){do{var r=Ce;try{if(Xc(),da.current=Da,$a){for(var s=me.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}$a=!1}if(ms=0,Le=Re=me=null,Bn=!1,ui=0,cu.current=null,r===null||r.return===null){Oe=1,fi=t,Ce=null;break}e:{var a=e,l=r.return,o=r,c=t;if(t=Be,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=o,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var h=Ud(l);if(h!==null){h.flags&=-257,Md(h,l,o,a,t),h.mode&1&&Ld(a,u,t),t=h,c=u;var v=t.updateQueue;if(v===null){var x=new Set;x.add(c),t.updateQueue=x}else v.add(c);break e}else{if(!(t&1)){Ld(a,u,t),pu();break e}c=Error(O(426))}}else if(he&&o.mode&1){var w=Ud(l);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Md(w,l,o,a,t),Gc(fn(c,o));break e}}a=c=fn(c,o),Oe!==4&&(Oe=2),Wn===null?Wn=[a]:Wn.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var y=Lp(a,c,t);Rd(a,y);break e;case 1:o=c;var g=a.type,m=a.stateNode;if(!(a.flags&128)&&(typeof g.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Fr===null||!Fr.has(m)))){a.flags|=65536,t&=-t,a.lanes|=t;var N=Up(a,o,t);Rd(a,N);break e}}a=a.return}while(a!==null)}sm(r)}catch(_){t=_,Ce===r&&r!==null&&(Ce=r=r.return);continue}break}while(!0)}function tm(){var e=La.current;return La.current=Da,e===null?Da:e}function pu(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),Me===null||!(gs&268435455)&&!(il&268435455)||Cr(Me,Be)}function Fa(e,t){var r=ee;ee|=2;var s=tm();(Me!==e||Be!==t)&&(ar=null,us(e,t));do try{Ix();break}catch(n){em(e,n)}while(!0);if(Xc(),ee=r,La.current=s,Ce!==null)throw Error(O(261));return Me=null,Be=0,Oe}function Ix(){for(;Ce!==null;)rm(Ce)}function $x(){for(;Ce!==null&&!a0();)rm(Ce)}function rm(e){var t=im(e.alternate,e,ht);e.memoizedProps=e.pendingProps,t===null?sm(e):Ce=t,cu.current=null}function sm(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Cx(r,t),r!==null){r.flags&=32767,Ce=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oe=6,Ce=null;return}}else if(r=Ex(r,t,ht),r!==null){Ce=r;return}if(t=t.sibling,t!==null){Ce=t;return}Ce=t=e}while(t!==null);Oe===0&&(Oe=5)}function ts(e,t,r){var s=se,n=St.transition;try{St.transition=null,se=1,Dx(e,t,r,s)}finally{St.transition=n,se=s}return null}function Dx(e,t,r,s){do sn();while(Or!==null);if(ee&6)throw Error(O(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(O(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(g0(e,a),e===Me&&(Ce=Me=null,Be=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Qi||(Qi=!0,am(ba,function(){return sn(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=St.transition,St.transition=null;var l=se;se=1;var o=ee;ee|=4,cu.current=null,Px(e,r),Qp(r,e),rx($o),_a=!!Io,$o=Io=null,e.current=r,Rx(r),l0(),ee=o,se=l,St.transition=a}else e.current=r;if(Qi&&(Qi=!1,Or=e,Ma=n),a=e.pendingLanes,a===0&&(Fr=null),u0(r.stateNode),ut(e,_e()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],s(n.value,{componentStack:n.stack,digest:n.digest});if(Ua)throw Ua=!1,e=tc,tc=null,e;return Ma&1&&e.tag!==0&&sn(),a=e.pendingLanes,a&1?e===rc?Hn++:(Hn=0,rc=e):Hn=0,Jr(),null}function sn(){if(Or!==null){var e=Lf(Ma),t=St.transition,r=se;try{if(St.transition=null,se=16>e?16:e,Or===null)var s=!1;else{if(e=Or,Or=null,Ma=0,ee&6)throw Error(O(331));var n=ee;for(ee|=4,U=e.current;U!==null;){var a=U,l=a.child;if(U.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(U=u;U!==null;){var f=U;switch(f.tag){case 0:case 11:case 15:qn(8,f,a)}var d=f.child;if(d!==null)d.return=f,U=d;else for(;U!==null;){f=U;var p=f.sibling,h=f.return;if(Gp(f),f===u){U=null;break}if(p!==null){p.return=h,U=p;break}U=h}}}var v=a.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}U=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,U=l;else e:for(;U!==null;){if(a=U,a.flags&2048)switch(a.tag){case 0:case 11:case 15:qn(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,U=y;break e}U=a.return}}var g=e.current;for(U=g;U!==null;){l=U;var m=l.child;if(l.subtreeFlags&2064&&m!==null)m.return=l,U=m;else e:for(l=g;U!==null;){if(o=U,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:nl(9,o)}}catch(_){ye(o,o.return,_)}if(o===l){U=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,U=N;break e}U=o.return}}if(ee=n,Jr(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Xa,e)}catch{}s=!0}return s}finally{se=r,St.transition=t}}return!1}function Yd(e,t,r){t=fn(r,t),t=Lp(e,t,1),e=Mr(e,t,1),t=Ze(),e!==null&&(ki(e,1,t),ut(e,t))}function ye(e,t,r){if(e.tag===3)Yd(e,e,r);else for(;t!==null;){if(t.tag===3){Yd(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Fr===null||!Fr.has(s))){e=fn(r,e),e=Up(t,e,1),t=Mr(t,e,1),e=Ze(),t!==null&&(ki(t,1,e),ut(t,e));break}}t=t.return}}function Lx(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Ze(),e.pingedLanes|=e.suspendedLanes&r,Me===e&&(Be&r)===r&&(Oe===4||Oe===3&&(Be&130023424)===Be&&500>_e()-du?us(e,0):uu|=r),ut(e,t)}function nm(e,t){t===0&&(e.mode&1?(t=zi,zi<<=1,!(zi&130023424)&&(zi=4194304)):t=1);var r=Ze();e=mr(e,t),e!==null&&(ki(e,t,r),ut(e,r))}function Ux(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),nm(e,r)}function Mx(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(O(314))}s!==null&&s.delete(t),nm(e,r)}var im;im=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ot.current)lt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return lt=!1,Sx(e,t,r);lt=!!(e.flags&131072)}else lt=!1,he&&t.flags&1048576&&cp(t,Pa,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;fa(e,t),e=t.pendingProps;var n=cn(t,Xe.current);rn(t,r),n=nu(null,t,s,e,n,r);var a=iu();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ct(s)?(a=!0,Ca(t)):a=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Zc(t),n.updater=sl,t.stateNode=n,n._reactInternals=t,qo(t,s,e,r),t=Ko(null,t,s,!0,a,r)):(t.tag=0,he&&a&&Hc(t),Ye(null,t,n,r),t=t.child),t;case 16:s=t.elementType;e:{switch(fa(e,t),e=t.pendingProps,n=s._init,s=n(s._payload),t.type=s,n=t.tag=zx(s),e=At(s,e),n){case 0:t=Ho(null,t,s,e,r);break e;case 1:t=Vd(null,t,s,e,r);break e;case 11:t=Fd(null,t,s,e,r);break e;case 14:t=zd(null,t,s,At(s.type,e),r);break e}throw Error(O(306,s,""))}return t;case 0:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:At(s,n),Ho(e,t,s,n,r);case 1:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:At(s,n),Vd(e,t,s,n,r);case 3:e:{if(Vp(t),e===null)throw Error(O(387));s=t.pendingProps,a=t.memoizedState,n=a.element,mp(e,t),Oa(t,s,null,r);var l=t.memoizedState;if(s=l.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){n=fn(Error(O(423)),t),t=Bd(e,t,s,r,n);break e}else if(s!==n){n=fn(Error(O(424)),t),t=Bd(e,t,s,r,n);break e}else for(gt=Ur(t.stateNode.containerInfo.firstChild),xt=t,he=!0,Dt=null,r=fp(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(un(),s===n){t=gr(e,t,r);break e}Ye(e,t,s,r)}t=t.child}return t;case 5:return gp(t),e===null&&zo(t),s=t.type,n=t.pendingProps,a=e!==null?e.memoizedProps:null,l=n.children,Do(s,n)?l=null:a!==null&&Do(s,a)&&(t.flags|=32),zp(e,t),Ye(e,t,l,r),t.child;case 6:return e===null&&zo(t),null;case 13:return Bp(e,t,r);case 4:return eu(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=dn(t,null,s,r):Ye(e,t,s,r),t.child;case 11:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:At(s,n),Fd(e,t,s,n,r);case 7:return Ye(e,t,t.pendingProps,r),t.child;case 8:return Ye(e,t,t.pendingProps.children,r),t.child;case 12:return Ye(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,n=t.pendingProps,a=t.memoizedProps,l=n.value,ae(Ra,s._currentValue),s._currentValue=l,a!==null)if(qt(a.value,l)){if(a.children===n.children&&!ot.current){t=gr(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){l=a.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=dr(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Vo(a.return,r,t),o.lanes|=r;break}c=c.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(O(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),Vo(l,r,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}Ye(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,s=t.pendingProps.children,rn(t,r),n=Et(n),s=s(n),t.flags|=1,Ye(e,t,s,r),t.child;case 14:return s=t.type,n=At(s,t.pendingProps),n=At(s.type,n),zd(e,t,s,n,r);case 15:return Mp(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:At(s,n),fa(e,t),t.tag=1,ct(s)?(e=!0,Ca(t)):e=!1,rn(t,r),Dp(t,s,n),qo(t,s,n,r),Ko(null,t,s,!0,e,r);case 19:return qp(e,t,r);case 22:return Fp(e,t,r)}throw Error(O(156,t.tag))};function am(e,t){return Of(e,t)}function Fx(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,t,r,s){return new Fx(e,t,r,s)}function mu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zx(e){if(typeof e=="function")return mu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ic)return 11;if(e===$c)return 14}return 2}function Vr(e,t){var r=e.alternate;return r===null?(r=kt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ga(e,t,r,s,n,a){var l=2;if(s=e,typeof e=="function")mu(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Fs:return ds(r.children,n,a,t);case Oc:l=8,n|=8;break;case po:return e=kt(12,r,t,n|2),e.elementType=po,e.lanes=a,e;case mo:return e=kt(13,r,t,n),e.elementType=mo,e.lanes=a,e;case go:return e=kt(19,r,t,n),e.elementType=go,e.lanes=a,e;case gf:return al(r,n,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pf:l=10;break e;case mf:l=9;break e;case Ic:l=11;break e;case $c:l=14;break e;case Nr:l=16,s=null;break e}throw Error(O(130,e==null?e:typeof e,""))}return t=kt(l,r,t,n),t.elementType=e,t.type=s,t.lanes=a,t}function ds(e,t,r,s){return e=kt(7,e,s,t),e.lanes=r,e}function al(e,t,r,s){return e=kt(22,e,s,t),e.elementType=gf,e.lanes=r,e.stateNode={isHidden:!1},e}function Xl(e,t,r){return e=kt(6,e,null,t),e.lanes=r,e}function Ql(e,t,r){return t=kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vx(e,t,r,s,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rl(0),this.expirationTimes=Rl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rl(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function gu(e,t,r,s,n,a,l,o,c){return e=new Vx(e,t,r,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=kt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zc(a),e}function Bx(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ms,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function lm(e){if(!e)return Hr;e=e._reactInternals;e:{if(_s(e)!==e||e.tag!==1)throw Error(O(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(O(171))}if(e.tag===1){var r=e.type;if(ct(r))return lp(e,r,t)}return t}function om(e,t,r,s,n,a,l,o,c){return e=gu(r,s,!0,e,n,a,l,o,c),e.context=lm(null),r=e.current,s=Ze(),n=zr(r),a=dr(s,n),a.callback=t??null,Mr(r,a,n),e.current.lanes=n,ki(e,n,s),ut(e,s),e}function ll(e,t,r,s){var n=t.current,a=Ze(),l=zr(n);return r=lm(r),t.context===null?t.context=r:t.pendingContext=r,t=dr(a,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Mr(n,t,l),e!==null&&(zt(e,n,l,a),ua(e,n,l)),l}function za(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function xu(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function qx(){return null}var cm=typeof reportError=="function"?reportError:function(e){console.error(e)};function yu(e){this._internalRoot=e}ol.prototype.render=yu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));ll(e,t,null,null)};ol.prototype.unmount=yu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xs(function(){ll(null,e,null,null)}),t[pr]=null}};function ol(e){this._internalRoot=e}ol.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ff();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Er.length&&t!==0&&t<Er[r].priority;r++);Er.splice(r,0,e),r===0&&Vf(e)}};function vu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function cl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function eh(){}function Wx(e,t,r,s,n){if(n){if(typeof s=="function"){var a=s;s=function(){var u=za(l);a.call(u)}}var l=om(t,s,e,0,null,!1,!1,"",eh);return e._reactRootContainer=l,e[pr]=l.current,ii(e.nodeType===8?e.parentNode:e),xs(),l}for(;n=e.lastChild;)e.removeChild(n);if(typeof s=="function"){var o=s;s=function(){var u=za(c);o.call(u)}}var c=gu(e,0,!1,null,null,!1,!1,"",eh);return e._reactRootContainer=c,e[pr]=c.current,ii(e.nodeType===8?e.parentNode:e),xs(function(){ll(t,c,r,s)}),c}function ul(e,t,r,s,n){var a=r._reactRootContainer;if(a){var l=a;if(typeof n=="function"){var o=n;n=function(){var c=za(l);o.call(c)}}ll(t,l,e,n)}else l=Wx(r,t,e,n,s);return za(l)}Uf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=$n(t.pendingLanes);r!==0&&(Uc(t,r|1),ut(t,_e()),!(ee&6)&&(pn=_e()+500,Jr()))}break;case 13:xs(function(){var s=mr(e,1);if(s!==null){var n=Ze();zt(s,e,1,n)}}),xu(e,1)}};Mc=function(e){if(e.tag===13){var t=mr(e,134217728);if(t!==null){var r=Ze();zt(t,e,134217728,r)}xu(e,134217728)}};Mf=function(e){if(e.tag===13){var t=zr(e),r=mr(e,t);if(r!==null){var s=Ze();zt(r,e,t,s)}xu(e,t)}};Ff=function(){return se};zf=function(e,t){var r=se;try{return se=e,t()}finally{se=r}};So=function(e,t,r){switch(t){case"input":if(vo(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var n=el(s);if(!n)throw Error(O(90));yf(s),vo(s,n)}}}break;case"textarea":wf(e,r);break;case"select":t=r.value,t!=null&&Ys(e,!!r.multiple,t,!1)}};Ef=hu;Cf=xs;var Hx={usingClientEntryPoint:!1,Events:[Ei,qs,el,kf,Sf,hu]},Pn={findFiberByHostInstance:is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kx={bundleType:Pn.bundleType,version:Pn.version,rendererPackageName:Pn.rendererPackageName,rendererConfig:Pn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Rf(e),e===null?null:e.stateNode},findFiberByHostInstance:Pn.findFiberByHostInstance||qx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yi.isDisabled&&Yi.supportsFiber)try{Xa=Yi.inject(Kx),Zt=Yi}catch{}}vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hx;vt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vu(t))throw Error(O(200));return Bx(e,t,null,r)};vt.createRoot=function(e,t){if(!vu(e))throw Error(O(299));var r=!1,s="",n=cm;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=gu(e,1,!1,null,null,r,!1,s,n),e[pr]=t.current,ii(e.nodeType===8?e.parentNode:e),new yu(t)};vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=Rf(t),e=e===null?null:e.stateNode,e};vt.flushSync=function(e){return xs(e)};vt.hydrate=function(e,t,r){if(!cl(t))throw Error(O(200));return ul(null,e,t,!0,r)};vt.hydrateRoot=function(e,t,r){if(!vu(e))throw Error(O(405));var s=r!=null&&r.hydratedSources||null,n=!1,a="",l=cm;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=om(t,null,e,1,r??null,n,!1,a,l),e[pr]=t.current,ii(e),s)for(e=0;e<s.length;e++)r=s[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new ol(t)};vt.render=function(e,t,r){if(!cl(t))throw Error(O(200));return ul(null,e,t,!1,r)};vt.unmountComponentAtNode=function(e){if(!cl(e))throw Error(O(40));return e._reactRootContainer?(xs(function(){ul(null,null,e,!1,function(){e._reactRootContainer=null,e[pr]=null})}),!0):!1};vt.unstable_batchedUpdates=hu;vt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!cl(r))throw Error(O(200));if(e==null||e._reactInternals===void 0)throw Error(O(38));return ul(e,t,r,!1,s)};vt.version="18.3.1-next-f1338f8080-20240426";function um(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(um)}catch(e){console.error(e)}}um(),uf.exports=vt;var Gx=uf.exports,th=Gx;ho.createRoot=th.createRoot,ho.hydrateRoot=th.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pi(){return pi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},pi.apply(this,arguments)}var Ir;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ir||(Ir={}));const rh="popstate";function Jx(e){e===void 0&&(e={});function t(s,n){let{pathname:a,search:l,hash:o}=s.location;return ic("",{pathname:a,search:l,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(s,n){return typeof n=="string"?n:Va(n)}return Qx(t,r,null,e)}function Ne(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function wu(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Xx(){return Math.random().toString(36).substr(2,8)}function sh(e,t){return{usr:e.state,key:e.key,idx:t}}function ic(e,t,r,s){return r===void 0&&(r=null),pi({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?vn(t):t,{state:r,key:t&&t.key||s||Xx()})}function Va(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function vn(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function Qx(e,t,r,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:a=!1}=s,l=n.history,o=Ir.Pop,c=null,u=f();u==null&&(u=0,l.replaceState(pi({},l.state,{idx:u}),""));function f(){return(l.state||{idx:null}).idx}function d(){o=Ir.Pop;let w=f(),y=w==null?null:w-u;u=w,c&&c({action:o,location:x.location,delta:y})}function p(w,y){o=Ir.Push;let g=ic(x.location,w,y);u=f()+1;let m=sh(g,u),N=x.createHref(g);try{l.pushState(m,"",N)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;n.location.assign(N)}a&&c&&c({action:o,location:x.location,delta:1})}function h(w,y){o=Ir.Replace;let g=ic(x.location,w,y);u=f();let m=sh(g,u),N=x.createHref(g);l.replaceState(m,"",N),a&&c&&c({action:o,location:x.location,delta:0})}function v(w){let y=n.location.origin!=="null"?n.location.origin:n.location.href,g=typeof w=="string"?w:Va(w);return g=g.replace(/ $/,"%20"),Ne(y,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,y)}let x={get action(){return o},get location(){return e(n,l)},listen(w){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(rh,d),c=w,()=>{n.removeEventListener(rh,d),c=null}},createHref(w){return t(n,w)},createURL:v,encodeLocation(w){let y=v(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:h,go(w){return l.go(w)}};return x}var nh;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(nh||(nh={}));function Yx(e,t,r){return r===void 0&&(r="/"),Zx(e,t,r)}function Zx(e,t,r,s){let n=typeof t=="string"?vn(t):t,a=bu(n.pathname||"/",r);if(a==null)return null;let l=dm(e);ey(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let u=hy(a);o=cy(l[c],u)}return o}function dm(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let n=(a,l,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};c.relativePath.startsWith("/")&&(Ne(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=Br([s,c.relativePath]),f=r.concat(c);a.children&&a.children.length>0&&(Ne(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),dm(a.children,t,f,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:ly(u,a.index),routesMeta:f})};return e.forEach((a,l)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))n(a,l);else for(let c of hm(a.path))n(a,l,c)}),t}function hm(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,n=r.endsWith("?"),a=r.replace(/\?$/,"");if(s.length===0)return n?[a,""]:[a];let l=hm(s.join("/")),o=[];return o.push(...l.map(c=>c===""?a:[a,c].join("/"))),n&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function ey(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:oy(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const ty=/^:[\w-]+$/,ry=3,sy=2,ny=1,iy=10,ay=-2,ih=e=>e==="*";function ly(e,t){let r=e.split("/"),s=r.length;return r.some(ih)&&(s+=ay),t&&(s+=sy),r.filter(n=>!ih(n)).reduce((n,a)=>n+(ty.test(a)?ry:a===""?ny:iy),s)}function oy(e,t){return e.length===t.length&&e.slice(0,-1).every((s,n)=>s===t[n])?e[e.length-1]-t[t.length-1]:0}function cy(e,t,r){let{routesMeta:s}=e,n={},a="/",l=[];for(let o=0;o<s.length;++o){let c=s[o],u=o===s.length-1,f=a==="/"?t:t.slice(a.length)||"/",d=uy({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),p=c.route;if(!d)return null;Object.assign(n,d.params),l.push({params:n,pathname:Br([a,d.pathname]),pathnameBase:xy(Br([a,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(a=Br([a,d.pathnameBase]))}return l}function uy(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=dy(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let a=n[0],l=a.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:s.reduce((u,f,d)=>{let{paramName:p,isOptional:h}=f;if(p==="*"){let x=o[d]||"";l=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const v=o[d];return h&&!v?u[p]=void 0:u[p]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:l,pattern:e}}function dy(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),wu(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),s]}function hy(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return wu(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function bu(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}const fy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,py=e=>fy.test(e);function my(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:n=""}=typeof e=="string"?vn(e):e,a;if(r)if(py(r))a=r;else{if(r.includes("//")){let l=r;r=r.replace(/\/\/+/g,"/"),wu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+r))}r.startsWith("/")?a=ah(r.substring(1),"/"):a=ah(r,t)}else a=t;return{pathname:a,search:yy(s),hash:vy(n)}}function ah(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function Yl(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gy(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function ju(e,t){let r=gy(e);return t?r.map((s,n)=>n===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function _u(e,t,r,s){s===void 0&&(s=!1);let n;typeof e=="string"?n=vn(e):(n=pi({},e),Ne(!n.pathname||!n.pathname.includes("?"),Yl("?","pathname","search",n)),Ne(!n.pathname||!n.pathname.includes("#"),Yl("#","pathname","hash",n)),Ne(!n.search||!n.search.includes("#"),Yl("#","search","hash",n)));let a=e===""||n.pathname==="",l=a?"/":n.pathname,o;if(l==null)o=r;else{let d=t.length-1;if(!s&&l.startsWith("..")){let p=l.split("/");for(;p[0]==="..";)p.shift(),d-=1;n.pathname=p.join("/")}o=d>=0?t[d]:"/"}let c=my(n,o),u=l&&l!=="/"&&l.endsWith("/"),f=(a||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const Br=e=>e.join("/").replace(/\/\/+/g,"/"),xy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),yy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,vy=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function wy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const fm=["post","put","patch","delete"];new Set(fm);const by=["get",...fm];new Set(by);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mi(){return mi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},mi.apply(this,arguments)}const Nu=b.createContext(null),jy=b.createContext(null),Xr=b.createContext(null),dl=b.createContext(null),vr=b.createContext({outlet:null,matches:[],isDataRoute:!1}),pm=b.createContext(null);function _y(e,t){let{relative:r}=t===void 0?{}:t;wn()||Ne(!1);let{basename:s,navigator:n}=b.useContext(Xr),{hash:a,pathname:l,search:o}=gm(e,{relative:r}),c=l;return s!=="/"&&(c=l==="/"?s:Br([s,l])),n.createHref({pathname:c,search:o,hash:a})}function wn(){return b.useContext(dl)!=null}function bt(){return wn()||Ne(!1),b.useContext(dl).location}function mm(e){b.useContext(Xr).static||b.useLayoutEffect(e)}function nt(){let{isDataRoute:e}=b.useContext(vr);return e?Uy():Ny()}function Ny(){wn()||Ne(!1);let e=b.useContext(Nu),{basename:t,future:r,navigator:s}=b.useContext(Xr),{matches:n}=b.useContext(vr),{pathname:a}=bt(),l=JSON.stringify(ju(n,r.v7_relativeSplatPath)),o=b.useRef(!1);return mm(()=>{o.current=!0}),b.useCallback(function(u,f){if(f===void 0&&(f={}),!o.current)return;if(typeof u=="number"){s.go(u);return}let d=_u(u,JSON.parse(l),a,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Br([t,d.pathname])),(f.replace?s.replace:s.push)(d,f.state,f)},[t,s,l,a,e])}const ky=b.createContext(null);function Sy(e){let t=b.useContext(vr).outlet;return t&&b.createElement(ky.Provider,{value:e},t)}function gm(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=b.useContext(Xr),{matches:n}=b.useContext(vr),{pathname:a}=bt(),l=JSON.stringify(ju(n,s.v7_relativeSplatPath));return b.useMemo(()=>_u(e,JSON.parse(l),a,r==="path"),[e,l,a,r])}function Ey(e,t){return Cy(e,t)}function Cy(e,t,r,s){wn()||Ne(!1);let{navigator:n}=b.useContext(Xr),{matches:a}=b.useContext(vr),l=a[a.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let u=bt(),f;if(t){var d;let w=typeof t=="string"?vn(t):t;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||Ne(!1),f=w}else f=u;let p=f.pathname||"/",h=p;if(c!=="/"){let w=c.replace(/^\//,"").split("/");h="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=Yx(e,{pathname:h}),x=Oy(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:Br([c,n.encodeLocation?n.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Br([c,n.encodeLocation?n.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,r,s);return t&&x?b.createElement(dl.Provider,{value:{location:mi({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ir.Pop}},x):x}function Ty(){let e=Ly(),t=wy(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),r?b.createElement("pre",{style:n},r):null,null)}const Py=b.createElement(Ty,null);class Ry extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?b.createElement(vr.Provider,{value:this.props.routeContext},b.createElement(pm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ay(e){let{routeContext:t,match:r,children:s}=e,n=b.useContext(Nu);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(vr.Provider,{value:t},s)}function Oy(e,t,r,s){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=s)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,o=(n=r)==null?void 0:n.errors;if(o!=null){let f=l.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);f>=0||Ne(!1),l=l.slice(0,Math.min(l.length,f+1))}let c=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let f=0;f<l.length;f++){let d=l[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:p,errors:h}=r,v=d.route.loader&&p[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||v){c=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((f,d,p)=>{let h,v=!1,x=null,w=null;r&&(h=o&&d.route.id?o[d.route.id]:void 0,x=d.route.errorElement||Py,c&&(u<0&&p===0?(My("route-fallback"),v=!0,w=null):u===p&&(v=!0,w=d.route.hydrateFallbackElement||null)));let y=t.concat(l.slice(0,p+1)),g=()=>{let m;return h?m=x:v?m=w:d.route.Component?m=b.createElement(d.route.Component,null):d.route.element?m=d.route.element:m=f,b.createElement(Ay,{match:d,routeContext:{outlet:f,matches:y,isDataRoute:r!=null},children:m})};return r&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?b.createElement(Ry,{location:r.location,revalidation:r.revalidation,component:x,error:h,children:g(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):g()},null)}var xm=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(xm||{}),ym=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ym||{});function Iy(e){let t=b.useContext(Nu);return t||Ne(!1),t}function $y(e){let t=b.useContext(jy);return t||Ne(!1),t}function Dy(e){let t=b.useContext(vr);return t||Ne(!1),t}function vm(e){let t=Dy(),r=t.matches[t.matches.length-1];return r.route.id||Ne(!1),r.route.id}function Ly(){var e;let t=b.useContext(pm),r=$y(),s=vm();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function Uy(){let{router:e}=Iy(xm.UseNavigateStable),t=vm(ym.UseNavigateStable),r=b.useRef(!1);return mm(()=>{r.current=!0}),b.useCallback(function(n,a){a===void 0&&(a={}),r.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,mi({fromRouteId:t},a)))},[e,t])}const lh={};function My(e,t,r){lh[e]||(lh[e]=!0)}function Fy(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ys(e){let{to:t,replace:r,state:s,relative:n}=e;wn()||Ne(!1);let{future:a,static:l}=b.useContext(Xr),{matches:o}=b.useContext(vr),{pathname:c}=bt(),u=nt(),f=_u(t,ju(o,a.v7_relativeSplatPath),c,n==="path"),d=JSON.stringify(f);return b.useEffect(()=>u(JSON.parse(d),{replace:r,state:s,relative:n}),[u,d,n,r,s]),null}function zy(e){return Sy(e.context)}function te(e){Ne(!1)}function Vy(e){let{basename:t="/",children:r=null,location:s,navigationType:n=Ir.Pop,navigator:a,static:l=!1,future:o}=e;wn()&&Ne(!1);let c=t.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:a,static:l,future:mi({v7_relativeSplatPath:!1},o)}),[c,o,a,l]);typeof s=="string"&&(s=vn(s));let{pathname:f="/",search:d="",hash:p="",state:h=null,key:v="default"}=s,x=b.useMemo(()=>{let w=bu(f,c);return w==null?null:{location:{pathname:w,search:d,hash:p,state:h,key:v},navigationType:n}},[c,f,d,p,h,v,n]);return x==null?null:b.createElement(Xr.Provider,{value:u},b.createElement(dl.Provider,{children:r,value:x}))}function By(e){let{children:t,location:r}=e;return Ey(ac(t),r)}new Promise(()=>{});function ac(e,t){t===void 0&&(t=[]);let r=[];return b.Children.forEach(e,(s,n)=>{if(!b.isValidElement(s))return;let a=[...t,n];if(s.type===b.Fragment){r.push.apply(r,ac(s.props.children,a));return}s.type!==te&&Ne(!1),!s.props.index||!s.props.children||Ne(!1);let l={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=ac(s.props.children,a)),r.push(l)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lc(){return lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},lc.apply(this,arguments)}function qy(e,t){if(e==null)return{};var r={},s=Object.keys(e),n,a;for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}function Wy(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Hy(e,t){return e.button===0&&(!t||t==="_self")&&!Wy(e)}function oc(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(n=>[r,n]):[[r,s]])},[]))}function Ky(e,t){let r=oc(e);return t&&t.forEach((s,n)=>{r.has(n)||t.getAll(n).forEach(a=>{r.append(n,a)})}),r}const Gy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Jy="6";try{window.__reactRouterVersion=Jy}catch{}const Xy="startTransition",oh=Lg[Xy];function Qy(e){let{basename:t,children:r,future:s,window:n}=e,a=b.useRef();a.current==null&&(a.current=Jx({window:n,v5Compat:!0}));let l=a.current,[o,c]=b.useState({action:l.action,location:l.location}),{v7_startTransition:u}=s||{},f=b.useCallback(d=>{u&&oh?oh(()=>c(d)):c(d)},[c,u]);return b.useLayoutEffect(()=>l.listen(f),[l,f]),b.useEffect(()=>Fy(s),[s]),b.createElement(Vy,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:l,future:s})}const Yy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Zy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gi=b.forwardRef(function(t,r){let{onClick:s,relative:n,reloadDocument:a,replace:l,state:o,target:c,to:u,preventScrollReset:f,viewTransition:d}=t,p=qy(t,Gy),{basename:h}=b.useContext(Xr),v,x=!1;if(typeof u=="string"&&Zy.test(u)&&(v=u,Yy))try{let m=new URL(window.location.href),N=u.startsWith("//")?new URL(m.protocol+u):new URL(u),_=bu(N.pathname,h);N.origin===m.origin&&_!=null?u=_+N.search+N.hash:x=!0}catch{}let w=_y(u,{relative:n}),y=ev(u,{replace:l,state:o,target:c,preventScrollReset:f,relative:n,viewTransition:d});function g(m){s&&s(m),m.defaultPrevented||y(m)}return b.createElement("a",lc({},p,{href:v||w,onClick:x||a?s:g,ref:r,target:c}))});var ch;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ch||(ch={}));var uh;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(uh||(uh={}));function ev(e,t){let{target:r,replace:s,state:n,preventScrollReset:a,relative:l,viewTransition:o}=t===void 0?{}:t,c=nt(),u=bt(),f=gm(e,{relative:l});return b.useCallback(d=>{if(Hy(d,r)){d.preventDefault();let p=s!==void 0?s:Va(u)===Va(f);c(e,{replace:p,state:n,preventScrollReset:a,relative:l,viewTransition:o})}},[u,c,f,s,n,r,e,a,l,o])}function tv(e){let t=b.useRef(oc(e)),r=b.useRef(!1),s=bt(),n=b.useMemo(()=>Ky(s.search,r.current?null:t.current),[s.search]),a=nt(),l=b.useCallback((o,c)=>{const u=oc(typeof o=="function"?o(n):o);r.current=!0,a("?"+u,c)},[a,n]);return[n,l]}let rv={data:""},sv=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||rv},nv=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,iv=/\/\*[^]*?\*\/|  +/g,dh=/\n+/g,Tr=(e,t)=>{let r="",s="",n="";for(let a in e){let l=e[a];a[0]=="@"?a[1]=="i"?r=a+" "+l+";":s+=a[1]=="f"?Tr(l,a):a+"{"+Tr(l,a[1]=="k"?"":t)+"}":typeof l=="object"?s+=Tr(l,t?t.replace(/([^,])+/g,o=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,o):o?o+" "+c:c)):a):l!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=Tr.p?Tr.p(a,l):a+":"+l+";")}return r+(t&&n?t+"{"+n+"}":n)+s},nr={},wm=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+wm(e[r]);return t}return e},av=(e,t,r,s,n)=>{let a=wm(e),l=nr[a]||(nr[a]=(c=>{let u=0,f=11;for(;u<c.length;)f=101*f+c.charCodeAt(u++)>>>0;return"go"+f})(a));if(!nr[l]){let c=a!==e?e:(u=>{let f,d,p=[{}];for(;f=nv.exec(u.replace(iv,""));)f[4]?p.shift():f[3]?(d=f[3].replace(dh," ").trim(),p.unshift(p[0][d]=p[0][d]||{})):p[0][f[1]]=f[2].replace(dh," ").trim();return p[0]})(e);nr[l]=Tr(n?{["@keyframes "+l]:c}:c,r?"":"."+l)}let o=r&&nr.g?nr.g:null;return r&&(nr.g=nr[l]),((c,u,f,d)=>{d?u.data=u.data.replace(d,c):u.data.indexOf(c)===-1&&(u.data=f?c+u.data:u.data+c)})(nr[l],t,s,o),l},lv=(e,t,r)=>e.reduce((s,n,a)=>{let l=t[a];if(l&&l.call){let o=l(r),c=o&&o.props&&o.props.className||/^go/.test(o)&&o;l=c?"."+c:o&&typeof o=="object"?o.props?"":Tr(o,""):o===!1?"":o}return s+n+(l??"")},"");function hl(e){let t=this||{},r=e.call?e(t.p):e;return av(r.unshift?r.raw?lv(r,[].slice.call(arguments,1),t.p):r.reduce((s,n)=>Object.assign(s,n&&n.call?n(t.p):n),{}):r,sv(t.target),t.g,t.o,t.k)}let bm,cc,uc;hl.bind({g:1});let xr=hl.bind({k:1});function ov(e,t,r,s){Tr.p=t,bm=e,cc=r,uc=s}function Qr(e,t){let r=this||{};return function(){let s=arguments;function n(a,l){let o=Object.assign({},a),c=o.className||n.className;r.p=Object.assign({theme:cc&&cc()},o),r.o=/ *go\d+/.test(c),o.className=hl.apply(r,s)+(c?" "+c:"");let u=e;return e[0]&&(u=o.as||e,delete o.as),uc&&u[0]&&uc(o),bm(u,o)}return n}}var cv=e=>typeof e=="function",Ba=(e,t)=>cv(e)?e(t):e,uv=(()=>{let e=0;return()=>(++e).toString()})(),jm=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),dv=20,ku="default",_m=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:s}=t;return _m(e,{type:e.toasts.find(l=>l.id===s.id)?1:0,toast:s});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map(l=>l.id===n||n===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+a}))}}},xa=[],Nm={toasts:[],pausedAt:void 0,settings:{toastLimit:dv}},Qt={},km=(e,t=ku)=>{Qt[t]=_m(Qt[t]||Nm,e),xa.forEach(([r,s])=>{r===t&&s(Qt[t])})},Sm=e=>Object.keys(Qt).forEach(t=>km(e,t)),hv=e=>Object.keys(Qt).find(t=>Qt[t].toasts.some(r=>r.id===e)),fl=(e=ku)=>t=>{km(t,e)},fv={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},pv=(e={},t=ku)=>{let[r,s]=b.useState(Qt[t]||Nm),n=b.useRef(Qt[t]);b.useEffect(()=>(n.current!==Qt[t]&&s(Qt[t]),xa.push([t,s]),()=>{let l=xa.findIndex(([o])=>o===t);l>-1&&xa.splice(l,1)}),[t]);let a=r.toasts.map(l=>{var o,c,u;return{...e,...e[l.type],...l,removeDelay:l.removeDelay||((o=e[l.type])==null?void 0:o.removeDelay)||(e==null?void 0:e.removeDelay),duration:l.duration||((c=e[l.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||fv[l.type],style:{...e.style,...(u=e[l.type])==null?void 0:u.style,...l.style}}});return{...r,toasts:a}},mv=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||uv()}),Ti=e=>(t,r)=>{let s=mv(t,e,r);return fl(s.toasterId||hv(s.id))({type:2,toast:s}),s.id},Ae=(e,t)=>Ti("blank")(e,t);Ae.error=Ti("error");Ae.success=Ti("success");Ae.loading=Ti("loading");Ae.custom=Ti("custom");Ae.dismiss=(e,t)=>{let r={type:3,toastId:e};t?fl(t)(r):Sm(r)};Ae.dismissAll=e=>Ae.dismiss(void 0,e);Ae.remove=(e,t)=>{let r={type:4,toastId:e};t?fl(t)(r):Sm(r)};Ae.removeAll=e=>Ae.remove(void 0,e);Ae.promise=(e,t,r)=>{let s=Ae.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(n=>{let a=t.success?Ba(t.success,n):void 0;return a?Ae.success(a,{id:s,...r,...r==null?void 0:r.success}):Ae.dismiss(s),n}).catch(n=>{let a=t.error?Ba(t.error,n):void 0;a?Ae.error(a,{id:s,...r,...r==null?void 0:r.error}):Ae.dismiss(s)}),e};var gv=1e3,xv=(e,t="default")=>{let{toasts:r,pausedAt:s}=pv(e,t),n=b.useRef(new Map).current,a=b.useCallback((d,p=gv)=>{if(n.has(d))return;let h=setTimeout(()=>{n.delete(d),l({type:4,toastId:d})},p);n.set(d,h)},[]);b.useEffect(()=>{if(s)return;let d=Date.now(),p=r.map(h=>{if(h.duration===1/0)return;let v=(h.duration||0)+h.pauseDuration-(d-h.createdAt);if(v<0){h.visible&&Ae.dismiss(h.id);return}return setTimeout(()=>Ae.dismiss(h.id,t),v)});return()=>{p.forEach(h=>h&&clearTimeout(h))}},[r,s,t]);let l=b.useCallback(fl(t),[t]),o=b.useCallback(()=>{l({type:5,time:Date.now()})},[l]),c=b.useCallback((d,p)=>{l({type:1,toast:{id:d,height:p}})},[l]),u=b.useCallback(()=>{s&&l({type:6,time:Date.now()})},[s,l]),f=b.useCallback((d,p)=>{let{reverseOrder:h=!1,gutter:v=8,defaultPosition:x}=p||{},w=r.filter(m=>(m.position||x)===(d.position||x)&&m.height),y=w.findIndex(m=>m.id===d.id),g=w.filter((m,N)=>N<y&&m.visible).length;return w.filter(m=>m.visible).slice(...h?[g+1]:[0,g]).reduce((m,N)=>m+(N.height||0)+v,0)},[r]);return b.useEffect(()=>{r.forEach(d=>{if(d.dismissed)a(d.id,d.removeDelay);else{let p=n.get(d.id);p&&(clearTimeout(p),n.delete(d.id))}})},[r,a]),{toasts:r,handlers:{updateHeight:c,startPause:o,endPause:u,calculateOffset:f}}},yv=xr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,vv=xr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,wv=xr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,bv=Qr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${yv} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${vv} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${wv} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,jv=xr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,_v=Qr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${jv} 1s linear infinite;
`,Nv=xr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,kv=xr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Sv=Qr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Nv} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${kv} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Ev=Qr("div")`
  position: absolute;
`,Cv=Qr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Tv=xr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Pv=Qr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Tv} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Rv=({toast:e})=>{let{icon:t,type:r,iconTheme:s}=e;return t!==void 0?typeof t=="string"?b.createElement(Pv,null,t):t:r==="blank"?null:b.createElement(Cv,null,b.createElement(_v,{...s}),r!=="loading"&&b.createElement(Ev,null,r==="error"?b.createElement(bv,{...s}):b.createElement(Sv,{...s})))},Av=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Ov=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Iv="0%{opacity:0;} 100%{opacity:1;}",$v="0%{opacity:1;} 100%{opacity:0;}",Dv=Qr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Lv=Qr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Uv=(e,t)=>{let r=e.includes("top")?1:-1,[s,n]=jm()?[Iv,$v]:[Av(r),Ov(r)];return{animation:t?`${xr(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${xr(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Mv=b.memo(({toast:e,position:t,style:r,children:s})=>{let n=e.height?Uv(e.position||t||"top-center",e.visible):{opacity:0},a=b.createElement(Rv,{toast:e}),l=b.createElement(Lv,{...e.ariaProps},Ba(e.message,e));return b.createElement(Dv,{className:e.className,style:{...n,...r,...e.style}},typeof s=="function"?s({icon:a,message:l}):b.createElement(b.Fragment,null,a,l))});ov(b.createElement);var Fv=({id:e,className:t,style:r,onHeightUpdate:s,children:n})=>{let a=b.useCallback(l=>{if(l){let o=()=>{let c=l.getBoundingClientRect().height;s(e,c)};o(),new MutationObserver(o).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return b.createElement("div",{ref:a,className:t,style:r},n)},zv=(e,t)=>{let r=e.includes("top"),s=r?{top:0}:{bottom:0},n=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:jm()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...s,...n}},Vv=hl`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Zi=16,Bv=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:s,children:n,toasterId:a,containerStyle:l,containerClassName:o})=>{let{toasts:c,handlers:u}=xv(r,a);return b.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:Zi,left:Zi,right:Zi,bottom:Zi,pointerEvents:"none",...l},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(f=>{let d=f.position||t,p=u.calculateOffset(f,{reverseOrder:e,gutter:s,defaultPosition:t}),h=zv(d,p);return b.createElement(Fv,{id:f.id,key:f.id,onHeightUpdate:u.updateHeight,className:f.visible?Vv:"",style:h},f.type==="custom"?Ba(f.message,f):n?n(f):b.createElement(Mv,{toast:f,position:d}))}))},Rn=Ae;function pl(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r}function qv(e,t,r,s){function n(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(f){try{u(s.next(f))}catch(d){l(d)}}function c(f){try{u(s.throw(f))}catch(d){l(d)}}function u(f){f.done?a(f.value):n(f.value).then(o,c)}u((s=s.apply(e,t||[])).next())})}const Wv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Su extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class Hv extends Su{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class hh extends Su{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class fh extends Su{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var dc;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(dc||(dc={}));class Kv{constructor(t,{headers:r={},customFetch:s,region:n=dc.Any}={}){this.url=t,this.headers=r,this.region=n,this.fetch=Wv(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return qv(this,arguments,void 0,function*(r,s={}){var n;let a,l;try{const{headers:o,method:c,body:u,signal:f,timeout:d}=s;let p={},{region:h}=s;h||(h=this.region);const v=new URL(`${this.url}/${r}`);h&&h!=="any"&&(p["x-region"]=h,v.searchParams.set("forceFunctionRegion",h));let x;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",x=u):typeof u=="string"?(p["Content-Type"]="text/plain",x=u):typeof FormData<"u"&&u instanceof FormData?x=u:(p["Content-Type"]="application/json",x=JSON.stringify(u)):x=u;let w=f;d&&(l=new AbortController,a=setTimeout(()=>l.abort(),d),f?(w=l.signal,f.addEventListener("abort",()=>l.abort())):w=l.signal);const y=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),o),body:x,signal:w}).catch(_=>{throw new Hv(_)}),g=y.headers.get("x-relay-error");if(g&&g==="true")throw new hh(y);if(!y.ok)throw new fh(y);let m=((n=y.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),N;return m==="application/json"?N=yield y.json():m==="application/octet-stream"||m==="application/pdf"?N=yield y.blob():m==="text/event-stream"?N=y:m==="multipart/form-data"?N=yield y.formData():N=yield y.text(),{data:N,error:null,response:y}}catch(o){return{data:null,error:o,response:o instanceof fh||o instanceof hh?o.context:void 0}}finally{a&&clearTimeout(a)}})}}var Gv=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Jv=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let l=null,o=null,c=null,u=a.status,f=a.statusText;if(a.ok){var d,p;if(r.method!=="HEAD"){var h;const y=await a.text();y===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((h=r.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?o=y:o=JSON.parse(y))}const x=(d=r.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),w=(p=a.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");x&&w&&w.length>1&&(c=parseInt(w[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(o)&&(o.length>1?(l={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,c=null,u=406,f="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var v;const x=await a.text();try{l=JSON.parse(x),Array.isArray(l)&&a.status===404&&(o=[],l=null,u=200,f="OK")}catch{a.status===404&&x===""?(u=204,f="No Content"):l={message:x}}if(l&&r.isMaybeSingle&&(!(l==null||(v=l.details)===null||v===void 0)&&v.includes("0 rows"))&&(l=null,u=200,f="OK"),l&&r.shouldThrowOnError)throw new Gv(l)}return{error:l,data:o,count:c,status:u,statusText:f}});return this.shouldThrowOnError||(n=n.catch(a=>{var l;let o="";const c=a==null?void 0:a.cause;if(c){var u,f,d,p;const v=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",x=(f=c==null?void 0:c.code)!==null&&f!==void 0?f:"";o=`${(d=a==null?void 0:a.name)!==null&&d!==void 0?d:"FetchError"}: ${a==null?void 0:a.message}`,o+=`

Caused by: ${(p=c==null?void 0:c.name)!==null&&p!==void 0?p:"Error"}: ${v}`,x&&(o+=` (${x})`),c!=null&&c.stack&&(o+=`
${c.stack}`)}else{var h;o=(h=a==null?void 0:a.stack)!==null&&h!==void 0?h:""}return{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}},Xv=class extends Jv{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:n=s}={}){const a=n?`${n}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const n=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:n=!1,format:a="text"}={}){var l;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,n?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${c}"; options=${o};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const ph=new RegExp("[,()]");var $s=class extends Xv{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&ph.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&ph.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let n="";s==="plain"?n="pl":s==="phrase"?n="ph":s==="websearch"&&(n="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${n}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},Qv=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}select(e,t){const{head:r=!1,count:s}=t??{},n=r?"HEAD":"GET";let a=!1;const l=(e??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",l),s&&this.headers.append("Prefer",`count=${s}`),new $s({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;const n="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,o)=>l.concat(Object.keys(o)),[]);if(a.length>0){const l=[...new Set(a)].map(o=>`"${o}"`);this.url.searchParams.set("columns",l.join(","))}}return new $s({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:n=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(o.length>0){const c=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new $s({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var r;const s="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new $s({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new $s({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Yv=class Em{constructor(t,{headers:r={},schema:s,fetch:n}={}){this.url=t,this.headers=new Headers(r),this.schemaName=s,this.fetch=n}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Qv(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Em(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:n=!1,count:a}={}){var l;let o;const c=new URL(`${this.url}/rpc/${t}`);let u;s||n?(o=s?"HEAD":"GET",Object.entries(r).filter(([d,p])=>p!==void 0).map(([d,p])=>[d,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([d,p])=>{c.searchParams.append(d,p)})):(o="POST",u=r);const f=new Headers(this.headers);return a&&f.set("Prefer",`count=${a}`),new $s({method:o,url:c,headers:f,schema:this.schemaName,body:u,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class Zv{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,n=parseInt(s.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const ew="2.89.0",tw=`realtime-js/${ew}`,Cm="1.0.0",rw="2.0.0",mh=Cm,hc=1e4,sw=1e3,nw=100;var Sr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Sr||(Sr={}));var Pe;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Pe||(Pe={}));var $t;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})($t||($t={}));var fc;(function(e){e.websocket="websocket"})(fc||(fc={}));var ss;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ss||(ss={}));class iw{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,s;const n=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(t){var r,s;const n=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},l=new TextEncoder().encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(t,r,s){var n,a;const l=t.topic,o=(n=t.ref)!==null&&n!==void 0?n:"",c=(a=t.join_ref)!==null&&a!==void 0?a:"",u=t.payload.event,f=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(f).length===0?"":JSON.stringify(f);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+l.length+u.length+d.length,h=new ArrayBuffer(this.HEADER_LENGTH+p);let v=new DataView(h),x=0;v.setUint8(x++,this.KINDS.userBroadcastPush),v.setUint8(x++,c.length),v.setUint8(x++,o.length),v.setUint8(x++,l.length),v.setUint8(x++,u.length),v.setUint8(x++,d.length),v.setUint8(x++,r),Array.from(c,y=>v.setUint8(x++,y.charCodeAt(0))),Array.from(o,y=>v.setUint8(x++,y.charCodeAt(0))),Array.from(l,y=>v.setUint8(x++,y.charCodeAt(0))),Array.from(u,y=>v.setUint8(x++,y.charCodeAt(0))),Array.from(d,y=>v.setUint8(x++,y.charCodeAt(0)));var w=new Uint8Array(h.byteLength+s.byteLength);return w.set(new Uint8Array(h),0),w.set(new Uint8Array(s),h.byteLength),w.buffer}decode(t,r){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return r(s)}if(typeof t=="string"){const s=JSON.parse(t),[n,a,l,o,c]=s;return r({join_ref:n,ref:a,topic:l,event:o,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),s=r.getUint8(0),n=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,n)}}_decodeUserBroadcast(t,r,s){const n=r.getUint8(1),a=r.getUint8(2),l=r.getUint8(3),o=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=s.decode(t.slice(c,c+n));c=c+n;const f=s.decode(t.slice(c,c+a));c=c+a;const d=s.decode(t.slice(c,c+l));c=c+l;const p=t.slice(c,t.byteLength),h=o===this.JSON_ENCODING?JSON.parse(s.decode(p)):p,v={type:this.BROADCAST_EVENT,event:f,payload:h};return l>0&&(v.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([s])=>r.includes(s)))}}class Tm{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ie;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ie||(ie={}));const gh=(e,t,r={})=>{var s;const n=(s=r.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((a,l)=>(a[l]=aw(l,e,t,n),a),{}):{}},aw=(e,t,r,s)=>{const n=t.find(o=>o.name===e),a=n==null?void 0:n.type,l=r[e];return a&&!s.includes(a)?Pm(a,l):pc(l)},Pm=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return uw(t,r)}switch(e){case ie.bool:return lw(t);case ie.float4:case ie.float8:case ie.int2:case ie.int4:case ie.int8:case ie.numeric:case ie.oid:return ow(t);case ie.json:case ie.jsonb:return cw(t);case ie.timestamp:return dw(t);case ie.abstime:case ie.date:case ie.daterange:case ie.int4range:case ie.int8range:case ie.money:case ie.reltime:case ie.text:case ie.time:case ie.timestamptz:case ie.timetz:case ie.tsrange:case ie.tstzrange:return pc(t);default:return pc(t)}},pc=e=>e,lw=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ow=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},cw=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},uw=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let a;const l=e.slice(1,r);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(o=>Pm(t,o))}return e},dw=e=>typeof e=="string"?e.replace(" ","T"):e,Rm=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Zl{constructor(t,r,s={},n=hc){this.channel=t,this.event=r,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var xh;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(xh||(xh={}));class Kn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Kn.syncState(this.state,n,a,l),this.pendingDiffs.forEach(c=>{this.state=Kn.syncDiff(this.state,c,a,l)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},n=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Kn.syncDiff(this.state,n,a,l),o())}),this.onJoin((n,a,l)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:a,newPresences:l})}),this.onLeave((n,a,l)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,n){const a=this.cloneDeep(t),l=this.transformState(r),o={},c={};return this.map(a,(u,f)=>{l[u]||(c[u]=f)}),this.map(l,(u,f)=>{const d=a[u];if(d){const p=f.map(w=>w.presence_ref),h=d.map(w=>w.presence_ref),v=f.filter(w=>h.indexOf(w.presence_ref)<0),x=d.filter(w=>p.indexOf(w.presence_ref)<0);v.length>0&&(o[u]=v),x.length>0&&(c[u]=x)}else o[u]=f}),this.syncDiff(a,{joins:o,leaves:c},s,n)}static syncDiff(t,r,s,n){const{joins:a,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(a,(o,c)=>{var u;const f=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(c),f.length>0){const d=t[o].map(h=>h.presence_ref),p=f.filter(h=>d.indexOf(h.presence_ref)<0);t[o].unshift(...p)}s(o,f,c)}),this.map(l,(o,c)=>{let u=t[o];if(!u)return;const f=c.map(d=>d.presence_ref);u=u.filter(d=>f.indexOf(d.presence_ref)<0),t[o]=u,n(o,u,c),u.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const n=t[s];return"metas"in n?r[s]=n.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[s]=n,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var yh;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(yh||(yh={}));var Gn;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Gn||(Gn={}));var lr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(lr||(lr={}));class Qs{constructor(t,r={config:{}},s){var n,a;if(this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Pe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Zl(this,$t.join,this.params,this.timeout),this.rejoinTimer=new Tm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pe.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Pe.errored,this.rejoinTimer.scheduleTimeout())}),this._on($t.reply,{},(l,o)=>{this._trigger(this._replyEventName(o),l)}),this.presence=new Kn(this),this.broadcastEndpointURL=Rm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var s,n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Pe.closed){const{config:{broadcast:l,presence:o,private:c}}=this.params,u=(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(h=>h.filter))!==null&&n!==void 0?n:[],f=!!this.bindings[Gn.PRESENCE]&&this.bindings[Gn.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,d={},p={broadcast:l,presence:Object.assign(Object.assign({},o),{enabled:f}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(lr.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(lr.CLOSED)),this.updateJoinPayload(Object.assign({config:p},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:h})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),h===void 0){t==null||t(lr.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,w=(v=x==null?void 0:x.length)!==null&&v!==void 0?v:0,y=[];for(let g=0;g<w;g++){const m=x[g],{filter:{event:N,schema:_,table:j,filter:E}}=m,C=h&&h[g];if(C&&C.event===N&&Qs.isFilterValueEqual(C.schema,_)&&Qs.isFilterValueEqual(C.table,j)&&Qs.isFilterValueEqual(C.filter,E))y.push(Object.assign(Object.assign({},m),{id:C.id}));else{this.unsubscribe(),this.state=Pe.errored,t==null||t(lr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(lr.SUBSCRIBED);return}}).receive("error",h=>{this.state=Pe.errored,t==null||t(lr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(lr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this.state===Pe.joined&&t===Gn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,s)}async httpSend(t,r,s={}){var n;if(r==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const u=await o.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var s,n;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=t,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,o,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Pe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($t.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new Zl(this,$t.leave,{},t),s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Pe.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const n=new AbortController,a=setTimeout(()=>n.abort(),s),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(a),l}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Zl(this,t,r,s);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>nw){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var n,a;const l=t.toLocaleLowerCase(),{close:o,error:c,leave:u,join:f}=$t;if(s&&[o,c,u,f].indexOf(l)>=0&&s!==this._joinRef())return;let p=this._onMessage(l,r,s);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(h=>{var v,x,w;return((v=h.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(x=h.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===l}).map(h=>h.callback(p,s)):(a=this.bindings[l])===null||a===void 0||a.filter(h=>{var v,x,w,y,g,m;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in h){const N=h.id,_=(v=h.filter)===null||v===void 0?void 0:v.event;return N&&((x=r.ids)===null||x===void 0?void 0:x.includes(N))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const N=(g=(y=h==null?void 0:h.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return N==="*"||N===((m=r==null?void 0:r.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===l}).map(h=>{if(typeof p=="object"&&"ids"in p){const v=p.data,{schema:x,table:w,commit_timestamp:y,type:g,errors:m}=v;p=Object.assign(Object.assign({},{schema:x,table:w,commit_timestamp:y,eventType:g,new:{},old:{},errors:m}),this._getPayloadRecords(v))}h.callback(p,s)})}_isClosed(){return this.state===Pe.closed}_isJoined(){return this.state===Pe.joined}_isJoining(){return this.state===Pe.joining}_isLeaving(){return this.state===Pe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const n=t.toLocaleLowerCase(),a={type:n,filter:r,callback:s};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(n=>{var a;return!(((a=n.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&Qs.isEqual(n.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on($t.close,{},t)}_onError(t){this._on($t.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=gh(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=gh(t.columns,t.old_record)),r}}const eo=()=>{},ea={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},hw=[1e3,2e3,5e3,1e4],fw=1e4,pw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class mw{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hc,this.transport=null,this.heartbeatIntervalMs=ea.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=eo,this.ref=0,this.reconnectTimer=null,this.vsn=mh,this.logger=eo,this.conn=null,this.sendBuffer=[],this.serializer=new iw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>n?(...a)=>n(...a):(...a)=>fetch(...a),!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${fc.websocket}`,this.httpEndpoint=Rm(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Zv.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Sr.connecting:return ss.Connecting;case Sr.open:return ss.Open;case Sr.closing:return ss.Closing;default:return ss.Closed}}isConnected(){return this.connectionState()===ss.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const s=`realtime:${t}`,n=this.getChannels().find(a=>a.topic===s);if(n)return n;{const a=new Qs(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:s,payload:n,ref:a}=t,l=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${s} (${a})`,n),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(sw,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ea.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:n,payload:a,ref:l}=r,o=l?`(${l})`:"",c=a.status||"";this.log("receive",`${c} ${s} ${n} ${o}`.trim(),a),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(n,a,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Sr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Sr.open||this.conn.readyState===Sr.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger($t.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${t}${s}${n}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([pw],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,s=!1;if(t)r=t,s=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(n){this.log("error","Error fetching access token from callback",n),r=this.accessTokenValue}else r=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:tw};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push($t.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(n){this.log("error",`error in ${t} callback`,n)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Tm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ea.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,n,a,l,o,c,u,f,d,p,h;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:hc,this.heartbeatIntervalMs=(n=t==null?void 0:t.heartbeatIntervalMs)!==null&&n!==void 0?n:ea.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:eo,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:mh,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:v=>hw[v-1]||fw,this.vsn){case Cm:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:(v,x)=>x(JSON.stringify(v)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:(v,x)=>x(JSON.parse(v));break;case rw:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var xi=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function gw(e,t,r){const s=new URL(t,e);if(r)for(const[n,a]of Object.entries(r))a!==void 0&&s.searchParams.set(n,a);return s.toString()}async function xw(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function yw(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:n,body:a,headers:l}){const o=gw(e.baseUrl,s,n),c=await xw(e.auth),u=await t(o,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...c,...l},body:a?JSON.stringify(a):void 0}),f=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),p=d&&f?JSON.parse(f):f;if(!u.ok){const h=d?p:void 0,v=h==null?void 0:h.error;throw new xi((v==null?void 0:v.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:h})}return{status:u.status,headers:u.headers,data:p}}}}function ta(e){return e.join("")}var vw=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:ta(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ta(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ta(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ta(e.namespace)}`}),!0}catch(t){if(t instanceof xi&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof xi&&r.status===409)return;throw r}}};function Cs(e){return e.join("")}var ww=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Cs(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Cs(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Cs(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Cs(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Cs(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Cs(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof xi&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof xi&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},bw=class{constructor(e){var s;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=yw({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(s=e.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new vw(this.client,t),this.tableOps=new ww(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},ml=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function fe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var jw=class extends ml{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},mc=class extends ml{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Eu=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),_w=()=>Response,gc=e=>{if(Array.isArray(e))return e.map(r=>gc(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const n=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[n]=gc(s)}),t},Nw=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},kw=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function yi(e){"@babel/helpers - typeof";return yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yi(e)}function Sw(e,t){if(yi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(yi(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ew(e){var t=Sw(e,"string");return yi(t)=="symbol"?t:t+""}function Cw(e,t,r){return(t=Ew(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vh(Object(r),!0).forEach(function(s){Cw(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vh(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}const to=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Tw=async(e,t,r)=>{e instanceof await _w()&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const n=e.status||500,a=(s==null?void 0:s.statusCode)||n+"";t(new jw(to(s),n,a))}).catch(s=>{t(new mc(to(s),s))}):t(new mc(to(e),e))},Pw=(e,t,r,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!s?n:(Nw(s)?(n.headers=K({"Content-Type":"application/json"},t==null?void 0:t.headers),n.body=JSON.stringify(s)):n.body=s,t!=null&&t.duplex&&(n.duplex=t.duplex),K(K({},n),r))};async function Pi(e,t,r,s,n,a){return new Promise((l,o)=>{e(r,Pw(t,s,n,a)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>Tw(c,o,s))})}async function vi(e,t,r,s){return Pi(e,"GET",t,r,s)}async function Ot(e,t,r,s,n){return Pi(e,"POST",t,s,n,r)}async function xc(e,t,r,s,n){return Pi(e,"PUT",t,s,n,r)}async function Rw(e,t,r,s){return Pi(e,"HEAD",t,K(K({},r),{},{noResolveJson:!0}),s)}async function Cu(e,t,r,s,n){return Pi(e,"DELETE",t,s,n,r)}var Aw=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(fe(t))return{data:null,error:t};throw t}}};let Am;Am=Symbol.toStringTag;var Ow=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Am]="BlobDownloadBuilder",this.promise=null}asStream(){return new Aw(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(fe(t))return{data:null,error:t};throw t}}};const Iw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var $w=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Eu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,s){var n=this;try{let a;const l=K(K({},wh),s);let o=K(K({},n.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",n.encodeMetadata(c)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",l.cacheControl),c&&!a.has("metadata")&&a.append("metadata",n.encodeMetadata(c))):(a=r,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=n.toBase64(n.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!l.duplex&&(l.duplex="half")),s!=null&&s.headers&&(o=K(K({},o),s.headers));const u=n._removeEmptyFolders(t),f=n._getFinalPath(u),d=await(e=="PUT"?xc:Ot)(n.fetch,`${n.url}/object/${f}`,a,K({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(fe(a))return{data:null,error:a};throw a}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,s){var n=this;const a=n._removeEmptyFolders(e),l=n._getFinalPath(a),o=new URL(n.url+`/object/upload/sign/${l}`);o.searchParams.set("token",t);try{let c;const u=K({upsert:wh.upsert},s),f=K(K({},n.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType),{data:{path:a,fullPath:(await xc(n.fetch,o.toString(),c,{headers:f})).Key},error:null}}catch(c){if(n.shouldThrowOnError)throw c;if(fe(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var r=this;try{let s=r._getFinalPath(e);const n=K({},r.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const a=await Ot(r.fetch,`${r.url}/object/upload/sign/${s}`,{},{headers:n}),l=new URL(r.url+a.url),o=l.searchParams.get("token");if(!o)throw new ml("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:o},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(fe(s))return{data:null,error:s};throw s}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var s=this;try{return{data:await Ot(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:s.headers}),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(fe(n))return{data:null,error:n};throw n}}async copy(e,t,r){var s=this;try{return{data:{path:(await Ot(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:s.headers})).Key},error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(fe(n))return{data:null,error:n};throw n}}async createSignedUrl(e,t,r){var s=this;try{let n=s._getFinalPath(e),a=await Ot(s.fetch,`${s.url}/object/sign/${n}`,K({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:s.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${s.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(fe(n))return{data:null,error:n};throw n}}async createSignedUrls(e,t,r){var s=this;try{const n=await Ot(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:t,paths:e},{headers:s.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(l=>K(K({},l),{},{signedUrl:l.signedURL?encodeURI(`${s.url}${l.signedURL}${a}`):null})),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(fe(n))return{data:null,error:n};throw n}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),n=s?`?${s}`:"",a=this._getFinalPath(e),l=()=>vi(this.fetch,`${this.url}/${r}/${a}${n}`,{headers:this.headers,noResolveJson:!0});return new Ow(l,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:gc(await vi(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(fe(s))return{data:null,error:s};throw s}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await Rw(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(fe(s)&&s instanceof mc){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],n=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";n!==""&&s.push(n);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let o=s.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${o}`)}}}async remove(e){var t=this;try{return{data:await Cu(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fe(r))return{data:null,error:r};throw r}}async list(e,t,r){var s=this;try{const n=K(K(K({},Iw),t),{},{prefix:e||""});return{data:await Ot(s.fetch,`${s.url}/object/list/${s.bucketId}`,n,{headers:s.headers},r),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(fe(n))return{data:null,error:n};throw n}}async listV2(e,t){var r=this;try{const s=K({},e);return{data:await Ot(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,s,{headers:r.headers},t),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(fe(s))return{data:null,error:s};throw s}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const Om="2.89.0",Im={"X-Client-Info":`storage-js/${Om}`};var Dw=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1;const n=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase.")),this.url=n.href.replace(/\/$/,""),this.headers=K(K({},Im),t),this.fetch=Eu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await vi(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fe(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await vi(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fe(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await Ot(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(fe(s))return{data:null,error:s};throw s}}async updateBucket(e,t){var r=this;try{return{data:await xc(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(fe(s))return{data:null,error:s};throw s}}async emptyBucket(e){var t=this;try{return{data:await Ot(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fe(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Cu(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fe(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Lw=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=K(K({},Im),t),this.fetch=Eu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Ot(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fe(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const s=r.toString(),n=s?`${t.url}/bucket?${s}`:`${t.url}/bucket`;return{data:await vi(t.fetch,n,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fe(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Cu(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fe(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!kw(e))throw new ml("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new bw({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(n,a){const l=n[a];return typeof l!="function"?l:async(...o)=>{try{return{data:await l.apply(n,o),error:null}}catch(c){if(s)throw c;return{data:null,error:c}}}}})}};const Tu={"X-Client-Info":`storage-js/${Om}`,"Content-Type":"application/json"};var $m=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function ft(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var ro=class extends $m{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Uw=class extends $m{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Pu=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Mw=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},bh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Fw=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e.status||500,n=e;if(typeof n.json=="function")n.json().then(a=>{const l=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||s+"";t(new ro(bh(a),s,l))}).catch(()=>{const a=s+"";t(new ro(n.statusText||`HTTP ${s} error`,s,a))});else{const a=s+"";t(new ro(n.statusText||`HTTP ${s} error`,s,a))}}else t(new Uw(bh(e),e))},zw=(e,t,r,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return s?(Mw(s)?(n.headers=K({"Content-Type":"application/json"},t==null?void 0:t.headers),n.body=JSON.stringify(s)):n.body=s,K(K({},n),r)):n};async function Vw(e,t,r,s,n,a){return new Promise((l,o)=>{e(r,zw(t,s,n,a)).then(c=>{if(!c.ok)throw c;if(s!=null&&s.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>l(c)).catch(c=>Fw(c,o,s))})}async function pt(e,t,r,s,n){return Vw(e,"POST",t,s,n,r)}var Bw=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=K(K({},Tu),t),this.fetch=Pu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await pt(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await pt(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}}async listIndexes(e){var t=this;try{return{data:await pt(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await pt(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}}},qw=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=K(K({},Tu),t),this.fetch=Pu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await pt(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await pt(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await pt(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await pt(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await pt(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}}},Ww=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=K(K({},Tu),t),this.fetch=Pu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await pt(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await pt(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await pt(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await pt(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}}},Hw=class extends Ww{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Kw(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},Kw=class extends Bw{constructor(e,t,r,s){super(e,t,s),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,K(K({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,K(K({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new Gw(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Gw=class extends qw{constructor(e,t,r,s,n){super(e,t,n),this.vectorBucketName=r,this.indexName=s}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,K(K({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,K(K({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,K(K({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,K(K({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,K(K({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Jw=class extends Dw{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new $w(this.url,this.headers,e,this.fetch)}get vectors(){return new Hw(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Lw(this.url+"/iceberg",this.headers,this.fetch)}};const Dm="2.89.0",Ds=30*1e3,yc=3,so=yc*Ds,Xw="http://localhost:9999",Qw="supabase.auth.token",Yw={"X-Client-Info":`gotrue-js/${Dm}`},vc="X-Supabase-Api-Version",Lm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Zw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,eb=10*60*1e3;class wi extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function z(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class tb extends wi{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function rb(e){return z(e)&&e.name==="AuthApiError"}class ns extends wi{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class wr extends wi{constructor(t,r,s,n){super(t,s,n),this.name=r,this.status=s}}class dt extends wr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function sb(e){return z(e)&&e.name==="AuthSessionMissingError"}class Ts extends wr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ra extends wr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class sa extends wr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function nb(e){return z(e)&&e.name==="AuthImplicitGrantRedirectError"}class jh extends wr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ib extends wr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class wc extends wr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function no(e){return z(e)&&e.name==="AuthRetryableFetchError"}class _h extends wr{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class bc extends wr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const qa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Nh=` 	
\r=`.split(""),ab=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Nh.length;t+=1)e[Nh[t].charCodeAt(0)]=-2;for(let t=0;t<qa.length;t+=1)e[qa[t].charCodeAt(0)]=t;return e})();function kh(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(qa[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(qa[s]),t.queuedBits-=6}}function Um(e,t,r){const s=ab[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Sh(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},a=l=>{cb(l,s,r)};for(let l=0;l<e.length;l+=1)Um(e.charCodeAt(l),n,a);return t.join("")}function lb(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ob(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}lb(s,t)}}function cb(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function nn(e){const t=[],r={queue:0,queuedBits:0},s=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)Um(e.charCodeAt(n),r,s);return new Uint8Array(t)}function ub(e){const t=[];return ob(e,r=>t.push(r)),new Uint8Array(t)}function os(e){const t=[],r={queue:0,queuedBits:0},s=n=>{t.push(n)};return e.forEach(n=>kh(n,r,s)),kh(null,r,s),t.join("")}function db(e){return Math.round(Date.now()/1e3)+e}function hb(){return Symbol("auth-callback")}const ze=()=>typeof window<"u"&&typeof document<"u",Yr={tested:!1,writable:!1},Mm=()=>{if(!ze())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yr.tested)return Yr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Yr.tested=!0,Yr.writable=!0}catch{Yr.tested=!0,Yr.writable=!1}return Yr.writable};function fb(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,a)=>{t[a]=n})}catch{}return r.searchParams.forEach((s,n)=>{t[n]=s}),t}const Fm=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),pb=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ls=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Zr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Fe=async(e,t)=>{await e.removeItem(t)};class gl{constructor(){this.promise=new gl.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}gl.promiseConstructor=Promise;function io(e){const t=e.split(".");if(t.length!==3)throw new bc("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!Zw.test(t[s]))throw new bc("JWT not in base64url format");return{header:JSON.parse(Sh(t[0])),payload:JSON.parse(Sh(t[1])),signature:nn(t[2]),raw:{header:t[0],payload:t[1]}}}async function mb(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function gb(e,t){return new Promise((s,n)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await e(a);if(!t(a,null,l)){s(l);return}}catch(l){if(!t(a,l)){n(l);return}}})()})}function xb(e){return("0"+e.toString(16)).substr(-2)}function yb(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let n="";for(let a=0;a<56;a++)n+=r.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(t),Array.from(t,xb).join("")}async function vb(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(s);return Array.from(n).map(a=>String.fromCharCode(a)).join("")}async function wb(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await vb(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ps(e,t,r=!1){const s=yb();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await Ls(e,`${t}-code-verifier`,n);const a=await wb(s);return[a,s===a?"plain":"s256"]}const bb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function jb(e){const t=e.headers.get(vc);if(!t||!t.match(bb))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function _b(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Nb(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const kb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Rs(e){if(!kb.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ao(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Sb(e,t){return new Proxy(e,{get:(r,s,n)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,n)}return!t.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,s,n)}})}function Eh(e){return JSON.parse(JSON.stringify(e))}const rs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Eb=[502,503,504];async function Ch(e){var t;if(!pb(e))throw new wc(rs(e),0);if(Eb.includes(e.status))throw new wc(rs(e),e.status);let r;try{r=await e.json()}catch(a){throw new ns(rs(a),a)}let s;const n=jb(e);if(n&&n.getTime()>=Lm["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new _h(rs(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new dt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new _h(rs(r),e.status,r.weak_password.reasons);throw new tb(rs(r),e.status||500,s)}const Cb=(e,t,r,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};async function H(e,t,r,s){var n;const a=Object.assign({},s==null?void 0:s.headers);a[vc]||(a[vc]=Lm["2024-01-01"].name),s!=null&&s.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const l=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(l.redirect_to=s.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await Tb(e,t,r+o,{headers:a,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Tb(e,t,r,s,n,a){const l=Cb(t,s,n,a);let o;try{o=await e(r,Object.assign({},l))}catch(c){throw console.error(c),new wc(rs(c),0)}if(o.ok||await Ch(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(c){await Ch(c)}}function Rt(e){var t;let r=null;Ab(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=db(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function Th(e){const t=Rt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Pr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Pb(e){return{data:e,error:null}}function Rb(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a}=e,l=pl(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function Ph(e){return e}function Ab(e){return e.access_token&&e.refresh_token&&e.expires_in}const lo=["global","local","others"];class Ob{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=Fm(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=lo[0]){if(lo.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lo.join(", ")}`);try{return await H(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(z(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await H(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Pr})}catch(s){if(z(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=pl(t,["options"]),n=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await H(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Rb,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(z(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await H(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Pr})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,n,a,l,o,c;try{const u={nextPage:null,lastPage:0,total:0},f=await H(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(a=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""},xform:Ph});if(f.error)throw f.error;const d=await f.json(),p=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,h=(c=(o=f.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=x}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(z(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Rs(t);try{return await H(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Pr})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Rs(t);try{return await H(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Pr})}catch(s){if(z(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){Rs(t);try{return await H(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Pr})}catch(s){if(z(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Rs(t.userId);try{const{data:r,error:s}=await H(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:s}}catch(r){if(z(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Rs(t.userId),Rs(t.id);try{return{data:await H(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,s,n,a,l,o,c;try{const u={nextPage:null,lastPage:0,total:0},f=await H(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(a=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""},xform:Ph});if(f.error)throw f.error;const d=await f.json(),p=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,h=(c=(o=f.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=x}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(z(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await H(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await H(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await H(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(z(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await H(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await H(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(z(r))return{data:null,error:r};throw r}}}function Rh(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const As={debug:!!(globalThis&&Mm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zm extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Ib extends zm{}async function $b(e,t,r){As.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),As.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){As.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{As.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw As.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Ib(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(As.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Db(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Vm(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Lb(e){return parseInt(e,16)}function Ub(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function Mb(e){var t;const{chainId:r,domain:s,expirationTime:n,issuedAt:a=new Date,nonce:l,notBefore:o,requestId:c,resources:u,scheme:f,uri:d,version:p}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const h=Vm(e.address),v=f?`${f}://${s}`:s,x=e.statement?`${e.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${h}

${x}`;let y=`URI: ${d}
Version: ${p}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(n&&(y+=`
Expiration Time: ${n.toISOString()}`),o&&(y+=`
Not Before: ${o.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let g=`
Resources:`;for(const m of u){if(!m||typeof m!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${m}`);g+=`
- ${m}`}y+=g}return`${w}
${y}`}class Se extends Error{constructor({message:t,code:r,cause:s,name:n}){var a;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(a=n??(s instanceof Error?s.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class Wa extends Se{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function Fb({error:e,options:t}){var r,s,n;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Se({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Se({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Se({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Se({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Se({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Se({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new Se({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Se({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(Bm(l)){if(a.rp.id!==l)return new Se({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Se({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Se({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Se({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Se({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function zb({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Se({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Se({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(Bm(s)){if(r.rpId!==s)return new Se({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Se({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Se({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Se({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Vb{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Bb=new Vb;function qb(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:s}=e,n=pl(e,["challenge","user","excludeCredentials"]),a=nn(t).buffer,l=Object.assign(Object.assign({},r),{id:nn(r.id).buffer}),o=Object.assign(Object.assign({},n),{challenge:a,user:l});if(s&&s.length>0){o.excludeCredentials=new Array(s.length);for(let c=0;c<s.length;c++){const u=s[c];o.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:nn(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function Wb(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,s=pl(e,["challenge","allowCredentials"]),n=nn(t).buffer,a=Object.assign(Object.assign({},s),{challenge:n});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const o=r[l];a.allowCredentials[l]=Object.assign(Object.assign({},o),{id:nn(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return a}function Hb(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:os(new Uint8Array(e.response.attestationObject)),clientDataJSON:os(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Kb(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,s=e.getClientExtensionResults(),n=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:os(new Uint8Array(n.authenticatorData)),clientDataJSON:os(new Uint8Array(n.clientDataJSON)),signature:os(new Uint8Array(n.signature)),userHandle:n.userHandle?os(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Bm(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Ah(){var e,t;return!!(ze()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Gb(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wa("Browser returned unexpected credential type",t)}:{data:null,error:new Wa("Empty credential response",t)}}catch(t){return{data:null,error:Fb({error:t,options:e})}}}async function Jb(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wa("Browser returned unexpected credential type",t)}:{data:null,error:new Wa("Empty credential response",t)}}catch(t){return{data:null,error:zb({error:t,options:e})}}}const Xb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Qb={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ha(...e){const t=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),r=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),s={};for(const n of e)if(n)for(const a in n){const l=n[a];if(l!==void 0)if(Array.isArray(l))s[a]=l;else if(r(l))s[a]=l;else if(t(l)){const o=s[a];t(o)?s[a]=Ha(o,l):s[a]=Ha(l)}else s[a]=l}return s}function Yb(e,t){return Ha(Xb,e,t||{})}function Zb(e,t){return Ha(Qb,e,t||{})}class e1{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:s,signal:n},a){try{const{data:l,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:o};const c=n??Bb.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:u}=l.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${s}`),u.displayName||(u.displayName=u.name)}switch(l.webauthn.type){case"create":{const u=Yb(l.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:f,error:d}=await Gb({publicKey:u,signal:c});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:d}}case"request":{const u=Zb(l.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:f,error:d}=await Jb(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:u,signal:c}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:d}}}}catch(l){return z(l)?{data:null,error:l}:{data:null,error:new ns("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},a){if(!r)return{data:null,error:new wi("rpId is required for WebAuthn authentication")};try{if(!Ah())return{data:null,error:new ns("Browser does not support WebAuthn",null)};const{data:l,error:o}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:s},signal:n},{request:a});if(!l)return{data:null,error:o};const{webauthn:c}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:s,credential_response:c.credential_response}})}catch(l){return z(l)?{data:null,error:l}:{data:null,error:new ns("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},a){if(!r)return{data:null,error:new wi("rpId is required for WebAuthn registration")};try{if(!Ah())return{data:null,error:new ns("Browser does not support WebAuthn",null)};const{data:l,error:o}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(f=>{var d;return(d=f.data)===null||d===void 0?void 0:d.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:o};const{data:c,error:u}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:n},{create:a});return c?this._verify({factorId:l.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:s,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(l){return z(l)?{data:null,error:l}:{data:null,error:new ns("Unexpected error in register",l)}}}}Db();const t1={url:Xw,storageKey:Qw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Yw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Oh(e,t,r){return await r()}const Os={};class bi{get jwks(){var t,r;return(r=(t=Os[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Os[this.storageKey]=Object.assign(Object.assign({},Os[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Os[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Os[this.storageKey]=Object.assign(Object.assign({},Os[this.storageKey]),{cachedAt:t})}constructor(t){var r,s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},t1),t);if(this.storageKey=a.storageKey,this.instanceID=(r=bi.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,bi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&ze()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Ob({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Fm(a.fetch),this.lock=a.lock||Oh,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:this.persistSession&&ze()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=$b:this.lock=Oh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new e1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Mm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Rh(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Rh(this.memoryStorage)),ze()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Dm}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},s="none";if(ze()&&(r=fb(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),ze()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:a}=await this._getSessionFromURL(r,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),nb(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return z(r)?this._returnResult({error:r}):this._returnResult({error:new ns("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,n;try{const a=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:Rt}),{data:l,error:o}=a;if(o||!l)return this._returnResult({data:{user:null,session:null},error:o});const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(z(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var r,s,n;try{let a;if("email"in t){const{email:f,password:d,options:p}=t;let h=null,v=null;this.flowType==="pkce"&&([h,v]=await Ps(this.storage,this.storageKey)),a=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:f,password:d,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:h,code_challenge_method:v},xform:Rt})}else if("phone"in t){const{phone:f,password:d,options:p}=t;a=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:d,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},channel:(n=p==null?void 0:p.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Rt})}else throw new ra("You must provide either an email or phone number and a password");const{data:l,error:o}=a;if(o||!l)return await Fe(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),z(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:l,options:o}=t;r=await H(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Th})}else if("phone"in t){const{phone:a,password:l,options:o}=t;r=await H(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Th})}else throw new ra("You must provide either an email or phone number and a password");const{data:s,error:n}=r;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!s||!s.session||!s.user){const a=new Ts;return this._returnResult({data:{user:null,session:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if(z(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,s,n,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,s,n,a,l,o,c,u,f,d,p;let h,v;if("message"in t)h=t.message,v=t.signature;else{const{chain:x,wallet:w,statement:y,options:g}=t;let m;if(ze())if(typeof w=="object")m=w;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")m=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");m=w}const N=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href),_=await m.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=Vm(_[0]);let E=(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!E){const A=await m.request({method:"eth_chainId"});E=Lb(A)}const C={domain:N.host,address:j,statement:y,uri:N.href,version:"1",chainId:E,nonce:(n=g==null?void 0:g.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(l=(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(o=g==null?void 0:g.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=g==null?void 0:g.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(f=g==null?void 0:g.signInWithEthereum)===null||f===void 0?void 0:f.resources};h=Mb(C),v=await m.request({method:"personal_sign",params:[Ub(h),j]})}try{const{data:x,error:w}=await H(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:v},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Rt});if(w)throw w;if(!x||!x.session||!x.user){const y=new Ts;return this._returnResult({data:{user:null,session:null},error:y})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:w})}catch(x){if(z(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(t){var r,s,n,a,l,o,c,u,f,d,p,h;let v,x;if("message"in t)v=t.message,x=t.signature;else{const{chain:w,wallet:y,statement:g,options:m}=t;let N;if(ze())if(typeof y=="object")N=y;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))N=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=y}const _=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in N&&N.signIn){const j=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),g?{statement:g}:null));let E;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")E=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)E=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)v=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),x=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${_.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(n=(s=m==null?void 0:m.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((a=m==null?void 0:m.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((u=m==null?void 0:m.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((d=(f=m==null?void 0:m.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||d===void 0)&&d.length?["Resources",...m.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const j=await N.signMessage(new TextEncoder().encode(v),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=j}}try{const{data:w,error:y}=await H(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:os(x)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Rt});if(y)throw y;if(!w||!w.session||!w.user){const g=new Ts;return this._returnResult({data:{user:null,session:null},error:g})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:y})}catch(w){if(z(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(t){const r=await Zr(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/");try{if(!s&&this.flowType==="pkce")throw new ib;const{data:a,error:l}=await H(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Rt});if(await Fe(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!a||!a.session||!a.user){const o=new Ts;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:n??null}),error:l})}catch(a){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),z(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:r,provider:s,token:n,access_token:a,nonce:l}=t,o=await H(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Rt}),{data:c,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const f=new Ts;return this._returnResult({data:{user:null,session:null},error:f})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(z(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,s,n,a,l;try{if("email"in t){const{email:o,options:c}=t;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await Ps(this.storage,this.storageKey));const{error:d}=await H(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in t){const{phone:o,options:c}=t,{data:u,error:f}=await H(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f})}throw new ra("You must provide either an email or phone number.")}catch(o){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),z(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var r,s;try{let n,a;"options"in t&&(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:l,error:o}=await H(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:Rt});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,u=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(n){if(z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(t){var r,s,n,a,l;try{let o=null,c=null;this.flowType==="pkce"&&([o,c]=await Ps(this.storage,this.storageKey));const u=await H(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:Pb});return!((a=u.data)===null||a===void 0)&&a.url&&ze()&&!(!((l=t.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),z(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new dt;const{error:n}=await H(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(t){if(z(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:n,options:a}=t,{error:l}=await H(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:s,type:n,options:a}=t,{data:l,error:o}=await H(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o})}throw new ra("You must provide either an email or phone number and a type")}catch(r){if(z(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Zr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<so:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const l=await Zr(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=ao()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=Sb(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:n,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await H(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Pr}):await this._useSession(async r=>{var s,n,a;const{data:l,error:o}=r;if(o)throw o;return!(!((s=l.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new dt}:await H(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0,xform:Pr})})}catch(r){if(z(r))return sb(r)&&(await this._removeSession(),await Fe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:n,error:a}=s;if(a)throw a;if(!n.session)throw new dt;const l=n.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await Ps(this.storage,this.storageKey));const{data:u,error:f}=await H(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:Pr});if(f)throw f;return l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(s){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),z(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new dt;const r=Date.now()/1e3;let s=r,n=!0,a=null;const{payload:l}=io(t.access_token);if(l.exp&&(s=l.exp,n=s<=r),n){const{data:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(z(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:l,error:o}=r;if(o)throw o;t=(s=l.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new dt;const{data:n,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(z(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!ze())throw new sa("No browser detected.");if(t.error||t.error_description||t.error_code)throw new sa(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new jh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new sa("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new jh("No code detected.");const{data:g,error:m}=await this._exchangeCodeForSession(t.code);if(m)throw m;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:a,refresh_token:l,expires_in:o,expires_at:c,token_type:u}=t;if(!a||!o||!l||!u)throw new sa("No session defined in URL");const f=Math.round(Date.now()/1e3),d=parseInt(o);let p=f+d;c&&(p=parseInt(c));const h=p-f;h*1e3<=Ds&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const v=p-d;f-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,f):f-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,f);const{data:x,error:w}=await this._getUser(a);if(w)throw w;const y={provider_token:s,provider_refresh_token:n,access_token:a,expires_in:d,expires_at:p,refresh_token:l,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(s){if(z(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Zr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:n,error:a}=r;if(a)return this._returnResult({error:a});const l=(s=n.session)===null||s===void 0?void 0:s.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(rb(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await Fe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=hb(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,n;try{const{data:{session:a},error:l}=r;if(l)throw l;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await Ps(this.storage,this.storageKey,!0));try{return await H(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),z(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:s,error:n}=await this._useSession(async a=>{var l,o,c,u,f;const{data:d,error:p}=a;if(p)throw p;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await H(this.fetch,"GET",h,{headers:this.headers,jwt:(f=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(n)throw n;return ze()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:t.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(z(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var s;try{const{error:n,data:{session:a}}=r;if(n)throw n;const{options:l,provider:o,token:c,access_token:u,nonce:f}=t,d=await H(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=a==null?void 0:a.access_token)!==null&&s!==void 0?s:void 0,body:{provider:o,id_token:c,access_token:u,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Rt}),{data:p,error:h}=d;return h?this._returnResult({data:{user:null,session:null},error:h}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new Ts}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:h}))}catch(n){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,n;const{data:a,error:l}=r;if(l)throw l;return await H(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await gb(async n=>(n>0&&await mb(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await H(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Rt})),(n,a)=>{const l=200*Math.pow(2,n);return a&&no(a)&&Date.now()+l-s<Ds})}catch(s){if(this._debug(r,"error",s),z(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),ze()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await Zr(this.storage,this.storageKey);if(n&&this.userStorage){let l=await Zr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:n.user},await Ls(this.userStorage,this.storageKey+"-user",l)),n.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:ao()}else if(n&&!n.user&&!n.user){const l=await Zr(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(n.user=l.user,await Fe(this.storage,this.storageKey+"-user"),await Ls(this.storage,this.storageKey,n)):n.user=ao()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const a=((r=n.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<so;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${so}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:l}=await this._callRefreshToken(n.refresh_token);l&&(console.error(l),no(l)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(n.access_token);!o&&(l!=null&&l.user)?(n.user=l.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(s,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new dt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new gl;const{data:a,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!a.session)throw new dt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={data:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(n,"error",a),z(a)){const l={data:null,error:a};return no(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,r,s=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(l),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Fe(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Ls(this.userStorage,this.storageKey+"-user",{user:r.user});const n=Object.assign({},r);delete n.user;const a=Eh(n);await Ls(this.storage,this.storageKey,a)}else{const n=Eh(r);await Ls(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Fe(this.storage,this.storageKey),await Fe(this.storage,this.storageKey+"-code-verifier"),await Fe(this.storage,this.storageKey+"-user"),this.userStorage&&await Fe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ze()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ds);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-t)/Ds);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Ds}ms, refresh threshold is ${yc} ticks`),n<=yc&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof zm)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ze()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const n=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,l]=await Ps(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});n.push(o.toString())}if(s!=null&&s.queryParams){const a=new URLSearchParams(s.queryParams);n.push(a.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:n,error:a}=r;return a?this._returnResult({data:null,error:a}):await H(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,n;const{data:a,error:l}=r;if(l)return this._returnResult({data:null,error:l});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await H(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:a}=r;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Hb(t.webauthn.credential_response):Kb(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:c}=await H(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:a}=r;if(a)return this._returnResult({data:null,error:a});const l=await H(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});if(l.error)return l;const{data:o}=l;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:qb(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Wb(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const n={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])n.all.push(a),a.status==="verified"&&n[a.factor_type].push(a);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:s},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=io(s.access_token);let l=null;a.aal&&(l=a.aal);let o=l;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const u=a.amr||[];return{data:{currentLevel:l,nextLevel:o,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:s},error:n}=r;return n?this._returnResult({data:null,error:n}):s?await H(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:s.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new dt})})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:n},error:a}=s;if(a)return this._returnResult({data:null,error:a});if(!n)return this._returnResult({data:null,error:new dt});const l=await H(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return l.data&&l.data.redirect_url&&ze()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(s){if(z(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:n},error:a}=s;if(a)return this._returnResult({data:null,error:a});if(!n)return this._returnResult({data:null,error:new dt});const l=await H(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return l.data&&l.data.redirect_url&&ze()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(s){if(z(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await H(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:n=>({data:n,error:null})}):this._returnResult({data:null,error:new dt})})}catch(t){if(z(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:s},error:n}=r;return n?this._returnResult({data:null,error:n}):s?(await H(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new dt})})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(o=>o.kid===t);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(o=>o.kid===t),s&&this.jwks_cached_at+eb>n)return s;const{data:a,error:l}=await H(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=n,s=a.keys.find(o=>o.kid===t),!s)?null:s}async getClaims(t,r={}){try{let s=t;if(!s){const{data:h,error:v}=await this.getSession();if(v||!h.session)return this._returnResult({data:null,error:v});s=h.session.access_token}const{header:n,payload:a,signature:l,raw:{header:o,payload:c}}=io(s);r!=null&&r.allowExpired||_b(a.exp);const u=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:h}=await this.getUser(s);if(h)throw h;return{data:{claims:a,header:n,signature:l},error:null}}const f=Nb(n.alg),d=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,d,l,ub(`${o}.${c}`)))throw new bc("Invalid JWT signature");return{data:{claims:a,header:n,signature:l},error:null}}catch(s){if(z(s))return this._returnResult({data:null,error:s});throw s}}}bi.nextInstanceID={};const r1=bi,s1="2.89.0";let Ln="";typeof Deno<"u"?Ln="deno":typeof document<"u"?Ln="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ln="react-native":Ln="node";const n1={"X-Client-Info":`supabase-js-${Ln}/${s1}`},i1={headers:n1},a1={schema:"public"},l1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},o1={};function ji(e){"@babel/helpers - typeof";return ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ji(e)}function c1(e,t){if(ji(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(ji(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u1(e){var t=c1(e,"string");return ji(t)=="symbol"?t:t+""}function d1(e,t,r){return(t=u1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ih(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ih(Object(r),!0).forEach(function(s){d1(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ih(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}const h1=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),f1=()=>Headers,p1=(e,t,r)=>{const s=h1(r),n=f1();return async(a,l)=>{var o;const c=(o=await t())!==null&&o!==void 0?o:e;let u=new n(l==null?void 0:l.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(a,xe(xe({},l),{},{headers:u}))}};function m1(e){return e.endsWith("/")?e:e+"/"}function g1(e,t){var r,s;const{db:n,auth:a,realtime:l,global:o}=e,{db:c,auth:u,realtime:f,global:d}=t,p={db:xe(xe({},c),n),auth:xe(xe({},u),a),realtime:xe(xe({},f),l),storage:{},global:xe(xe(xe({},d),o),{},{headers:xe(xe({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(s=o==null?void 0:o.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function x1(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(m1(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var y1=class extends r1{constructor(e){super(e)}},v1=class{constructor(e,t,r){var s,n;this.supabaseUrl=e,this.supabaseKey=t;const a=x1(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,o={db:a1,realtime:o1,auth:xe(xe({},l1),{},{storageKey:l}),global:i1},c=g1(r??{},o);if(this.storageKey=(s=c.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(n=c.global.headers)!==null&&n!==void 0?n:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(f,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=p1(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(xe({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new Yv(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new Jw(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Kv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:s}=await e.auth.getSession();return(t=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:n,storageKey:a,flowType:l,lock:o,debug:c,throwOnError:u},f,d){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new y1({url:this.authUrl.href,headers:xe(xe({},p),f),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:n,flowType:l,lock:o,debug:c,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(h=>h.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new mw(this.realtimeUrl.href,xe(xe({},e),{},{params:xe(xe({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const w1=(e,t,r)=>new v1(e,t,r);function b1(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}b1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const j1="https://ofoibgbrviywlqxrnxvq.supabase.co",_1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9mb2liZ2Jydml5d2xxeHJueHZxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY5MzUwODAsImV4cCI6MjA4MjUxMTA4MH0.-x37FsewR38YzmmJBupH_ms-HgEzuKFitwrLpYDp9S8",G=w1(j1,_1,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1,storage:window.localStorage,flowType:"pkce"}}),qm=b.createContext({}),Ie=()=>b.useContext(qm),N1=({children:e})=>{const[t,r]=b.useState(null),[s,n]=b.useState(null),[a,l]=b.useState(null),[o,c]=b.useState(null),[u,f]=b.useState(!0),[d,p]=b.useState(!1),h=()=>f(!1),v=async j=>{if(!j)return c(null),null;try{const{data:E,error:C}=await G.from("abonnements").select("*").eq("organisation_id",j).order("created_at",{ascending:!1}).limit(1).maybeSingle();return C?(console.error("Erreur loadSubscription:",C),c(null),null):(c(E||null),E||null)}catch(E){return console.error("Erreur loadSubscription catch:",E),c(null),null}},x=async j=>{if(!j)return n(null),l(null),c(null),p(!1),null;try{const{data:E,error:C}=await G.from("utilisateurs").select("*").eq("auth_id",j.id).maybeSingle();if(C)return console.error("Erreur loadUserData:",C),n(null),l(null),c(null),p(!1),null;if(!E)return p(!0),n(null),l(null),c(null),null;if(n(E),p(!1),E.organisation_id){const{data:A,error:S}=await G.from("organisations").select("*").eq("id",E.organisation_id).maybeSingle();S?(console.error("Erreur load org:",S),l(null)):l(A||null),await v(E.organisation_id)}else l(null),c(null);return E}catch(E){return console.error("Erreur chargement userData catch:",E),p(!1),n(null),l(null),c(null),null}};b.useEffect(()=>{let j=!1;const E=setTimeout(()=>{j||(console.warn("Auth loading timeout: forcing loading=false"),h())},6e3);(async()=>{try{const{data:{session:S},error:V}=await G.auth.getSession();if(V&&console.error("getSession error:",V),j)return;S!=null&&S.user?r(S.user):(r(null),n(null),l(null),c(null),p(!1)),h(),S!=null&&S.user&&x(S.user)}catch(S){console.error("init auth crash:",S),j||h()}})();const{data:{subscription:A}}=G.auth.onAuthStateChange((S,V)=>{j||(h(),V!=null&&V.user?(r(V.user),x(V.user)):(r(null),n(null),l(null),c(null),p(!1)))});return()=>{j=!0,clearTimeout(E),A==null||A.unsubscribe()}},[]);const w=async(j,E,C={},A)=>{const{data:S,error:V}=await G.auth.signUp({email:j,password:E,options:{data:C,emailRedirectTo:A||`${window.location.origin}/auth/callback`}});if(V)throw V;return S},y=async(j,E)=>{const{data:C,error:A}=await G.auth.signInWithPassword({email:j,password:E});if(A)throw A;return C},g=async()=>{const{error:j}=await G.auth.signOut();if(j)throw j;r(null),n(null),l(null),c(null),p(!1)},m=async()=>{t&&await x(t)},N=async()=>{const j=s==null?void 0:s.organisation_id;return await v(j)},_=b.useMemo(()=>({user:t,userData:s,orgSettings:a,subscription:o,orgId:s==null?void 0:s.organisation_id,loading:u,needsProfile:d,isAuthenticated:!!t,signUp:w,signIn:y,logout:g,refreshUserData:m,refreshSubscription:N}),[t,s,a,o,u,d]);return i.jsx(qm.Provider,{value:_,children:e})},Wm=b.createContext(),Ri=()=>{const e=b.useContext(Wm);return e||{isDemoMode:!1,demoExpired:!1,timeRemaining:180,demoRequest:null,startDemo:async()=>!1,restoreDemo:()=>!1,endDemo:async()=>{},isFeatureLocked:()=>!1,formatTimeRemaining:()=>"3:00",DEMO_DURATION:180}},_r=180,k1=({children:e})=>{const[t,r]=b.useState(!1),[s,n]=b.useState(null),[a,l]=b.useState(_r),[o,c]=b.useState(!1),[u,f]=b.useState(null),[d,p]=b.useState(null);b.useEffect(()=>{let m;return t&&s&&!o&&(m=setInterval(()=>{const N=Math.floor((Date.now()-s)/1e3),_=Math.max(0,_r-N);l(_),_<=0&&(c(!0),r(!1),clearInterval(m),localStorage.removeItem("demo_session"))},1e3)),()=>{m&&clearInterval(m)}},[t,s,o]),b.useEffect(()=>{v()},[]);const h=b.useCallback(async m=>{try{const N=Date.now();let _="local-demo";try{if(m!=null&&m.organisation_id){const{data:j,error:E}=await G.from("demo_sessions").insert({organisation_id:m.organisation_id,started_at:new Date(N).toISOString(),expires_at:new Date(N+_r*1e3).toISOString(),converted:!1}).select().single();!E&&(j!=null&&j.id)&&(_=j.id)}}catch(j){console.error("demo_sessions insert failed (non bloquant):",j)}return f(_),p(m),n(N),l(_r),c(!1),r(!0),localStorage.setItem("demo_session",JSON.stringify({id:_,startTime:N,request:m})),!0}catch(N){return console.error("Erreur startDemo:",N),!1}},[]),v=b.useCallback(()=>{try{const m=localStorage.getItem("demo_session");if(m){const{id:N,startTime:_,request:j}=JSON.parse(m),E=Math.floor((Date.now()-_)/1e3);if(E<_r)return f(N),p(j),n(_),l(_r-E),c(!1),r(!0),!0;localStorage.removeItem("demo_session"),c(!0)}}catch(m){console.error("Erreur restoreDemo:",m)}return!1},[]),x=b.useCallback(async(m=!1)=>{try{u&&u!=="local-demo"&&await G.from("demo_sessions").update({converted:m}).eq("id",u)}catch(N){console.error("Erreur endDemo:",N)}localStorage.removeItem("demo_session"),r(!1),n(null),l(_r),c(!1),f(null),p(null)},[u]),w=b.useCallback(m=>t?["create_report","edit_report","generate_pdf","export_data","add_client","add_site","settings","billing"].includes(m):!1,[t]),y=b.useCallback(()=>{const m=Math.floor(a/60),N=a%60;return`${m}:${N.toString().padStart(2,"0")}`},[a]),g={isDemoMode:t,demoExpired:o,timeRemaining:a,demoRequest:d,startDemo:h,restoreDemo:v,endDemo:x,isFeatureLocked:w,formatTimeRemaining:y,DEMO_DURATION:_r};return i.jsx(Wm.Provider,{value:g,children:e})};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var S1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),q=(e,t)=>{const r=b.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:o="",children:c,...u},f)=>b.createElement("svg",{ref:f,...S1,width:n,height:n,stroke:s,strokeWidth:l?Number(a)*24/Number(n):a,className:["lucide",`lucide-${E1(e)}`,o].join(" "),...u},[...t.map(([d,p])=>b.createElement(d,p)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=q("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=q("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=q("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=q("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=q("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=q("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=q("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=q("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=q("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=q("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=q("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=q("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=q("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=q("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=q("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=q("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=q("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=q("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=q("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=q("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=q("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=q("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=q("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=q("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=q("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=q("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=q("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=q("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=q("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=q("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=q("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=q("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=q("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=q("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=q("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=q("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=q("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=q("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=q("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=q("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=q("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=q("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=q("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=q("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=q("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=q("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=q("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Uh={mainteneur:{"1_domain":{1:59,"2-5":89,"6-10":149,"11-25":299},"2_domains":{1:69,"2-5":99,"6-10":159,"11-25":299},"3+_domains":{1:79,"2-5":109,"6-10":169,"11-25":299}},installateur_mainteneur:{"1_domain":{1:59,"2-5":99,"6-10":159,"11-25":359},"2_domains":{1:69,"2-5":99,"6-10":169,"11-25":359},"3+_domains":{1:79,"2-5":119,"6-10":179,"11-25":359}},installateur:{"1_domain":{1:59,"2-5":89,"6-10":149,"11-25":299},"2_domains":{1:69,"2-5":99,"6-10":159,"11-25":299},"3+_domains":{1:79,"2-5":109,"6-10":169,"11-25":299}},artisan:{"1_domain":{1:59,"2-5":89,"6-10":149,"11-25":299},"2_domains":{1:69,"2-5":99,"6-10":159,"11-25":299},"3+_domains":{1:79,"2-5":109,"6-10":169,"11-25":299}},sous_traitant:{"1_domain":{1:59,"2-5":89,"6-10":149,"11-25":299},"2_domains":{1:69,"2-5":99,"6-10":159,"11-25":299},"3+_domains":{1:79,"2-5":109,"6-10":169,"11-25":299}}},z1={ia:9,export_compta:5,veille_reglementaire:5},sg={ssi:"SSI (Systme Scurit Incendie)",dsf:"Dsenfumage",compartimentage:"Compartimentage",baes:"BAES / clairage scurit",extincteurs:"Extincteurs",ria:"RIA",colonnes_seches:"Colonnes sches"},Mh={mainteneur:{ssi:["Cat A","Cat B","vac 2/3/4","Formation","SAV"],dsf:["Naturel","Mcanique","SAV","Travaux"],compartimentage:["Maintenance","SAV","Travaux"],baes:["Maintenance","SAV","Travaux"],extincteurs:["Maintenance","Travaux"],ria:["Maintenance","Travaux"],colonnes_seches:["Maintenance","Travaux"]},installateur_mainteneur:{ssi:["Cat A","Cat B","vac 2/3/4","Formation","SAV","MES"],dsf:["Naturel","Mcanique","SAV","Travaux"],compartimentage:["Maintenance","SAV","Travaux"],baes:["Maintenance","SAV","Travaux"],extincteurs:["Maintenance","Travaux"],ria:["Maintenance","Travaux"],colonnes_seches:["Maintenance","Travaux"]},installateur:{ssi:["SAV","MES","Formation"],dsf:["Naturel","Mcanique","SAV","Travaux"],compartimentage:["Maintenance","SAV","Travaux"],baes:["Maintenance","SAV","Travaux"],extincteurs:["Maintenance","Travaux"],ria:["Maintenance","Travaux"],colonnes_seches:["Maintenance","Travaux"]},artisan:{ssi:["SAV","MES","Formation"],dsf:["Naturel","Mcanique","SAV","Travaux"],compartimentage:["Maintenance","SAV","Travaux"],baes:["Maintenance","SAV","Travaux"],extincteurs:["Maintenance","Travaux"],ria:["Maintenance","Travaux"],colonnes_seches:["Maintenance","Travaux"]},sous_traitant:{ssi:["SAV","MES","Formation"],dsf:["Naturel","Mcanique","SAV","Travaux"],compartimentage:["Maintenance","SAV","Travaux"],baes:["Maintenance","SAV","Travaux"],extincteurs:["Maintenance","Travaux"],ria:["Maintenance","Travaux"],colonnes_seches:["Maintenance","Travaux"]}},Iu=(e=[],t="1",r=[],s="mainteneur")=>{var x;let n="1";const a=parseInt(t)||1;t==="2-5"||a>=2&&a<=5?n="2-5":t==="6-10"||a>=6&&a<=10?n="6-10":(t==="11-25"||a>=11)&&(n="11-25");const l=e.length||1;let o="1_domain";l===2&&(o="2_domains"),l>=3&&(o="3+_domains");const c=s||"mainteneur",f=((x=(Uh[c]||Uh.mainteneur)[o])==null?void 0:x[n])||59;let d=0;(r||[]).forEach(w=>{d+=z1[w]||0});const p=f+d,h=Math.round(p*.1),v=p-h;return{basePrice:f,addonsTotal:d,totalPrice:p,discount:h,finalPrice:v,domainCount:l,userKey:n,profileKey:c}},vl=(e="mainteneur",t=[])=>{const r={},s=Mh[e]||Mh.mainteneur;return t.forEach(n=>{s[n]&&(r[n]={label:sg[n]||n,reports:s[n]})}),r},V1=()=>sg,B1=(e,t)=>({domaines:e.modulesInteresses||[],profil:e.typeActivite||"mainteneur",nb_utilisateurs:e.nombreTechniciens||"1",nb_sites:e.nombreSites||"1-10",tarif_base:t.basePrice,tarif_options:t.addonsTotal,tarif_total:t.totalPrice,tarif_final:t.finalPrice,options:e.selectedAddons||[],rapports_fournis:vl(e.typeActivite,e.modulesInteresses)}),q1=()=>{const e=nt(),[t,r]=b.useState(0),[s,n]=b.useState({modulesInteresses:[],typeActivite:"",nombreTechniciens:"",nombreSites:"",logicielActuel:""}),[a,l]=b.useState([]),[o,c]=b.useState(null),[u,f]=b.useState(!1),d=({size:j="normal"})=>{const E=j==="large"?"w-16 h-16":"w-12 h-12",C=j==="large"?"text-4xl":"text-2xl";return i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:`${E} bg-gradient-to-br from-red-500 via-orange-500 to-yellow-500 rounded-xl flex items-center justify-center shadow-lg shadow-red-500/30`,children:[i.jsx("span",{className:`text-white font-black ${C}`,children:"E"}),i.jsx("span",{className:`text-white font-black ${C} animate-pulse`,children:"S"})]}),i.jsx("div",{className:"absolute -top-3 -right-3",children:i.jsx(Bt,{className:"w-7 h-7 text-orange-500 animate-bounce",style:{animationDuration:"1s"}})})]}),i.jsx("div",{className:"flex flex-col",children:i.jsxs("div",{className:"flex items-baseline gap-1",children:[i.jsx("span",{className:`${C} font-black text-white`,children:"Easy"}),i.jsx("span",{className:`${C} font-black text-transparent bg-clip-text bg-gradient-to-r from-red-400 via-orange-400 to-yellow-400`,children:"Scurit"})]})})]})},p=()=>i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900 via-red-950/20 to-gray-900"}),i.jsx("div",{className:"absolute top-20 left-10 w-96 h-96 bg-red-500/5 rounded-full blur-3xl animate-pulse"}),i.jsx("div",{className:"absolute bottom-20 right-10 w-[500px] h-[500px] bg-orange-500/5 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),h=[{id:"modulesInteresses",question:"Quels sont vos domaines d'intervention ?",subtitle:"Slectionnez tous les domaines que vous couvrez",multiple:!0,options:[{value:"ssi",label:"SSI (Systme Scurit Incendie)",icon:rr,color:"red"},{value:"dsf",label:"Dsenfumage (Naturel / Mcanique)",icon:yl,color:"orange"},{value:"compartimentage",label:"Compartimentage (Portes CF, Clapets)",icon:Ue,color:"yellow"},{value:"baes",label:"BAES / clairage de scurit",icon:sr,color:"green"},{value:"extincteurs",label:"Extincteurs",icon:mn,color:"red"},{value:"colonnes_seches",label:"Colonnes sches",icon:tr,color:"blue"},{value:"ria",label:"RIA (Robinets Incendie Arms)",icon:rr,color:"cyan"}]},{id:"typeActivite",question:"Vous tes ?",subtitle:"Slectionnez votre activit principale",options:[{value:"installateur_mainteneur",label:"Installateur / Mainteneur",icon:tr,description:"Installation et maintenance"},{value:"mainteneur",label:"Mainteneur",icon:$h,description:"Maintenance et vrifications"},{value:"installateur",label:"Installateur",icon:sr,description:"Installation uniquement"},{value:"sous_traitant",label:"Sous-traitant",icon:Lt,description:"Travaux en sous-traitance"},{value:"artisan",label:"Artisan",icon:Ue,description:"Activit indpendante"}]},{id:"nombreTechniciens",question:"Combien d'utilisateurs auront accs ?",subtitle:"Incluez-vous dans le comptage",options:[{value:"1",label:"1 utilisateur (moi seul)",icon:Lt},{value:"2-5",label:"2  5 utilisateurs",icon:Lt},{value:"6-10",label:"6  10 utilisateurs",icon:Lt},{value:"11-25",label:"11  25 utilisateurs",icon:Lt}]},{id:"nombreSites",question:"Combien de sites grez-vous ?",subtitle:"Nombre approximatif",options:[{value:"1-10",label:"1  10 sites",icon:Ue},{value:"11-50",label:"11  50 sites",icon:Ue},{value:"51-100",label:"51  100 sites",icon:Ue},{value:"100+",label:"Plus de 100 sites",icon:Ue}]},{id:"logicielActuel",question:"Comment grez-vous actuellement ?",subtitle:"Votre outil actuel",options:[{value:"excel",label:"Excel / Tableurs",icon:Vt},{value:"papier",label:"Papier / Carnets",icon:$h},{value:"logiciel",label:"Autre logiciel",icon:tr},{value:"rien",label:"Pas d'outil ddi",icon:mn}]}],v=[{id:"ia",name:"Module IA",description:"Intelligence artificielle pour vos rapports",price:9,icon:T1},{id:"export_compta",name:"Export comptable",description:"Export vers votre logiciel comptable",price:5,icon:P1},{id:"veille_reglementaire",name:"Veille rglementaire",description:"Alertes volutions normatives",price:5,icon:Ru}],x=j=>{l(E=>E.includes(j)?E.filter(C=>C!==j):[...E,j])},w=b.useMemo(()=>Iu(s.modulesInteresses||[],s.nombreTechniciens||"1",a,s.typeActivite||"mainteneur"),[s.modulesInteresses,s.nombreTechniciens,a,s.typeActivite]),y=b.useMemo(()=>vl(s.typeActivite||"mainteneur",s.modulesInteresses||[]),[s.typeActivite,s.modulesInteresses]),g=j=>{const E=h[t];if(E.multiple){const C=s[E.id]||[],A=C.includes(j)?C.filter(S=>S!==j):[...C,j];n({...s,[E.id]:A})}else n({...s,[E.id]:j}),t<h.length-1?setTimeout(()=>r(t+1),300):setTimeout(()=>f(!0),300)},m=()=>{t<h.length-1?r(t+1):f(!0)},N=()=>{e("/register",{state:{questionnaireData:s,pricing:{...w,selectedAddons:a,availableReports:y}}})},_=[{question:"Easy Scurit aide-t-il  la conformit ?",answer:"Oui ! Easy Scurit est un assistant qui vous aide  rdiger vos rapports selon les normes en vigueur. Les rapports sont pr-remplis selon les normes APSAD, NF et les arrts applicables pour faciliter vos vrifications."},{question:"Comment fonctionne la dmo ?",answer:"Aprs inscription, vous accdez  une dmo de 3 minutes en lecture seule. Vous verrez le dashboard, les rapports correspondant  vos domaines, et l'interface complte. Pour crer des rapports, il faudra souscrire."},{question:"Puis-je changer de formule ?",answer:"Absolument ! Vous pouvez modifier votre nombre d'utilisateurs ou ajouter des domaines  tout moment depuis votre espace. La facturation s'ajuste automatiquement."},{question:"Y a-t-il un engagement ?",answer:"Non, aucun engagement. Vous pouvez rsilier  tout moment. Nous offrons -10% sur le premier mois pour vous permettre de tester sereinement."},{question:"L'application mobile est-elle incluse ?",answer:"Oui, l'application mobile iOS et Android est incluse dans tous les abonnements. Vos techniciens peuvent remplir les rapports sur le terrain, mme hors connexion."}];return i.jsxs("div",{className:"min-h-screen bg-gray-900 text-white relative",children:[i.jsx(p,{}),i.jsx("header",{className:"relative z-10 border-b border-gray-800",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[i.jsx(d,{}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>e("/login"),className:"text-gray-300 hover:text-white transition-colors",children:"Connexion"}),i.jsx("button",{onClick:()=>document.getElementById("questionnaire").scrollIntoView({behavior:"smooth"}),className:"bg-gradient-to-r from-red-500 to-orange-500 text-white px-4 py-2 rounded-lg font-semibold hover:from-red-600 hover:to-orange-600 transition-all",children:"Commencer"})]})]})}),i.jsx("section",{className:"relative z-10 py-20 px-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 bg-red-500/20 border border-red-500/30 rounded-full px-4 py-2 mb-6",children:[i.jsx(Bt,{className:"w-4 h-4 text-orange-400"}),i.jsx("span",{className:"text-sm text-orange-300",children:"Logiciel de gestion scurit incendie"})]}),i.jsxs("h1",{className:"text-5xl md:text-6xl font-black mb-6",children:["Grez vos ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-red-400 via-orange-400 to-yellow-400",children:"rapports incendie"})," simplement"]}),i.jsx("p",{className:"text-xl text-gray-400 mb-8 max-w-2xl mx-auto",children:"SSI, Dsenfumage, BAES, Extincteurs, RIA... Tous vos rapports de vrification et maintenance en un seul outil."}),i.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-12",children:i.jsxs("button",{onClick:()=>document.getElementById("questionnaire").scrollIntoView({behavior:"smooth"}),className:"bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 text-white px-8 py-4 rounded-xl font-bold text-lg transition-all shadow-lg shadow-red-500/25 flex items-center gap-2",children:["Configurer ma solution",i.jsx(vs,{className:"w-5 h-5"})]})}),i.jsxs("div",{className:"flex flex-wrap justify-center gap-6 text-sm text-gray-400",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ve,{className:"w-4 h-4 text-green-400"}),i.jsx("span",{children:"Dmo 3 min gratuite"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ve,{className:"w-4 h-4 text-green-400"}),i.jsx("span",{children:"-10% premier mois"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ve,{className:"w-4 h-4 text-green-400"}),i.jsx("span",{children:"Sans engagement"})]})]})]})}),i.jsx("section",{id:"questionnaire",className:"py-20 px-4 relative z-10",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsxs("h2",{className:"text-4xl font-black mb-4",children:["Configurez votre ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-red-400 to-orange-400",children:"solution"})]}),i.jsx("p",{className:"text-gray-400",children:"Rpondez  quelques questions pour obtenir votre tarif personnalis"})]}),u?i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-gradient-to-br from-gray-800/80 to-gray-900/80 border border-gray-700 rounded-3xl p-8 backdrop-blur-sm",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 bg-green-500/20 border border-green-500/30 rounded-full px-4 py-2 mb-4",children:[i.jsx(ve,{className:"w-4 h-4 text-green-400"}),i.jsx("span",{className:"text-sm text-green-300",children:"Votre tarif personnalis"})]}),i.jsxs("div",{className:"text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-red-400 via-orange-400 to-yellow-400 mb-2",children:[w.finalPrice,"",i.jsx("span",{className:"text-2xl",children:"/mois"})]}),i.jsx("p",{className:"text-gray-400",children:"Premier mois (-10%)"}),i.jsxs("p",{className:"text-sm text-gray-500",children:["Puis ",w.totalPrice,"/mois"]})]}),i.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-6 mb-6",children:[i.jsx("h4",{className:"font-semibold mb-4",children:"Votre configuration"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{className:"text-gray-400",children:[w.domainCount," domaine(s)"]}),i.jsx("div",{className:"flex gap-1",children:(s.modulesInteresses||[]).map(j=>i.jsx("span",{className:"px-2 py-0.5 bg-red-500/20 text-red-300 rounded text-xs",children:j.toUpperCase()},j))})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Utilisateurs"}),i.jsx("span",{className:"text-white",children:s.nombreTechniciens})]}),i.jsxs("div",{className:"flex justify-between border-t border-gray-700 pt-3",children:[i.jsx("span",{className:"text-gray-400",children:"Prix de base"}),i.jsxs("span",{className:"text-white",children:[w.basePrice,"/mois"]})]}),w.addonsTotal>0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Options"}),i.jsxs("span",{className:"text-white",children:["+",w.addonsTotal,"/mois"]})]})]})]}),i.jsx("button",{onClick:N,className:"w-full bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 text-white py-4 rounded-xl font-bold text-lg transition-all shadow-lg shadow-red-500/25 hover:shadow-red-500/40",children:"Crer mon compte et tester"}),i.jsx("p",{className:"text-center text-gray-500 text-xs mt-3",children:"Dmo 3 min  Paiement  Accs complet"})]}),i.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-2xl p-8 backdrop-blur-sm",children:[i.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[i.jsx(F1,{className:"w-6 h-6 text-yellow-400"}),"Options additionnelles"]}),i.jsx("div",{className:"space-y-3",children:v.map(j=>{const E=a.includes(j.id);return i.jsxs("button",{onClick:()=>x(j.id),className:`w-full flex items-center gap-4 p-4 rounded-xl border-2 transition-all text-left ${E?"border-red-500 bg-red-500/10":"border-gray-700 hover:border-gray-600"}`,children:[i.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${E?"bg-red-500":"bg-gray-700"}`,children:i.jsx(j.icon,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:"font-semibold text-white",children:j.name}),i.jsx("p",{className:"text-sm text-gray-400",children:j.description})]}),i.jsxs("span",{className:"text-red-400 font-bold",children:["+",j.price,""]}),i.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${E?"border-red-500 bg-red-500":"border-gray-600"}`,children:E&&i.jsx(ve,{className:"w-4 h-4 text-white"})})]},j.id)})})]}),i.jsx("div",{className:"text-center",children:i.jsx("button",{onClick:()=>{f(!1),r(0)},className:"text-gray-400 hover:text-white transition-colors",children:" Modifier mes rponses"})})]}):i.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-2xl p-8 backdrop-blur-sm",children:[i.jsx("div",{className:"flex items-center gap-2 mb-8",children:h.map((j,E)=>i.jsx("div",{className:`h-2 flex-1 rounded-full transition-colors ${E<=t?"bg-gradient-to-r from-red-500 to-orange-500":"bg-gray-700"}`},E))}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h3",{className:"text-2xl font-bold mb-2",children:h[t].question}),i.jsx("p",{className:"text-gray-400",children:h[t].subtitle})]}),i.jsx("div",{className:"grid md:grid-cols-2 gap-4 mb-8",children:h[t].options.map(j=>{const E=h[t].multiple?(s[h[t].id]||[]).includes(j.value):s[h[t].id]===j.value;return i.jsxs("button",{onClick:()=>g(j.value),className:`flex items-center gap-4 p-4 rounded-xl border-2 transition-all text-left ${E?"border-red-500 bg-red-500/10":"border-gray-700 hover:border-gray-600"}`,children:[i.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${E?"bg-gradient-to-br from-red-500 to-orange-500":"bg-gray-700"}`,children:i.jsx(j.icon,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:"font-semibold text-white block",children:j.label}),j.description&&i.jsx("span",{className:"text-sm text-gray-400",children:j.description})]}),E&&i.jsx(ve,{className:"w-6 h-6 text-red-400"})]},j.value)})}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("button",{onClick:()=>t>0&&r(t-1),className:`text-gray-400 hover:text-white ${t===0?"invisible":""}`,children:" Prcdent"}),h[t].multiple&&i.jsx("button",{onClick:m,disabled:(s[h[t].id]||[]).length===0,className:"bg-gradient-to-r from-red-500 to-orange-500 text-white px-6 py-2 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:"Continuer "})]})]})]})}),i.jsx("section",{id:"faq",className:"py-20 px-4 relative z-10",children:i.jsxs("div",{className:"max-w-3xl mx-auto",children:[i.jsx("div",{className:"text-center mb-12",children:i.jsxs("h2",{className:"text-4xl font-black mb-4",children:["Questions ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-red-400 to-orange-400",children:"frquentes"})]})}),i.jsx("div",{className:"space-y-4",children:_.map((j,E)=>i.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl overflow-hidden backdrop-blur-sm",children:[i.jsxs("button",{onClick:()=>c(o===E?null:E),className:"w-full flex items-center justify-between p-6 text-left",children:[i.jsx("span",{className:"font-semibold text-white pr-4",children:j.question}),o===E?i.jsx(jc,{className:"w-5 h-5 text-red-400 flex-shrink-0"}):i.jsx(Km,{className:"w-5 h-5 text-gray-400 flex-shrink-0"})]}),o===E&&i.jsx("div",{className:"px-6 pb-6 text-gray-400",children:j.answer})]},E))})]})}),i.jsx("section",{className:"py-20 px-4 relative z-10",children:i.jsx("div",{className:"max-w-4xl mx-auto text-center",children:i.jsxs("div",{className:"bg-gradient-to-br from-red-900/50 to-orange-900/50 border border-red-500/30 rounded-3xl p-12 backdrop-blur-sm",children:[i.jsx(Bt,{className:"w-16 h-16 text-orange-500 mx-auto mb-6 animate-pulse"}),i.jsx("h2",{className:"text-4xl font-black mb-4",children:"Prt  simplifier votre gestion ?"}),i.jsx("p",{className:"text-gray-300 mb-8 text-lg",children:"Rejoignez les professionnels qui font confiance  Easy Scurit"}),i.jsx("button",{onClick:()=>document.getElementById("questionnaire").scrollIntoView({behavior:"smooth"}),className:"bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 text-white px-10 py-4 rounded-xl font-bold text-lg transition-all shadow-2xl shadow-red-500/30 hover:shadow-red-500/50",children:"Configurer ma solution"}),i.jsx("p",{className:"text-gray-400 mt-4 text-sm",children:"Dmo gratuite  -10% premier mois  Sans engagement"})]})})}),i.jsx("footer",{className:"border-t border-gray-800 py-12 px-4 relative z-10",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[i.jsxs("div",{children:[i.jsx(d,{}),i.jsx("p",{className:"text-gray-400 mt-4 text-sm",children:"La solution de gestion pour les professionnels de la scurit incendie."})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-white mb-4",children:"Produit"}),i.jsxs("ul",{className:"space-y-2 text-gray-400",children:[i.jsx("li",{children:i.jsx("a",{href:"#questionnaire",className:"hover:text-red-400 transition-colors",children:"Tarifs"})}),i.jsx("li",{children:i.jsx("a",{href:"#faq",className:"hover:text-red-400 transition-colors",children:"FAQ"})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-white mb-4",children:"Lgal"}),i.jsxs("ul",{className:"space-y-2 text-gray-400",children:[i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:text-red-400 transition-colors",children:"CGV"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:text-red-400 transition-colors",children:"Confidentialit"})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-white mb-4",children:"Contact"}),i.jsxs("ul",{className:"space-y-2 text-gray-400",children:[i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(ws,{className:"w-4 h-4"}),"contact@easy-securite.fr"]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(bs,{className:"w-4 h-4"}),"01 23 45 67 89"]})]})]})]}),i.jsx("div",{className:"border-t border-gray-800 pt-8 text-center text-gray-500 text-sm",children:" 2025 Easy Scurit. Tous droits rservs."})]})})]})},W1=()=>{const e=nt(),{signIn:t,resetPassword:r}=Ie(),[s,n]=b.useState(!1),[a,l]=b.useState(""),[o,c]=b.useState(""),[u,f]=b.useState(!1),[d,p]=b.useState(!1),[h,v]=b.useState({email:"",password:""}),x=m=>{v({...h,[m.target.name]:m.target.value}),l(""),c("")},w=async m=>{var N,_,j;if(m.preventDefault(),!h.email||!h.password){l("Veuillez remplir tous les champs");return}n(!0),l("");try{await t(h.email,h.password),e("/dashboard")}catch(E){console.error("Erreur connexion:",E),(N=E.message)!=null&&N.includes("Invalid login credentials")?l("Email ou mot de passe incorrect"):(_=E.message)!=null&&_.includes("Email not confirmed")?l("Veuillez confirmer votre email avant de vous connecter"):(j=E.message)!=null&&j.includes("Too many requests")?l("Trop de tentatives. Ressayez plus tard."):l("Erreur de connexion. Vrifiez vos identifiants.")}finally{n(!1)}},y=async m=>{if(m.preventDefault(),!h.email){l("Veuillez entrer votre email");return}n(!0),l("");try{await r(h.email),c("Email de rinitialisation envoy ! Vrifiez votre bote mail."),p(!1)}catch(N){console.error("Erreur reset:",N),l("Erreur lors de l'envoi. Ressayez.")}finally{n(!1)}},g=()=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 via-orange-500 to-yellow-500 rounded-xl flex items-center justify-center shadow-lg shadow-red-500/30",children:[i.jsx("span",{className:"text-white font-black text-xl",children:"E"}),i.jsx("span",{className:"text-white font-black text-xl animate-pulse",children:"S"})]}),i.jsx("div",{className:"absolute -top-2 -right-2",children:i.jsx(Bt,{className:"w-6 h-6 text-orange-500 animate-bounce",style:{animationDuration:"1s"}})})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-2xl font-black text-white",children:"Easy"}),i.jsx("span",{className:"text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-red-400 via-orange-400 to-yellow-400",children:" Scurit"})]})]});return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-900 to-black flex",children:[i.jsxs("div",{className:"hidden lg:flex lg:w-1/2 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-900/30 via-transparent to-orange-900/30"}),i.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-red-500/20 rounded-full blur-3xl animate-pulse"}),i.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-orange-500/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),i.jsxs("div",{className:"relative z-10 flex flex-col justify-center px-12",children:[i.jsx(g,{}),i.jsxs("h1",{className:"text-4xl font-bold text-white mt-12 mb-4",children:["Bon retour sur ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-red-400 to-orange-400",children:"Easy Scurit"})]}),i.jsx("p",{className:"text-gray-400 text-lg mb-8",children:"Connectez-vous pour accder  votre espace de gestion."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3 text-gray-300",children:[i.jsx(ve,{className:"w-5 h-5 text-green-400"}),i.jsx("span",{children:"Rapports SSI, DSF, BAES, Extincteurs"})]}),i.jsxs("div",{className:"flex items-center gap-3 text-gray-300",children:[i.jsx(ve,{className:"w-5 h-5 text-green-400"}),i.jsx("span",{children:"Planning et interventions"})]}),i.jsxs("div",{className:"flex items-center gap-3 text-gray-300",children:[i.jsx(ve,{className:"w-5 h-5 text-green-400"}),i.jsx("span",{children:"Application mobile synchronise"})]})]})]})]}),i.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:i.jsxs("div",{className:"w-full max-w-md",children:[i.jsx("div",{className:"lg:hidden flex justify-center mb-8",children:i.jsx(g,{})}),i.jsx("h2",{className:"text-3xl font-bold text-white text-center mb-2",children:d?"Mot de passe oubli":"Connexion"}),i.jsx("p",{className:"text-gray-400 text-center mb-8",children:d?"Entrez votre email pour recevoir un lien de rinitialisation":"Accdez  votre espace Easy Scurit"}),a&&i.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 rounded-lg p-4 mb-6 flex items-center gap-3",children:[i.jsx(Ai,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),i.jsx("p",{className:"text-red-400 text-sm",children:a})]}),o&&i.jsxs("div",{className:"bg-green-500/10 border border-green-500/50 rounded-lg p-4 mb-6 flex items-center gap-3",children:[i.jsx(ve,{className:"w-5 h-5 text-green-400 flex-shrink-0"}),i.jsx("p",{className:"text-green-400 text-sm",children:o})]}),i.jsxs("form",{onSubmit:d?y:w,children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(ws,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"email",name:"email",value:h.email,onChange:x,placeholder:"vous@entreprise.fr",className:"w-full bg-gray-800 border border-gray-700 rounded-lg py-3 px-10 text-white placeholder-gray-500 focus:outline-none focus:border-red-500 transition-colors"})]})]}),!d&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(Yt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:u?"text":"password",name:"password",value:h.password,onChange:x,placeholder:"",className:"w-full bg-gray-800 border border-gray-700 rounded-lg py-3 px-10 text-white placeholder-gray-500 focus:outline-none focus:border-red-500 transition-colors"}),i.jsx("button",{type:"button",onClick:()=>f(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:u?i.jsx(Qm,{className:"w-5 h-5"}):i.jsx(bn,{className:"w-5 h-5"})})]})]})]}),!d&&i.jsx("div",{className:"flex justify-end mt-4",children:i.jsx("button",{type:"button",onClick:()=>p(!0),className:"text-sm text-red-400 hover:text-red-300",children:"Mot de passe oubli ?"})}),i.jsx("button",{type:"submit",disabled:s,className:"w-full mt-6 bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 text-white py-3 rounded-lg font-bold transition-all shadow-lg shadow-red-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:s?i.jsxs(i.Fragment,{children:[i.jsx(hs,{className:"w-5 h-5 animate-spin"}),d?"Envoi...":"Connexion..."]}):d?"Envoyer le lien":"Se connecter"}),d&&i.jsx("button",{type:"button",onClick:()=>{p(!1),l(""),c("")},className:"w-full mt-4 text-gray-400 hover:text-white transition-colors",children:" Retour  la connexion"})]}),!d&&i.jsxs("p",{className:"text-center text-gray-400 mt-8",children:["Pas encore de compte ?"," ",i.jsx(gi,{to:"/register",className:"text-red-400 hover:text-red-300 font-medium",children:"Crer un compte"})]}),i.jsx("div",{className:"text-center mt-6",children:i.jsx(gi,{to:"/",className:"text-gray-500 hover:text-gray-300 text-sm",children:" Retour  l'accueil"})})]})})]})},H1=()=>{var N,_;const e=bt(),t=((N=e.state)==null?void 0:N.questionnaireData)||null,r=((_=e.state)==null?void 0:_.pricing)||null,[s,n]=b.useState(""),[a,l]=b.useState(""),[o,c]=b.useState(""),[u,f]=b.useState(!1),[d,p]=b.useState(!1),[h,v]=b.useState(""),[x,w]=b.useState(!1),y=b.useMemo(()=>!t||!r?null:B1({...t,selectedAddons:(r==null?void 0:r.selectedAddons)||[]},r),[t,r]),g=async j=>{var E;if(j.preventDefault(),v(""),!s||!a||!o){v("Tous les champs sont obligatoires");return}if(!/\S+@\S+\.\S+/.test(s)){v("Email invalide");return}if(a.length<6){v("Le mot de passe doit contenir au moins 6 caractres");return}if(a!==o){v("Les mots de passe ne correspondent pas");return}p(!0);try{const{data:C,error:A}=await G.auth.signUp({email:s,password:a,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}});if(A)throw A;if(C.user&&C.user.identities&&C.user.identities.length===0)throw new Error("Cet email est dj utilis");try{y&&await G.from("demandes_prospects").insert({email:s,telephone:null,domaines_demandes:y.domaines,profil_demande:y.profil,nb_utilisateurs:y.nb_utilisateurs,tarif_calcule:y.tarif_final,options_selectionnees:{addons:y.options||[],nb_sites:y.nb_sites,logiciel_actuel:(t==null?void 0:t.logicielActuel)||(t==null?void 0:t.logicielActuel),rapports_fournis:y.rapports_fournis||{},tarif_base:y.tarif_base,tarif_options:y.tarif_options,tarif_total:y.tarif_total,discount:r==null?void 0:r.discount},source:"landing",converti:!1})}catch(S){console.error("Erreur insertion demandes_prospects:",S)}w(!0)}catch(C){console.error("Erreur inscription:",C),(E=C.message)!=null&&E.includes("already registered")?v("Cet email est dj utilis"):v(C.message||"Erreur lors de l'inscription")}finally{p(!1)}},m=()=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 via-orange-500 to-yellow-500 rounded-xl flex items-center justify-center shadow-lg shadow-red-500/30",children:[i.jsx("span",{className:"text-white font-black text-xl",children:"E"}),i.jsx("span",{className:"text-white font-black text-xl",children:"S"})]}),i.jsx(Bt,{className:"absolute -top-2 -right-2 w-6 h-6 text-orange-500"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-2xl font-black text-white",children:"Easy"}),i.jsxs("span",{className:"text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-red-400 to-orange-400",children:[" ","Scurit"]})]})]});return x?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-900 to-black flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full text-center",children:[i.jsx("div",{className:"mb-8 flex justify-center",children:i.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center",children:i.jsx(ve,{className:"w-10 h-10 text-green-500"})})}),i.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Vrifiez votre email"}),i.jsxs("p",{className:"text-gray-400 mb-6",children:["Un email de confirmation a t envoy "," ",i.jsx("span",{className:"text-white font-medium",children:s})]}),i.jsx("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6 mb-8",children:i.jsx("p",{className:"text-gray-300 text-sm",children:"Cliquez sur le lien dans l'email pour activer votre compte et complter votre inscription."})}),i.jsxs("p",{className:"text-gray-500 text-sm",children:["Pas reu l'email ? Vrifiez vos spams ou"," ",i.jsx("button",{onClick:()=>w(!1),className:"text-red-400 hover:text-red-300",children:"ressayez"})]}),i.jsx("div",{className:"mt-6",children:i.jsx(gi,{to:"/",className:"text-gray-500 hover:text-gray-300 text-sm",children:" Retour  l'accueil"})})]})}):i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-900 to-black flex",children:[i.jsxs("div",{className:"hidden lg:flex lg:w-1/2 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-900/30 via-transparent to-orange-900/30"}),i.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-red-500/20 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-orange-500/20 rounded-full blur-3xl"}),i.jsxs("div",{className:"relative z-10 flex flex-col justify-center px-12",children:[i.jsx(m,{}),i.jsxs("h1",{className:"text-4xl font-bold text-white mt-12 mb-4",children:["Grez votre activit"," ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-red-400 to-orange-400",children:"scurit incendie"})]}),i.jsx("p",{className:"text-gray-400 text-lg mb-8",children:"SSI, DSF, BAES, Extincteurs... Tous vos rapports en un seul endroit."}),i.jsx("div",{className:"space-y-4",children:["Accs dmo 3 minutes aprs inscription","Tarif calcul selon vos besoins","Sans engagement"].map(j=>i.jsxs("div",{className:"flex items-center gap-3 text-gray-300",children:[i.jsx(ve,{className:"w-5 h-5 text-green-400"}),i.jsx("span",{children:j})]},j))})]})]}),i.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:i.jsxs("div",{className:"w-full max-w-md",children:[i.jsx("div",{className:"lg:hidden flex justify-center mb-8",children:i.jsx(m,{})}),i.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-2",children:"Crez votre compte"}),i.jsx("p",{className:"text-gray-400 text-center mb-8",children:"tape 1/2 : Vos identifiants"}),h&&i.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 rounded-lg p-4 mb-6 flex items-center gap-3",children:[i.jsx(Ai,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),i.jsx("p",{className:"text-red-400 text-sm",children:h})]}),i.jsxs("form",{onSubmit:g,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Email ",i.jsx("span",{className:"text-red-400",children:"*"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(ws,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"email",value:s,onChange:j=>n(j.target.value),placeholder:"vous@entreprise.fr",className:"w-full bg-gray-800 border border-gray-700 rounded-lg py-3 px-10 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Mot de passe ",i.jsx("span",{className:"text-red-400",children:"*"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Yt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:u?"text":"password",value:a,onChange:j=>l(j.target.value),placeholder:"",className:"w-full bg-gray-800 border border-gray-700 rounded-lg py-3 px-10 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"}),i.jsx("button",{type:"button",onClick:()=>f(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:u?i.jsx(Qm,{className:"w-5 h-5"}):i.jsx(bn,{className:"w-5 h-5"})})]}),i.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Minimum 6 caractres"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Confirmer le mot de passe ",i.jsx("span",{className:"text-red-400",children:"*"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Yt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:u?"text":"password",value:o,onChange:j=>c(j.target.value),placeholder:"",className:"w-full bg-gray-800 border border-gray-700 rounded-lg py-3 px-10 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]})]}),i.jsx("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 text-white py-3 rounded-lg font-bold transition-all shadow-lg shadow-red-500/25 disabled:opacity-50 flex items-center justify-center gap-2 mt-6",children:d?i.jsxs(i.Fragment,{children:[i.jsx(hs,{className:"w-5 h-5 animate-spin"}),"Envoi en cours..."]}):i.jsxs(i.Fragment,{children:["Continuer",i.jsx(vs,{className:"w-5 h-5"})]})})]}),i.jsxs("p",{className:"text-center text-gray-400 mt-8",children:["Dj un compte ?"," ",i.jsx(gi,{to:"/login",className:"text-red-400 hover:text-red-300 font-medium",children:"Se connecter"})]})]})})]})},K1=()=>{const e=nt(),{user:t,refreshUserData:r}=Ie(),[s,n]=b.useState(!1),[a,l]=b.useState(""),[o,c]=b.useState({prenom:"",nom:"",telephone:"",entreprise:"",siret:"",ville:""}),u=p=>{c({...o,[p.target.name]:p.target.value}),l("")},f=async p=>{if(p.preventDefault(),l(""),!o.prenom||!o.nom){l("Le prnom et le nom sont obligatoires");return}if(!o.telephone){l("Le tlphone est obligatoire");return}const h=o.telephone.replace(/[\s\-\.]/g,"");if(!/^\d{10}$/.test(h)){l("Le tlphone doit contenir 10 chiffres");return}if(!o.entreprise){l("Le nom de l'entreprise est obligatoire");return}if(!o.siret){l("Le SIRET est obligatoire");return}const v=o.siret.replace(/\s/g,"");if(!/^\d{14}$/.test(v)){l("Le SIRET doit contenir 14 chiffres");return}if(!o.ville){l("La ville est obligatoire");return}if(!(t!=null&&t.id)){l("Utilisateur non authentifi");return}n(!0);try{const{data:x,error:w}=await G.from("organisations").insert({nom:o.entreprise,siret:v,ville:o.ville,email:t.email,telephone:h}).select().single();if(w)throw new Error(w.message||"Erreur cration organisation");const{error:y}=await G.from("utilisateurs").insert({organisation_id:x.id,auth_id:t.id,email:t.email,nom:o.nom,prenom:o.prenom,telephone:h,role:"admin",actif:!0});if(y)throw new Error(y.message||"Erreur cration profil");await G.from("onboarding_progress").insert({organisation_id:x.id,completed:!1});let g=null;try{const{data:m,error:N}=await G.from("demandes_prospects").select("*").eq("email",t.email).order("created_at",{ascending:!1}).limit(1).maybeSingle();!N&&m&&(g=m,await G.from("demandes_prospects").update({organisation_id:x.id}).eq("id",m.id))}catch(m){console.error("Erreur rcupration prospect:",m)}await r(),e("/demo",{state:{request:{organisation_id:x.id,domaines_demandes:(g==null?void 0:g.domaines_demandes)||["ssi"],profil_demande:(g==null?void 0:g.profil_demande)||"mainteneur",nb_utilisateurs:(g==null?void 0:g.nb_utilisateurs)||"1",tarif_calcule:g==null?void 0:g.tarif_calcule,options_selectionnees:(g==null?void 0:g.options_selectionnees)||{}}}})}catch(x){console.error("Erreur submit:",x),l(x.message||"Une erreur est survenue")}finally{n(!1)}},d=()=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 via-orange-500 to-yellow-500 rounded-xl flex items-center justify-center",children:[i.jsx("span",{className:"text-white font-black",children:"E"}),i.jsx("span",{className:"text-white font-black",children:"S"})]}),i.jsx(Bt,{className:"absolute -top-1 -right-1 w-4 h-4 text-orange-500"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-xl font-black text-white",children:"Easy"}),i.jsx("span",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-red-400 to-orange-400",children:" Scurit"})]})]});return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-900 to-black flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-lg",children:[i.jsx("div",{className:"flex justify-center mb-8",children:i.jsx(d,{})}),i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-8",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center",children:i.jsx(ve,{className:"w-5 h-5 text-white"})}),i.jsx("div",{className:"w-12 h-1 bg-green-500 rounded"}),i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-red-500 to-orange-500 flex items-center justify-center text-white font-bold",children:"2"})]}),i.jsx("h1",{className:"text-2xl font-bold text-white text-center mb-2",children:"Compltez votre profil"}),i.jsx("p",{className:"text-gray-400 text-center mb-8",children:"tape 2/2 : Vos informations"}),a&&i.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 rounded-lg p-4 mb-6 flex items-center gap-3",children:[i.jsx(Ai,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),i.jsx("p",{className:"text-red-400 text-sm",children:a})]}),i.jsxs("form",{onSubmit:f,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Prnom ",i.jsx("span",{className:"text-red-400",children:"*"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Lh,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",name:"prenom",value:o.prenom,onChange:u,placeholder:"Jean",className:"w-full bg-gray-800 border border-gray-700 rounded-lg py-3 px-10 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Nom ",i.jsx("span",{className:"text-red-400",children:"*"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Lh,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",name:"nom",value:o.nom,onChange:u,placeholder:"Dupont",className:"w-full bg-gray-800 border border-gray-700 rounded-lg py-3 px-10 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Tlphone ",i.jsx("span",{className:"text-red-400",children:"*"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"tel",name:"telephone",value:o.telephone,onChange:u,placeholder:"06 12 34 56 78",className:"w-full bg-gray-800 border border-gray-700 rounded-lg py-3 px-10 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]}),i.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"10 chiffres"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Nom de l'entreprise ",i.jsx("span",{className:"text-red-400",children:"*"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",name:"entreprise",value:o.entreprise,onChange:u,placeholder:"Ma Socit SARL",className:"w-full bg-gray-800 border border-gray-700 rounded-lg py-3 px-10 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["SIRET ",i.jsx("span",{className:"text-red-400",children:"*"})]}),i.jsx("input",{type:"text",name:"siret",value:o.siret,onChange:u,placeholder:"123 456 789 00012",className:"w-full bg-gray-800 border border-gray-700 rounded-lg py-3 px-4 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"}),i.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"14 chiffres"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Ville ",i.jsx("span",{className:"text-red-400",children:"*"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(hr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",name:"ville",value:o.ville,onChange:u,placeholder:"Paris",className:"w-full bg-gray-800 border border-gray-700 rounded-lg py-3 px-10 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]})]}),i.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 text-white py-3 rounded-lg font-bold transition-all shadow-lg shadow-red-500/25 disabled:opacity-50 flex items-center justify-center gap-2 mt-6",children:s?i.jsxs(i.Fragment,{children:[i.jsx(hs,{className:"w-5 h-5 animate-spin"}),"Cration en cours..."]}):"Terminer l'inscription"})]})]})})};function G1(){const e=nt(),[t]=tv(),[r,s]=b.useState(null);return b.useEffect(()=>{(async()=>{try{const a=t.get("code"),l=t.get("token_hash"),o=t.get("type");if(a){const{error:f}=await G.auth.exchangeCodeForSession(a);if(f)throw f}else if(l&&o){const{error:f}=await G.auth.verifyOtp({token_hash:l,type:o});if(f)throw f}else{e("/login",{replace:!0});return}const{data:{session:c},error:u}=await G.auth.getSession();if(u)throw u;if(!(c!=null&&c.user)){e("/login",{replace:!0});return}e("/complete-profile",{replace:!0})}catch(a){console.error("Erreur dans AuthCallbackPage:",a),s((a==null?void 0:a.message)||"Erreur lors de la validation"),e("/login",{replace:!0})}})()},[e,t]),i.jsxs("div",{style:{padding:24,fontFamily:"system-ui"},children:[i.jsx("h3",{children:"Easy Scurit"}),i.jsx("p",{children:"Validation en cours..."}),r&&i.jsx("p",{style:{color:"crimson"},children:r})]})}const J1=({onComplete:e})=>{const{orgId:t,refreshUserData:r}=Ie(),[s,n]=b.useState(0),[a,l]=b.useState(!1),o=[{id:"profil",label:"Profil entreprise",icon:Ue},{id:"logo",label:"Logo & identit",icon:eg},{id:"client",label:"Premier client",icon:Lt},{id:"site",label:"Premier site",icon:hr},{id:"rapport",label:"Premier rapport",icon:Vt}],c=async()=>{l(!0);try{await G.from("onboarding_progress").upsert({organisation_id:t,onboarding_complete:!0,completed_at:new Date().toISOString()}),r&&await r(),e()}catch(f){console.error("Erreur:",f)}finally{l(!1)}},u=()=>{s<o.length-1?n(s+1):c()};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[i.jsx("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 text-white p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Bienvenue sur Easy Scurit !"}),i.jsx("p",{className:"opacity-90",children:"Configurons votre espace en quelques tapes"})]}),i.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:i.jsx(Ou,{className:"w-6 h-6"})})]})}),i.jsx("div",{className:"px-6 py-4 border-b",children:i.jsx("div",{className:"flex items-center justify-between",children:o.map((f,d)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${d<=s?"bg-red-500 text-white":"bg-gray-200 text-gray-500"}`,children:d<s?i.jsx(ve,{className:"w-5 h-5"}):i.jsx(f.icon,{className:"w-5 h-5"})}),d<o.length-1&&i.jsx("div",{className:`w-12 h-1 mx-2 ${d<s?"bg-red-500":"bg-gray-200"}`})]},f.id))})}),i.jsxs("div",{className:"p-6 min-h-[300px]",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:o[s].label}),i.jsxs("div",{className:"text-center py-12",children:[Ke.createElement(o[s].icon,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Cette tape sera disponible prochainement."}),i.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Vous pouvez passer cette tape pour l'instant."})]})]}),i.jsxs("div",{className:"px-6 py-4 border-t flex items-center justify-between",children:[i.jsxs("button",{onClick:()=>n(Math.max(0,s-1)),disabled:s===0,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Hm,{className:"w-4 h-4"}),"Prcdent"]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:u,className:"px-4 py-2 text-gray-500 hover:text-gray-700",children:"Passer"}),s<o.length-1?i.jsxs("button",{onClick:()=>n(s+1),className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-red-500 to-orange-500 text-white rounded-lg font-semibold hover:from-red-600 hover:to-orange-600",children:["Suivant",i.jsx(vs,{className:"w-4 h-4"})]}):i.jsxs("button",{onClick:c,disabled:a,className:"flex items-center gap-2 px-6 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 disabled:opacity-50",children:[a?"Chargement...":"Terminer",i.jsx(ve,{className:"w-4 h-4"})]})]})]})]})})},X1=()=>{var j,E;const e=nt(),t=bt(),{user:r,userData:s,orgId:n,orgSettings:a,subscription:l}=Ie(),[o,c]=b.useState(!1),[u,f]=b.useState(null),[d,p]=b.useState({clients:0,sites:0,rapports:0,alertes:3}),[h,v]=b.useState(null),x=(j=t.state)==null?void 0:j.subscriptionSuccess,w=(E=t.state)==null?void 0:E.firstMonth;b.useEffect(()=>{n&&(y(),g())},[n]),b.useEffect(()=>{(async()=>{try{if(!(r!=null&&r.email))return;const{data:A,error:S}=await G.from("demandes_prospects").select("*").eq("email",r.email).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(S){console.error("Erreur load prospect:",S);return}v(A||null)}catch(A){console.error("Erreur loadProspect catch:",A)}})()},[r==null?void 0:r.email]);const y=async()=>{try{const[C,A]=await Promise.all([G.from("clients").select("id",{count:"exact"}).eq("organisation_id",n),G.from("sites").select("id",{count:"exact"}).eq("organisation_id",n)]);p({clients:C.count||0,sites:A.count||0,rapports:0,alertes:3})}catch(C){console.error(C)}},g=async()=>{try{const{data:C}=await G.from("onboarding_progress").select("*").eq("organisation_id",n).single();f(C),(!C||!C.completed)&&c(!0)}catch{c(!0)}},m=(l==null?void 0:l.domaines_actifs)||(a==null?void 0:a.modules_actifs)||["ssi"],N={ssi:{label:"SSI (Systme Scurit Incendie)",icon:rr,color:"bg-red-500",route:"/rapports-ssi"},dsf:{label:"Dsenfumage",icon:yl,color:"bg-orange-500",route:"/rapports-dsf"},compartimentage:{label:"Compartimentage",icon:Ue,color:"bg-purple-500",route:"/rapports"},baes:{label:"BAES / clairage scurit",icon:sr,color:"bg-yellow-500",route:"/rapports-baes"},extincteurs:{label:"Extincteurs",icon:Bt,color:"bg-red-600",route:"/rapports-extincteurs"},ria:{label:"RIA",icon:rr,color:"bg-cyan-500",route:"/rapports-ria"},colonnes_seches:{label:"Colonnes sches",icon:tr,color:"bg-gray-500",route:"/rapports-colonnes-seches"}},_=b.useMemo(()=>{var P;if(!h)return null;const C=h.domaines_demandes||["ssi"],A=h.profil_demande||"mainteneur",S=((P=h.options_selectionnees)==null?void 0:P.addons)||[],V=h.nb_utilisateurs||"1",M=Iu(C,V,S,A),B=vl(A,C);return{domains:C,profile:A,addons:S,userCount:V,pricing:M,reports:B}},[h]);return i.jsxs("div",{className:"p-6 space-y-6",children:[x&&i.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl p-4 flex items-center gap-4",children:[i.jsx(ve,{className:"w-8 h-8"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold",children:" Bienvenue sur Easy Scurit !"}),i.jsxs("p",{className:"text-sm opacity-90",children:["Votre abonnement est actif. ",w&&"Profitez de -10% ce mois-ci !"]})]})]}),i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Bonjour ",(s==null?void 0:s.prenom)||"Utilisateur"," "]}),i.jsx("p",{className:"text-gray-500",children:(a==null?void 0:a.nom)||"Votre entreprise"})]}),i.jsxs("button",{onClick:()=>e("/rapports"),className:"flex items-center gap-2 bg-gradient-to-r from-red-500 to-orange-500 text-white px-4 py-2 rounded-lg font-semibold hover:from-red-600 hover:to-orange-600",children:[i.jsx(tt,{className:"w-4 h-4"}),"Nouveau rapport"]})]}),!l&&_&&i.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-2xl p-6 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-white/80 text-sm",children:"Avant paiement"}),i.jsx("h2",{className:"text-2xl font-black",children:"Votre configuration est prte"}),i.jsxs("p",{className:"text-white/90 mt-2",children:["Tarif: ",i.jsxs("span",{className:"font-black",children:[_.pricing.finalPrice,""]})," le 1er mois (-10%), puis ",_.pricing.totalPrice,"/mois"]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[(_.domains||[]).map(C=>i.jsx("span",{className:"px-3 py-1 bg-white/15 rounded-full text-sm font-semibold",children:C.toUpperCase()},C)),i.jsxs("span",{className:"px-3 py-1 bg-white/15 rounded-full text-sm font-semibold",children:[_.userCount," utilisateur(s)"]})]}),i.jsx("p",{className:"text-white/80 text-sm mt-3",children:"Dmo: 3 minutes en lecture seule (sans cration de rapports)"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:()=>e("/demo",{state:{request:h,pricing:_.pricing,reports:_.reports}}),className:"flex items-center gap-2 bg-white text-blue-700 px-5 py-3 rounded-xl font-bold hover:bg-gray-100 transition",children:[i.jsx(xl,{className:"w-5 h-5"}),"Lancer la dmo"]}),i.jsxs("button",{onClick:()=>e("/subscribe",{state:{request:h,pricing:_.pricing,reports:_.reports}}),className:"flex items-center gap-2 bg-gradient-to-r from-red-500 to-orange-500 px-5 py-3 rounded-xl font-bold hover:from-red-600 hover:to-orange-600 transition shadow-lg",children:[i.jsx(sr,{className:"w-5 h-5"}),"Passer au paiement"]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500 text-sm",children:"Clients"}),i.jsx("p",{className:"text-2xl font-bold",children:d.clients})]}),i.jsx(Ue,{className:"w-8 h-8 text-blue-500"})]})}),i.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500 text-sm",children:"Sites"}),i.jsx("p",{className:"text-2xl font-bold",children:d.sites})]}),i.jsx(Lt,{className:"w-8 h-8 text-green-500"})]})}),i.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500 text-sm",children:"Rapports"}),i.jsx("p",{className:"text-2xl font-bold",children:d.rapports})]}),i.jsx(Vt,{className:"w-8 h-8 text-purple-500"})]})}),i.jsx("div",{className:"bg-white rounded-xl p-4 border border-red-200 bg-red-50",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-red-600 text-sm",children:"Alertes"}),i.jsx("p",{className:"text-2xl font-bold text-red-700",children:d.alertes})]}),i.jsx(mn,{className:"w-8 h-8 text-red-500"})]})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Vos modules actifs"}),i.jsxs("p",{className:"text-gray-500 text-sm",children:[m.length," domaine(s) selon votre abonnement"]})]}),i.jsx("button",{onClick:()=>e("/settings"),className:"text-sm text-red-500 hover:text-red-600 font-medium",children:"Grer les modules "})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(C=>{const A=N[C];if(!A)return null;const S=A.icon;return i.jsxs("button",{onClick:()=>e(A.route),className:"flex items-center gap-4 p-4 bg-gray-50 hover:bg-gray-100 rounded-xl transition-all text-left group",children:[i.jsx("div",{className:`w-12 h-12 ${A.color} rounded-xl flex items-center justify-center`,children:i.jsx(S,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-900",children:A.label}),i.jsx("p",{className:"text-sm text-gray-500",children:"Crer un rapport"})]}),i.jsx(vs,{className:"w-5 h-5 text-gray-400 group-hover:text-gray-600"})]},C)})}),m.length===0&&i.jsx("div",{className:"text-center py-8 text-gray-500",children:i.jsx("p",{children:"Aucun module actif. Souscrivez pour accder aux rapports."})})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsx("h2",{className:"font-bold text-gray-900 mb-4",children:"Actions rapides"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:()=>e("/clients"),className:"w-full flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 text-left",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(Ue,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:"Ajouter un client"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Nouveau client ou import Excel"})]})]}),i.jsxs("button",{onClick:()=>e("/planning"),className:"w-full flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 text-left",children:[i.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:i.jsx(_i,{className:"w-5 h-5 text-green-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:"Planifier une intervention"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Maintenance, SAV, Travaux"})]})]}),i.jsxs("button",{onClick:()=>e("/settings"),className:"w-full flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 text-left",children:[i.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center",children:i.jsx(tr,{className:"w-5 h-5 text-gray-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:"Paramtres"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Configurer votre compte"})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsx("h2",{className:"font-bold text-gray-900 mb-4",children:"Prochaines chances"}),i.jsxs("div",{className:"text-center py-8",children:[i.jsx(_i,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),i.jsx("p",{className:"text-gray-500",children:"Aucune chance  venir"})]})]})]}),u&&!u.completed&&i.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-gray-900",children:"Finalisez votre configuration"}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Suivez lonboarding pour paramtrer votre entreprise et commencer rapidement."})]}),i.jsx("button",{onClick:()=>c(!0),className:"bg-gradient-to-r from-red-500 to-orange-500 text-white px-4 py-2 rounded-lg font-semibold hover:from-red-600 hover:to-orange-600",children:"Continuer "})]})}),o&&i.jsx(J1,{orgId:n,onClose:()=>c(!1),onComplete:()=>{c(!1),g()}})]})},Ee=({children:e,className:t="",padding:r="normal",onClick:s,hover:n=!0})=>{const a={none:"",small:"p-3",normal:"p-4",large:"p-6"};return i.jsx("div",{className:`bg-white rounded-xl border border-gray-200 ${a[r]} ${n?"hover:shadow-lg hover:border-gray-300 transition-all cursor-pointer":""} ${t}`,onClick:s,children:e})},Z=({children:e,variant:t="primary",size:r="md",icon:s,iconPosition:n="left",loading:a=!1,disabled:l=!1,className:o="",onClick:c,type:u="button"})=>{const f={primary:"bg-gradient-to-r from-red-500 to-orange-500 text-white hover:from-red-600 hover:to-orange-600 shadow-lg shadow-red-500/25",secondary:"bg-gray-100 text-gray-700 hover:bg-gray-200",outline:"border-2 border-gray-300 text-gray-700 hover:border-gray-400 hover:bg-gray-50",ghost:"text-gray-600 hover:bg-gray-100",danger:"bg-red-500 text-white hover:bg-red-600"},d={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"};return i.jsxs("button",{type:u,onClick:c,disabled:l||a,className:`inline-flex items-center justify-center gap-2 font-semibold rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed ${f[t]} ${d[r]} ${o}`,children:[a&&i.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),s&&n==="left"&&!a&&s,e,s&&n==="right"&&s]})},je=({label:e,error:t,icon:r,className:s="",...n})=>i.jsxs("div",{className:s,children:[e&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),i.jsxs("div",{className:"relative",children:[r&&i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:r}),i.jsx("input",{className:`w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all ${r?"pl-10":""} ${t?"border-red-500":""}`,...n})]}),t&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:t})]}),qr=({label:e,options:t=[],error:r,className:s="",...n})=>i.jsxs("div",{className:s,children:[e&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),i.jsx("select",{className:`w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all ${r?"border-red-500":""}`,...n,children:t.map(a=>i.jsx("option",{value:a.value,children:a.label},a.value))}),r&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:r})]}),Je=({children:e,variant:t="default",size:r="md",className:s=""})=>{const n={default:"bg-gray-100 text-gray-700",primary:"bg-red-100 text-red-700",success:"bg-green-100 text-green-700",warning:"bg-yellow-100 text-yellow-700",danger:"bg-red-100 text-red-700",info:"bg-blue-100 text-blue-700"},a={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5"};return i.jsx("span",{className:`inline-flex items-center font-medium rounded-full ${n[t]} ${a[r]} ${s}`,children:e})},ln=({isOpen:e,onClose:t,title:r,children:s,size:n="md",footer:a})=>{if(!e)return null;const l={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-6xl"};return i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[i.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:t}),i.jsxs("div",{className:`relative bg-white rounded-2xl shadow-2xl w-full ${l[n]} max-h-[90vh] overflow-hidden`,children:[r&&i.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:r}),i.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"px-6 py-4 overflow-y-auto max-h-[calc(90vh-140px)]",children:s}),a&&i.jsx("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-end gap-3",children:a})]})]})},Ns=({icon:e,title:t,description:r,action:s})=>i.jsxs("div",{className:"text-center py-12",children:[e&&i.jsx("div",{className:"text-gray-300 mb-4 flex justify-center",children:e}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:t}),r&&i.jsx("p",{className:"text-gray-500 mb-4",children:r}),s]}),et=({className:e="",variant:t="text"})=>{const r={text:"h-4 rounded",title:"h-6 rounded",avatar:"h-10 w-10 rounded-full",card:"h-32 rounded-xl",button:"h-10 w-24 rounded-lg"};return i.jsx("div",{className:`bg-gray-200 animate-pulse ${r[t]} ${e}`})},ng=({tabs:e,activeTab:t,onChange:r,className:s=""})=>i.jsx("div",{className:`flex space-x-1 bg-gray-100 p-1 rounded-lg ${s}`,children:e.map(n=>i.jsx("button",{onClick:()=>r(n.id),className:`flex-1 px-4 py-2 text-sm font-medium rounded-md transition-all ${t===n.id?"bg-white text-gray-900 shadow":"text-gray-600 hover:text-gray-900"}`,children:n.label},n.id))}),Q1=()=>{const[e,t]=b.useState([]),[r,s]=b.useState(!0),[n,a]=b.useState(""),[l,o]=b.useState("cards"),[c,u]=b.useState({key:"raisonSociale",direction:"asc"}),[f,d]=b.useState(null),[p,h]=b.useState(null),[v,x]=b.useState(null),[w,y]=b.useState({raisonSociale:"",siret:"",email:"",telephone:"",adresse:"",codePostal:"",ville:"",pays:"France",type:"professionnel",notes:""}),g=()=>{if(e.length===0)return"001";const P=Math.max(...e.map(J=>parseInt(J.code,10)||0));return String(P+1).padStart(3,"0")};b.useEffect(()=>{setTimeout(()=>{t([{id:"1",code:"001",raisonSociale:"Dupont Industries",siret:"123 456 789 00012",email:"contact@dupont-industries.fr",telephone:"01 23 45 67 89",adresse:"15 rue de la Rpublique",codePostal:"75001",ville:"Paris",pays:"France",type:"professionnel",sitesCount:5,devisEnCours:3,facturesImpayees:1,caTotal:45600,dernierContact:"2025-12-10"},{id:"2",code:"002",raisonSociale:"Martin SAS",siret:"987 654 321 00034",email:"info@martin-sas.com",telephone:"04 56 78 90 12",adresse:"8 avenue des Champs",codePostal:"69001",ville:"Lyon",pays:"France",type:"professionnel",sitesCount:12,devisEnCours:0,facturesImpayees:0,caTotal:128500,dernierContact:"2025-12-15"},{id:"3",code:"003",raisonSociale:"Carrefour Lyon",siret:"456 789 123 00056",email:"technique@carrefour.fr",telephone:"04 78 90 12 34",adresse:"120 boulevard de la Croix-Rousse",codePostal:"69004",ville:"Lyon",pays:"France",type:"professionnel",sitesCount:3,devisEnCours:2,facturesImpayees:2,caTotal:89200,dernierContact:"2025-12-14"},{id:"4",code:"004",raisonSociale:"Boulangerie Petit Jean",siret:"321 654 987 00078",email:"petitjean@boulangerie.fr",telephone:"02 34 56 78 90",adresse:"3 place du March",codePostal:"44000",ville:"Nantes",pays:"France",type:"professionnel",sitesCount:1,devisEnCours:1,facturesImpayees:0,caTotal:12400,dernierContact:"2025-12-08"}]),s(!1)},800)},[]);const m=e.filter(P=>P.raisonSociale.toLowerCase().includes(n.toLowerCase())||P.code.toLowerCase().includes(n.toLowerCase())||P.ville.toLowerCase().includes(n.toLowerCase())),N=[...m].sort((P,J)=>P[c.key]<J[c.key]?c.direction==="asc"?-1:1:P[c.key]>J[c.key]?c.direction==="asc"?1:-1:0),_=P=>{u(J=>({key:P,direction:J.key===P&&J.direction==="asc"?"desc":"asc"}))},j=({column:P})=>c.key!==P?i.jsx(jc,{className:"w-4 h-4 text-gray-300"}):c.direction==="asc"?i.jsx(jc,{className:"w-4 h-4 text-blue-500"}):i.jsx(Km,{className:"w-4 h-4 text-blue-500"}),E=()=>{y({raisonSociale:"",siret:"",email:"",telephone:"",adresse:"",codePostal:"",ville:"",pays:"France",type:"professionnel",notes:""}),h("create")},C=P=>{d(P),y({raisonSociale:P.raisonSociale,siret:P.siret,email:P.email,telephone:P.telephone,adresse:P.adresse,codePostal:P.codePostal,ville:P.ville,pays:P.pays,type:P.type,notes:P.notes||""}),h("edit")},A=P=>{d(P),h("view")},S=()=>{h(null),d(null)},V=()=>{if(p==="create"){const P=g();t([...e,{id:Date.now().toString(),code:P,...w,sitesCount:0,devisEnCours:0,facturesImpayees:0,caTotal:0,dernierContact:new Date().toISOString().split("T")[0]}])}else t(e.map(P=>P.id===f.id?{...P,...w}:P));S()},M=P=>{t(e.filter(J=>J.id!==P.id)),x(null)},B=({client:P})=>i.jsxs(Ee,{className:"group relative overflow-hidden",padding:"none",onClick:()=>A(P),children:[i.jsx("div",{className:`h-1.5 bg-gradient-to-r ${P.facturesImpayees>0?"from-red-500 to-rose-500":"from-blue-500 to-indigo-500"}`}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold text-sm shadow-lg shadow-blue-500/30",children:P.code}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:P.raisonSociale}),i.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[i.jsx(hr,{className:"w-3 h-3"}),P.ville]})]})]}),i.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[i.jsx("button",{onClick:J=>{J.stopPropagation(),C(P)},className:"p-1.5 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-blue-600",children:i.jsx(oo,{className:"w-3.5 h-3.5"})}),i.jsx("button",{onClick:J=>{J.stopPropagation(),x(P)},className:"p-1.5 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-red-600",children:i.jsx(Dh,{className:"w-3.5 h-3.5"})})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[i.jsxs("div",{className:"text-center p-1.5 bg-gray-50 rounded-lg",children:[i.jsx("p",{className:"text-sm font-bold text-gray-900",children:P.sitesCount}),i.jsx("p",{className:"text-[10px] text-gray-500",children:"Sites"})]}),i.jsxs("div",{className:"text-center p-1.5 bg-gray-50 rounded-lg",children:[i.jsx("p",{className:"text-sm font-bold text-gray-900",children:P.devisEnCours}),i.jsx("p",{className:"text-[10px] text-gray-500",children:"Devis"})]}),i.jsxs("div",{className:"text-center p-1.5 bg-gray-50 rounded-lg",children:[i.jsx("p",{className:`text-sm font-bold ${P.facturesImpayees>0?"text-red-600":"text-gray-900"}`,children:P.facturesImpayees}),i.jsx("p",{className:"text-[10px] text-gray-500",children:"Impayes"})]})]}),i.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(_c,{className:"w-3.5 h-3.5 text-emerald-500"}),i.jsxs("span",{className:"font-semibold text-gray-900 text-sm",children:[P.caTotal.toLocaleString(),""]})]}),i.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(P.dernierContact).toLocaleDateString("fr-FR")})]})]})]});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 shadow-lg shadow-blue-500/30",children:i.jsx(Lt,{className:"w-6 h-6 text-white"})}),"Clients Payeurs"]}),i.jsx("p",{className:"text-gray-500 mt-1",children:"Grez vos clients et leurs informations"})]}),i.jsx(Z,{variant:"primary",icon:tt,onClick:E,children:"Nouveau Client"})]}),i.jsx(Ee,{padding:"md",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Oi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Rechercher un client...",value:n,onChange:P=>a(P.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 border-2 border-transparent rounded-xl text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:bg-white focus:ring-4 focus:ring-blue-500/10 transition-all duration-200 focus:outline-none"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("div",{className:"flex bg-gray-100 rounded-xl p-1",children:[i.jsx("button",{onClick:()=>o("cards"),className:`p-2 rounded-lg transition-all ${l==="cards"?"bg-white shadow text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:i.jsx(Ym,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>o("table"),className:`p-2 rounded-lg transition-all ${l==="table"?"bg-white shadow text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:i.jsx(Zm,{className:"w-5 h-5"})})]}),i.jsx(Z,{variant:"secondary",icon:A1,children:"Filtres"}),i.jsx(Z,{variant:"secondary",icon:Au,children:"Exporter"})]})]})}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs(Ee,{padding:"md",className:"text-center",children:[i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.length}),i.jsx("p",{className:"text-sm text-gray-500",children:"Total clients"})]}),i.jsxs(Ee,{padding:"md",className:"text-center",children:[i.jsx("p",{className:"text-3xl font-bold text-blue-600",children:e.reduce((P,J)=>P+J.sitesCount,0)}),i.jsx("p",{className:"text-sm text-gray-500",children:"Sites actifs"})]}),i.jsxs(Ee,{padding:"md",className:"text-center",children:[i.jsx("p",{className:"text-3xl font-bold text-amber-600",children:e.reduce((P,J)=>P+J.devisEnCours,0)}),i.jsx("p",{className:"text-sm text-gray-500",children:"Devis en cours"})]}),i.jsxs(Ee,{padding:"md",className:"text-center",children:[i.jsxs("p",{className:"text-3xl font-bold text-emerald-600",children:[(e.reduce((P,J)=>P+J.caTotal,0)/1e3).toFixed(1),"k"]}),i.jsx("p",{className:"text-sm text-gray-500",children:"CA total"})]})]}),r?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(P=>i.jsx(Ee,{padding:"md",children:i.jsx(et,{className:"h-32"})},P))}):m.length===0?i.jsx(Ns,{icon:Lt,title:"Aucun client trouv",description:n?"Aucun client ne correspond  votre recherche":"Commencez par ajouter votre premier client",action:i.jsx(Z,{variant:"primary",icon:tt,onClick:E,children:"Ajouter un client"})}):l==="cards"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:N.map(P=>i.jsx(B,{client:P},P.id))}):i.jsx(Ee,{padding:"none",className:"overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{onClick:()=>_("code"),className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100",children:i.jsxs("div",{className:"flex items-center gap-1",children:["N ",i.jsx(j,{column:"code"})]})}),i.jsx("th",{onClick:()=>_("raisonSociale"),className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100",children:i.jsxs("div",{className:"flex items-center gap-1",children:["Raison Sociale ",i.jsx(j,{column:"raisonSociale"})]})}),i.jsx("th",{onClick:()=>_("ville"),className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100",children:i.jsxs("div",{className:"flex items-center gap-1",children:["Ville ",i.jsx(j,{column:"ville"})]})}),i.jsx("th",{onClick:()=>_("sitesCount"),className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100",children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Sites ",i.jsx(j,{column:"sitesCount"})]})}),i.jsx("th",{onClick:()=>_("devisEnCours"),className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100",children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Devis ",i.jsx(j,{column:"devisEnCours"})]})}),i.jsx("th",{onClick:()=>_("facturesImpayees"),className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100",children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Impayes ",i.jsx(j,{column:"facturesImpayees"})]})}),i.jsx("th",{onClick:()=>_("caTotal"),className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100",children:i.jsxs("div",{className:"flex items-center justify-end gap-1",children:["CA Total ",i.jsx(j,{column:"caTotal"})]})}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:N.map(P=>i.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>A(P),children:[i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:"inline-flex items-center justify-center w-10 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 text-white font-bold text-xs",children:P.code})}),i.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:P.raisonSociale}),i.jsx("td",{className:"px-4 py-3 text-gray-600",children:P.ville}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx(Je,{variant:"default",children:P.sitesCount})}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx(Je,{variant:P.devisEnCours>0?"warning":"default",children:P.devisEnCours})}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx(Je,{variant:P.facturesImpayees>0?"danger":"success",children:P.facturesImpayees})}),i.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-gray-900",children:[P.caTotal.toLocaleString(),""]}),i.jsx("td",{className:"px-4 py-3 text-center",onClick:J=>J.stopPropagation(),children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx("button",{onClick:()=>C(P),className:"p-1.5 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-blue-600",children:i.jsx(oo,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>x(P),className:"p-1.5 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-red-600",children:i.jsx(Dh,{className:"w-4 h-4"})})]})})]},P.id))})]})})}),i.jsx(ln,{isOpen:p==="create"||p==="edit",onClose:S,title:p==="create"?"Nouveau Client":"Modifier Client",subtitle:p==="create"?`Code client: ${g()} (auto)`:`Code: ${f==null?void 0:f.code}`,icon:Lt,iconColor:"blue",size:"lg",footer:i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(Z,{variant:"ghost",onClick:S,children:"Annuler"}),i.jsx(Z,{variant:"primary",onClick:V,children:p==="create"?"Crer":"Enregistrer"})]}),children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(je,{label:"Raison sociale",placeholder:"Nom de l'entreprise",value:w.raisonSociale,onChange:P=>y({...w,raisonSociale:P.target.value}),required:!0,className:"md:col-span-2"}),i.jsx(je,{label:"SIRET",placeholder:"123 456 789 00012",value:w.siret,onChange:P=>y({...w,siret:P.target.value})}),i.jsx(qr,{label:"Type",value:w.type,onChange:P=>y({...w,type:P.target.value}),options:[{value:"professionnel",label:"Professionnel"},{value:"particulier",label:"Particulier"},{value:"administration",label:"Administration"}]}),i.jsx(je,{label:"Email",type:"email",placeholder:"contact@entreprise.fr",value:w.email,onChange:P=>y({...w,email:P.target.value}),icon:ws,required:!0}),i.jsx(je,{label:"Tlphone",placeholder:"01 23 45 67 89",value:w.telephone,onChange:P=>y({...w,telephone:P.target.value}),icon:bs}),i.jsx(je,{label:"Adresse",placeholder:"15 rue de la Rpublique",value:w.adresse,onChange:P=>y({...w,adresse:P.target.value}),className:"md:col-span-2"}),i.jsx(je,{label:"Code postal",placeholder:"75001",value:w.codePostal,onChange:P=>y({...w,codePostal:P.target.value})}),i.jsx(je,{label:"Ville",placeholder:"Paris",value:w.ville,onChange:P=>y({...w,ville:P.target.value})})]})}),i.jsx(ln,{isOpen:p==="view",onClose:S,title:f==null?void 0:f.raisonSociale,subtitle:`Client N ${f==null?void 0:f.code}`,icon:Ue,iconColor:"blue",size:"xl",footer:i.jsxs("div",{className:"flex justify-between",children:[i.jsx(Z,{variant:"ghost",onClick:S,children:"Fermer"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(Z,{variant:"secondary",icon:Vt,children:"Nouveau Devis"}),i.jsx(Z,{variant:"primary",icon:oo,onClick:()=>{S(),C(f)},children:"Modifier"})]})]}),children:f&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl p-4 text-white",children:[i.jsx(Ue,{className:"w-6 h-6 mb-2 opacity-80"}),i.jsx("p",{className:"text-3xl font-bold",children:f.sitesCount}),i.jsx("p",{className:"text-sm opacity-80",children:"Sites"})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-violet-600 rounded-2xl p-4 text-white",children:[i.jsx(Vt,{className:"w-6 h-6 mb-2 opacity-80"}),i.jsx("p",{className:"text-3xl font-bold",children:f.devisEnCours}),i.jsx("p",{className:"text-sm opacity-80",children:"Devis en cours"})]}),i.jsxs("div",{className:`rounded-2xl p-4 text-white ${f.facturesImpayees>0?"bg-gradient-to-br from-red-500 to-rose-600":"bg-gradient-to-br from-emerald-500 to-green-600"}`,children:[i.jsx(an,{className:"w-6 h-6 mb-2 opacity-80"}),i.jsx("p",{className:"text-3xl font-bold",children:f.facturesImpayees}),i.jsx("p",{className:"text-sm opacity-80",children:"Factures impayes"})]}),i.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl p-4 text-white",children:[i.jsx(_c,{className:"w-6 h-6 mb-2 opacity-80"}),i.jsxs("p",{className:"text-3xl font-bold",children:[(f.caTotal/1e3).toFixed(1),"k"]}),i.jsx("p",{className:"text-sm opacity-80",children:"CA total"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Coordonnes"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[i.jsx(ws,{className:"w-4 h-4"}),i.jsx("span",{children:f.email})]}),i.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[i.jsx(bs,{className:"w-4 h-4"}),i.jsx("span",{children:f.telephone})]}),i.jsxs("div",{className:"flex items-start gap-3 text-gray-600",children:[i.jsx(hr,{className:"w-4 h-4 mt-0.5"}),i.jsxs("span",{children:[f.adresse,i.jsx("br",{}),f.codePostal," ",f.ville]})]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Informations lgales"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsx("span",{className:"text-gray-500",children:"SIRET"}),i.jsx("span",{className:"font-mono text-gray-900",children:f.siret})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsx("span",{className:"text-gray-500",children:"Type"}),i.jsx(Je,{variant:"primary",children:f.type})]})]})]})]}),i.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-100",children:[i.jsx(Z,{variant:"secondary",icon:Ue,fullWidth:!0,children:"Voir les sites"}),i.jsx(Z,{variant:"secondary",icon:Vt,fullWidth:!0,children:"Historique devis"}),i.jsx(Z,{variant:"secondary",icon:an,fullWidth:!0,children:"Historique factures"})]})]})}),i.jsx(ln,{isOpen:v!==null,onClose:()=>x(null),title:"Supprimer ce client ?",subtitle:"Cette action est irrversible",icon:Ai,iconColor:"red",size:"sm",footer:i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(Z,{variant:"ghost",onClick:()=>x(null),children:"Annuler"}),i.jsx(Z,{variant:"danger",onClick:()=>M(v),children:"Supprimer"})]}),children:i.jsxs("p",{className:"text-gray-600",children:["Vous tes sur le point de supprimer le client N ",i.jsx("strong",{children:v==null?void 0:v.code})," - ",i.jsx("strong",{children:v==null?void 0:v.raisonSociale}),". Tous les sites et donnes associs seront galement supprims."]})})]})},Y1=()=>{nt();const{orgId:e}=Ie(),[t,r]=b.useState([]),[s,n]=b.useState([]),[a,l]=b.useState(!0),[o,c]=b.useState(""),[u,f]=b.useState("cards"),[d,p]=b.useState(null),[h,v]=b.useState(null),[x,w]=b.useState({client_id:"",nom:"",adresse:"",code_postal:"",ville:"",type_erp:"",categorie_erp:"",contact_nom:"",contact_telephone:"",acces_instructions:"",domaines_actifs:[]}),y=["J","L","M","N","O","P","R","S","T","U","V","W","X","Y"],g=[{id:"ssi",label:"SSI"},{id:"dsf",label:"Dsenfumage"},{id:"baes",label:"BAES"},{id:"extincteurs",label:"Extincteurs"},{id:"ria",label:"RIA"},{id:"compartimentage",label:"Compartimentage"},{id:"colonnes_seches",label:"Colonnes sches"}];b.useEffect(()=>{m()},[e]);const m=async()=>{if(e)try{const[S,V]=await Promise.all([G.from("sites").select("*, clients(raison_sociale)").eq("organisation_id",e).order("nom"),G.from("clients").select("id, raison_sociale").eq("organisation_id",e).order("raison_sociale")]);r(S.data||[]),n(V.data||[])}catch(S){console.error("Erreur:",S)}finally{l(!1)}},N=t.filter(S=>{var V,M,B,P;return((V=S.nom)==null?void 0:V.toLowerCase().includes(o.toLowerCase()))||((M=S.ville)==null?void 0:M.toLowerCase().includes(o.toLowerCase()))||((P=(B=S.clients)==null?void 0:B.raison_sociale)==null?void 0:P.toLowerCase().includes(o.toLowerCase()))}),_=()=>{w({client_id:"",nom:"",adresse:"",code_postal:"",ville:"",type_erp:"",categorie_erp:"",contact_nom:"",contact_telephone:"",acces_instructions:"",domaines_actifs:[]}),p("create")},j=S=>{v(S),w({client_id:S.client_id||"",nom:S.nom||"",adresse:S.adresse||"",code_postal:S.code_postal||"",ville:S.ville||"",type_erp:S.type_erp||"",categorie_erp:S.categorie_erp||"",contact_nom:S.contact_nom||"",contact_telephone:S.contact_telephone||"",acces_instructions:S.acces_instructions||"",domaines_actifs:S.domaines_actifs||[]}),p("edit")},E=async()=>{try{d==="create"?await G.from("sites").insert({...x,organisation_id:e}):await G.from("sites").update(x).eq("id",h.id),p(null),m()}catch(S){console.error("Erreur:",S)}},C=async S=>{if(confirm(`Supprimer le site "${S.nom}" ?`))try{await G.from("sites").delete().eq("id",S.id),m()}catch(V){console.error("Erreur:",V)}},A=S=>{w(V=>({...V,domaines_actifs:V.domaines_actifs.includes(S)?V.domaines_actifs.filter(M=>M!==S):[...V.domaines_actifs,S]}))};return a?i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsx(et,{variant:"title",className:"w-48"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(S=>i.jsx(et,{variant:"card"},S))})]}):i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Sites"}),i.jsxs("p",{className:"text-gray-500",children:[t.length," site(s) enregistr(s)"]})]}),i.jsx(Z,{onClick:_,icon:i.jsx(tt,{className:"w-4 h-4"}),children:"Nouveau site"})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Oi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Rechercher un site...",value:o,onChange:S=>c(S.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>f("cards"),className:`p-2.5 rounded-lg ${u==="cards"?"bg-red-500 text-white":"bg-gray-100 text-gray-600"}`,children:i.jsx(Ym,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>f("list"),className:`p-2.5 rounded-lg ${u==="list"?"bg-red-500 text-white":"bg-gray-100 text-gray-600"}`,children:i.jsx(Zm,{className:"w-5 h-5"})})]})]}),N.length===0?i.jsx(Ns,{icon:i.jsx(hr,{className:"w-16 h-16"}),title:"Aucun site",description:"Crez votre premier site pour commencer",action:i.jsx(Z,{onClick:_,icon:i.jsx(tt,{className:"w-4 h-4"}),children:"Nouveau site"})}):u==="cards"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(S=>{var V,M;return i.jsxs(Ee,{padding:"none",onClick:()=>j(S),children:[i.jsx("div",{className:"h-1.5 bg-gradient-to-r from-green-500 to-emerald-500"}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center text-white shadow-lg shadow-green-500/30",children:i.jsx(hr,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:S.nom}),i.jsx("p",{className:"text-sm text-gray-500",children:(V=S.clients)==null?void 0:V.raison_sociale})]})]}),S.type_erp&&i.jsxs(Je,{variant:"info",size:"sm",children:["ERP ",S.type_erp]})]}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(hr,{className:"w-4 h-4 text-gray-400"}),i.jsxs("span",{children:[S.adresse,", ",S.code_postal," ",S.ville]})]}),S.contact_telephone&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(bs,{className:"w-4 h-4 text-gray-400"}),i.jsx("span",{children:S.contact_telephone})]})]}),((M=S.domaines_actifs)==null?void 0:M.length)>0&&i.jsx("div",{className:"flex flex-wrap gap-1",children:S.domaines_actifs.map(B=>i.jsx(Je,{size:"sm",variant:"default",children:B.toUpperCase()},B))})]})]},S.id)})}):i.jsx(Ee,{padding:"none",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Site"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ville"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ERP"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Domaines"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:N.map(S=>{var V,M;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:S.nom}),i.jsx("td",{className:"px-4 py-3 text-gray-600",children:(V=S.clients)==null?void 0:V.raison_sociale}),i.jsx("td",{className:"px-4 py-3 text-gray-600",children:S.ville}),i.jsx("td",{className:"px-4 py-3",children:S.type_erp&&i.jsxs(Je,{size:"sm",children:["ERP ",S.type_erp]})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("div",{className:"flex gap-1",children:(M=S.domaines_actifs)==null?void 0:M.map(B=>i.jsx(Je,{size:"sm",children:B},B))})}),i.jsxs("td",{className:"px-4 py-3 text-right",children:[i.jsx("button",{onClick:()=>j(S),className:"text-blue-600 hover:text-blue-800 mr-2",children:"Modifier"}),i.jsx("button",{onClick:()=>C(S),className:"text-red-600 hover:text-red-800",children:"Supprimer"})]})]},S.id)})})]})}),i.jsx(ln,{isOpen:!!d,onClose:()=>p(null),title:d==="create"?"Nouveau site":"Modifier le site",size:"lg",footer:i.jsxs(i.Fragment,{children:[i.jsx(Z,{variant:"ghost",onClick:()=>p(null),children:"Annuler"}),i.jsx(Z,{onClick:E,children:d==="create"?"Crer":"Enregistrer"})]}),children:i.jsxs("div",{className:"space-y-4",children:[i.jsx(qr,{label:"Client *",value:x.client_id,onChange:S=>w({...x,client_id:S.target.value}),options:[{value:"",label:"Slectionner un client"},...s.map(S=>({value:S.id,label:S.raison_sociale}))]}),i.jsx(je,{label:"Nom du site *",value:x.nom,onChange:S=>w({...x,nom:S.target.value})}),i.jsx(je,{label:"Adresse",value:x.adresse,onChange:S=>w({...x,adresse:S.target.value})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(je,{label:"Code postal",value:x.code_postal,onChange:S=>w({...x,code_postal:S.target.value})}),i.jsx(je,{label:"Ville",value:x.ville,onChange:S=>w({...x,ville:S.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(qr,{label:"Type ERP",value:x.type_erp,onChange:S=>w({...x,type_erp:S.target.value}),options:[{value:"",label:"-"},...y.map(S=>({value:S,label:`Type ${S}`}))]}),i.jsx(qr,{label:"Catgorie",value:x.categorie_erp,onChange:S=>w({...x,categorie_erp:S.target.value}),options:[{value:"",label:"-"},...["1","2","3","4","5"].map(S=>({value:S,label:`Catgorie ${S}`}))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(je,{label:"Contact sur site",value:x.contact_nom,onChange:S=>w({...x,contact_nom:S.target.value})}),i.jsx(je,{label:"Tlphone contact",value:x.contact_telephone,onChange:S=>w({...x,contact_telephone:S.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Domaines actifs"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(S=>i.jsx("button",{type:"button",onClick:()=>A(S.id),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${x.domaines_actifs.includes(S.id)?"bg-red-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:S.label},S.id))})]})]})})]})},Z1=()=>{const{orgId:e}=Ie(),[t,r]=b.useState([]),[s,n]=b.useState(!0),[a,l]=b.useState(""),[o,c]=b.useState(null),[u,f]=b.useState(null),[d,p]=b.useState({nom:"",prenom:"",email:"",telephone:"",matricule:"",type_contrat:"cdi",couleur_planning:"#3B82F6",actif:!0});b.useEffect(()=>{h()},[e]);const h=async()=>{if(e)try{const{data:m}=await G.from("techniciens").select("*").eq("organisation_id",e).order("nom");r(m||[])}catch(m){console.error("Erreur:",m)}finally{n(!1)}},v=t.filter(m=>{var N,_;return((N=m.nom)==null?void 0:N.toLowerCase().includes(a.toLowerCase()))||((_=m.prenom)==null?void 0:_.toLowerCase().includes(a.toLowerCase()))}),x=()=>{p({nom:"",prenom:"",email:"",telephone:"",matricule:"",type_contrat:"cdi",couleur_planning:"#3B82F6",actif:!0}),c("create")},w=m=>{f(m),p({nom:m.nom||"",prenom:m.prenom||"",email:m.email||"",telephone:m.telephone||"",matricule:m.matricule||"",type_contrat:m.type_contrat||"cdi",couleur_planning:m.couleur_planning||"#3B82F6",actif:m.actif}),c("edit")},y=async()=>{try{o==="create"?await G.from("techniciens").insert({...d,organisation_id:e}):await G.from("techniciens").update(d).eq("id",u.id),c(null),h()}catch(m){console.error("Erreur:",m)}},g=async m=>{if(confirm(`Supprimer ${m.prenom} ${m.nom} ?`))try{await G.from("techniciens").delete().eq("id",m.id),h()}catch(N){console.error("Erreur:",N)}};return s?i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsx(et,{variant:"title",className:"w-48"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(m=>i.jsx(et,{variant:"card"},m))})]}):i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Techniciens"}),i.jsxs("p",{className:"text-gray-500",children:[t.length," technicien(s)"]})]}),i.jsx(Z,{onClick:x,icon:i.jsx(tt,{className:"w-4 h-4"}),children:"Nouveau technicien"})]}),i.jsxs("div",{className:"relative max-w-md",children:[i.jsx(Oi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Rechercher...",value:a,onChange:m=>l(m.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]}),v.length===0?i.jsx(Ns,{icon:i.jsx(tg,{className:"w-16 h-16"}),title:"Aucun technicien",description:"Ajoutez votre premier technicien",action:i.jsx(Z,{onClick:x,icon:i.jsx(tt,{className:"w-4 h-4"}),children:"Ajouter"})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(m=>{var N,_;return i.jsxs(Ee,{padding:"normal",onClick:()=>w(m),children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsxs("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-lg",style:{backgroundColor:m.couleur_planning},children:[(N=m.prenom)==null?void 0:N[0],(_=m.nom)==null?void 0:_[0]]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("h3",{className:"font-semibold text-gray-900",children:[m.prenom," ",m.nom]}),i.jsx(Je,{variant:m.actif?"success":"default",size:"sm",children:m.actif?"Actif":"Inactif"})]}),i.jsx("p",{className:"text-sm text-gray-500",children:m.matricule||"Sans matricule"}),i.jsxs("div",{className:"mt-3 space-y-1 text-sm text-gray-600",children:[m.telephone&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(bs,{className:"w-4 h-4 text-gray-400"}),i.jsx("span",{children:m.telephone})]}),m.email&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ws,{className:"w-4 h-4 text-gray-400"}),i.jsx("span",{children:m.email})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-3 border-t",children:[i.jsx("button",{onClick:j=>{j.stopPropagation(),w(m)},className:"text-blue-600 hover:text-blue-800 text-sm",children:"Modifier"}),i.jsx("button",{onClick:j=>{j.stopPropagation(),g(m)},className:"text-red-600 hover:text-red-800 text-sm",children:"Supprimer"})]})]},m.id)})}),i.jsx(ln,{isOpen:!!o,onClose:()=>c(null),title:o==="create"?"Nouveau technicien":"Modifier le technicien",footer:i.jsxs(i.Fragment,{children:[i.jsx(Z,{variant:"ghost",onClick:()=>c(null),children:"Annuler"}),i.jsx(Z,{onClick:y,children:o==="create"?"Crer":"Enregistrer"})]}),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(je,{label:"Prnom *",value:d.prenom,onChange:m=>p({...d,prenom:m.target.value})}),i.jsx(je,{label:"Nom *",value:d.nom,onChange:m=>p({...d,nom:m.target.value})})]}),i.jsx(je,{label:"Tlphone *",value:d.telephone,onChange:m=>p({...d,telephone:m.target.value})}),i.jsx(je,{label:"Email",type:"email",value:d.email,onChange:m=>p({...d,email:m.target.value})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(je,{label:"Matricule",value:d.matricule,onChange:m=>p({...d,matricule:m.target.value})}),i.jsx(qr,{label:"Type contrat",value:d.type_contrat,onChange:m=>p({...d,type_contrat:m.target.value}),options:[{value:"cdi",label:"CDI"},{value:"cdd",label:"CDD"},{value:"interim",label:"Intrim"}]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Couleur planning"}),i.jsx("input",{type:"color",value:d.couleur_planning,onChange:m=>p({...d,couleur_planning:m.target.value}),className:"w-full h-10 rounded-lg cursor-pointer"})]})]})})]})},ej=()=>{const{orgId:e,subscription:t}=Ie(),[r,s]=b.useState([]),[n,a]=b.useState([]),[l,o]=b.useState(!0),[c,u]=b.useState("sav"),[f,d]=b.useState(null),[p,h]=b.useState({site_id:"",domaine:"ssi",priorite:"p3",demandeur_nom:"",demandeur_tel:"",symptome_declare:"",date_prevue:""}),v={p1:{label:"P1 - Urgente",color:"danger"},p2:{label:"P2 - Haute",color:"warning"},p3:{label:"P3 - Normale",color:"info"}},x={nouveau:{label:"Nouveau",color:"default"},planifie:{label:"Planifi",color:"info"},en_cours:{label:"En cours",color:"warning"},termine:{label:"Termin",color:"success"},annule:{label:"Annul",color:"default"}},w=[{id:"sav",label:"SAV / Dpannage"},{id:"maintenance",label:"Maintenances"},{id:"travaux",label:"Travaux"}];b.useEffect(()=>{y()},[e,c]);const y=async()=>{if(e)try{const[_,j]=await Promise.all([G.from("sav").select("*, sites(nom), clients(raison_sociale), techniciens(nom, prenom)").eq("organisation_id",e).order("created_at",{ascending:!1}),G.from("sites").select("id, nom, clients(raison_sociale)").eq("organisation_id",e)]);s(_.data||[]),a(j.data||[])}catch(_){console.error("Erreur:",_)}finally{o(!1)}},g=async()=>{try{const _=n.find(j=>j.id===p.site_id);await G.from("sav").insert({...p,organisation_id:e,client_id:_==null?void 0:_.client_id,statut:"nouveau"}),d(null),y()}catch(_){console.error("Erreur:",_)}},m=async(_,j)=>{try{await G.from("sav").update({statut:j}).eq("id",_),y()}catch(E){console.error("Erreur:",E)}},N=(t==null?void 0:t.domaines_actifs)||["ssi"];return l?i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsx(et,{variant:"title",className:"w-48"}),i.jsx(et,{variant:"card",className:"h-64"})]}):i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Interventions"}),i.jsxs("p",{className:"text-gray-500",children:[r.length," intervention(s)"]})]}),i.jsx(Z,{onClick:()=>d("create"),icon:i.jsx(tt,{className:"w-4 h-4"}),children:"Nouvelle intervention"})]}),i.jsx(ng,{tabs:w,activeTab:c,onChange:u}),r.length===0?i.jsx(Ns,{icon:i.jsx(rg,{className:"w-16 h-16"}),title:"Aucune intervention",description:"Crez votre premire intervention",action:i.jsx(Z,{onClick:()=>d("create"),icon:i.jsx(tt,{className:"w-4 h-4"}),children:"Nouvelle intervention"})}):i.jsx(Ee,{padding:"none",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"N"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Site"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Domaine"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Priorit"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(_=>{var j,E,C,A,S,V,M;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:_.numero||"-"}),i.jsxs("td",{className:"px-4 py-3",children:[i.jsx("div",{className:"font-medium text-gray-900",children:(j=_.sites)==null?void 0:j.nom}),i.jsx("div",{className:"text-sm text-gray-500",children:(E=_.clients)==null?void 0:E.raison_sociale})]}),i.jsx("td",{className:"px-4 py-3",children:i.jsx(Je,{size:"sm",children:(C=_.domaine)==null?void 0:C.toUpperCase()})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx(Je,{variant:(A=v[_.priorite])==null?void 0:A.color,size:"sm",children:(S=v[_.priorite])==null?void 0:S.label})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx(Je,{variant:(V=x[_.statut])==null?void 0:V.color,size:"sm",children:(M=x[_.statut])==null?void 0:M.label})}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:new Date(_.created_at).toLocaleDateString("fr-FR")}),i.jsx("td",{className:"px-4 py-3 text-right",children:i.jsx("select",{value:_.statut,onChange:B=>m(_.id,B.target.value),className:"text-sm border rounded px-2 py-1",children:Object.entries(x).map(([B,P])=>i.jsx("option",{value:B,children:P.label},B))})})]},_.id)})})]})}),i.jsx(ln,{isOpen:f==="create",onClose:()=>d(null),title:"Nouvelle intervention SAV",footer:i.jsxs(i.Fragment,{children:[i.jsx(Z,{variant:"ghost",onClick:()=>d(null),children:"Annuler"}),i.jsx(Z,{onClick:g,children:"Crer"})]}),children:i.jsxs("div",{className:"space-y-4",children:[i.jsx(qr,{label:"Site *",value:p.site_id,onChange:_=>h({...p,site_id:_.target.value}),options:[{value:"",label:"Slectionner"},...n.map(_=>{var j;return{value:_.id,label:`${_.nom} - ${(j=_.clients)==null?void 0:j.raison_sociale}`}})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(qr,{label:"Domaine *",value:p.domaine,onChange:_=>h({...p,domaine:_.target.value}),options:N.map(_=>({value:_,label:_.toUpperCase()}))}),i.jsx(qr,{label:"Priorit",value:p.priorite,onChange:_=>h({...p,priorite:_.target.value}),options:Object.entries(v).map(([_,j])=>({value:_,label:j.label}))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(je,{label:"Demandeur",value:p.demandeur_nom,onChange:_=>h({...p,demandeur_nom:_.target.value})}),i.jsx(je,{label:"Tlphone",value:p.demandeur_tel,onChange:_=>h({...p,demandeur_tel:_.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Symptme dclar"}),i.jsx("textarea",{value:p.symptome_declare,onChange:_=>h({...p,symptome_declare:_.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]}),i.jsx(je,{label:"Date prvue",type:"date",value:p.date_prevue,onChange:_=>h({...p,date_prevue:_.target.value})})]})})]})},tj=()=>{const{orgId:e}=Ie(),[t,r]=b.useState(new Date),[s,n]=b.useState([]),[a,l]=b.useState([]),[o,c]=b.useState(!0);b.useEffect(()=>{u()},[e]);const u=async()=>{if(e)try{const[x,w]=await Promise.all([G.from("sav").select("*, sites(nom), techniciens(nom, prenom, couleur_planning)").eq("organisation_id",e).not("date_prevue","is",null),G.from("techniciens").select("*").eq("organisation_id",e).eq("actif",!0)]);n(x.data||[]),l(w.data||[])}catch(x){console.error("Erreur:",x)}finally{c(!1)}},f=()=>{const x=new Date(t);return x.setDate(x.getDate()-x.getDay()+1),Array.from({length:7},(w,y)=>{const g=new Date(x);return g.setDate(x.getDate()+y),g})},d=x=>{const w=new Date(t);w.setDate(w.getDate()+x*7),r(w)},p=x=>x.toLocaleDateString("fr-FR",{weekday:"short",day:"numeric"}),h=x=>{const w=x.toISOString().split("T")[0];return s.filter(y=>y.date_prevue===w)},v=f();return i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Planning"}),i.jsxs("p",{className:"text-gray-500",children:["Semaine du ",v[0].toLocaleDateString("fr-FR")," au ",v[6].toLocaleDateString("fr-FR")]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>d(-1),className:"p-2 hover:bg-gray-100 rounded-lg",children:i.jsx(Gm,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>r(new Date),className:"px-3 py-1.5 bg-gray-100 rounded-lg hover:bg-gray-200 text-sm font-medium",children:"Aujourd'hui"}),i.jsx("button",{onClick:()=>d(1),className:"p-2 hover:bg-gray-100 rounded-lg",children:i.jsx(Jm,{className:"w-5 h-5"})})]})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(x=>i.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white rounded-lg shadow-sm",children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:x.couleur_planning}}),i.jsxs("span",{className:"text-sm",children:[x.prenom," ",x.nom]})]},x.id))}),i.jsxs(Ee,{padding:"none",children:[i.jsx("div",{className:"grid grid-cols-7 border-b",children:v.map((x,w)=>{const y=x.toDateString()===new Date().toDateString();return i.jsx("div",{className:`p-3 text-center border-r last:border-r-0 ${y?"bg-red-50":""}`,children:i.jsx("p",{className:`text-sm font-medium ${y?"text-red-600":"text-gray-500"}`,children:p(x)})},w)})}),i.jsx("div",{className:"grid grid-cols-7 min-h-[400px]",children:v.map((x,w)=>{const y=h(x),g=x.toDateString()===new Date().toDateString();return i.jsx("div",{className:`p-2 border-r last:border-r-0 ${g?"bg-red-50/50":""}`,children:y.map(m=>{var N,_,j;return i.jsxs("div",{className:"mb-2 p-2 rounded-lg text-white text-sm",style:{backgroundColor:((N=m.techniciens)==null?void 0:N.couleur_planning)||"#3B82F6"},children:[i.jsx("p",{className:"font-medium truncate",children:(_=m.sites)==null?void 0:_.nom}),i.jsx("p",{className:"text-xs opacity-80",children:(j=m.domaine)==null?void 0:j.toUpperCase()})]},m.id)})},w)})})]}),s.length===0&&i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(_i,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),i.jsx("p",{children:"Aucune intervention planifie"})]})]})},rj=()=>{const{orgId:e}=Ie(),[t,r]=b.useState([]),[s,n]=b.useState(!0),[a,l]=b.useState(""),o={brouillon:{label:"Brouillon",color:"default"},envoye:{label:"Envoy",color:"info"},accepte:{label:"Accept",color:"success"},refuse:{label:"Refus",color:"danger"},expire:{label:"Expir",color:"warning"}};b.useEffect(()=>{c()},[e]);const c=async()=>{if(e)try{const{data:d}=await G.from("devis").select("*, clients(raison_sociale), sites(nom)").eq("organisation_id",e).order("created_at",{ascending:!1});r(d||[])}catch(d){console.error("Erreur:",d)}finally{n(!1)}},u=t.filter(d=>{var p,h,v;return((p=d.numero)==null?void 0:p.toLowerCase().includes(a.toLowerCase()))||((v=(h=d.clients)==null?void 0:h.raison_sociale)==null?void 0:v.toLowerCase().includes(a.toLowerCase()))}),f={brouillon:t.filter(d=>d.statut==="brouillon").length,envoye:t.filter(d=>d.statut==="envoye").length,accepte:t.filter(d=>d.statut==="accepte").length,refuse:t.filter(d=>d.statut==="refuse").length};return s?i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsx(et,{variant:"title",className:"w-48"}),i.jsx("div",{className:"grid grid-cols-4 gap-4",children:[1,2,3,4].map(d=>i.jsx(et,{variant:"card",className:"h-20"},d))}),i.jsx(et,{variant:"card",className:"h-64"})]}):i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Devis"}),i.jsxs("p",{className:"text-gray-500",children:[t.length," devis"]})]}),i.jsx(Z,{icon:i.jsx(tt,{className:"w-4 h-4"}),children:"Nouveau devis"})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(f).map(([d,p])=>i.jsxs(Ee,{padding:"normal",hover:!1,children:[i.jsx("p",{className:"text-sm text-gray-500",children:o[d].label}),i.jsx("p",{className:"text-2xl font-bold",children:p})]},d))}),i.jsxs("div",{className:"relative max-w-md",children:[i.jsx(Oi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Rechercher...",value:a,onChange:d=>l(d.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]}),u.length===0?i.jsx(Ns,{icon:i.jsx(Vt,{className:"w-16 h-16"}),title:"Aucun devis",description:"Crez votre premier devis",action:i.jsx(Z,{icon:i.jsx(tt,{className:"w-4 h-4"}),children:"Nouveau devis"})}):i.jsx(Ee,{padding:"none",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"N"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Objet"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Montant"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map(d=>{var p,h,v,x,w;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:d.numero||"-"}),i.jsxs("td",{className:"px-4 py-3",children:[i.jsx("div",{className:"font-medium text-gray-900",children:(p=d.clients)==null?void 0:p.raison_sociale}),i.jsx("div",{className:"text-sm text-gray-500",children:(h=d.sites)==null?void 0:h.nom})]}),i.jsx("td",{className:"px-4 py-3 text-gray-600",children:d.objet||"-"}),i.jsxs("td",{className:"px-4 py-3 font-medium",children:[((v=d.montant_ttc)==null?void 0:v.toFixed(2))||"0.00"," "]}),i.jsx("td",{className:"px-4 py-3",children:i.jsx(Je,{variant:(x=o[d.statut])==null?void 0:x.color,size:"sm",children:(w=o[d.statut])==null?void 0:w.label})}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:new Date(d.created_at).toLocaleDateString("fr-FR")}),i.jsxs("td",{className:"px-4 py-3 text-right",children:[i.jsx("button",{className:"text-blue-600 hover:text-blue-800 mr-2",children:i.jsx(bn,{className:"w-4 h-4 inline"})}),i.jsx("button",{className:"text-gray-600 hover:text-gray-800",children:i.jsx(Au,{className:"w-4 h-4 inline"})})]})]},d.id)})})]})})]})},sj=()=>{const{orgId:e}=Ie(),[t,r]=b.useState([]),[s,n]=b.useState(!0),[a,l]=b.useState(""),o={brouillon:{label:"Brouillon",color:"default"},emise:{label:"mise",color:"info"},payee:{label:"Paye",color:"success"},partielle:{label:"Partielle",color:"warning"},retard:{label:"En retard",color:"danger"},annulee:{label:"Annule",color:"default"}};b.useEffect(()=>{c()},[e]);const c=async()=>{if(e)try{const{data:h}=await G.from("factures").select("*, clients(raison_sociale)").eq("organisation_id",e).order("created_at",{ascending:!1});r(h||[])}catch(h){console.error("Erreur:",h)}finally{n(!1)}},u=t.filter(h=>{var v,x,w;return((v=h.numero)==null?void 0:v.toLowerCase().includes(a.toLowerCase()))||((w=(x=h.clients)==null?void 0:x.raison_sociale)==null?void 0:w.toLowerCase().includes(a.toLowerCase()))}),f=t.reduce((h,v)=>h+(v.montant_ht||0),0),d=t.filter(h=>h.statut==="payee").reduce((h,v)=>h+(v.montant_ht||0),0),p=f-d;return s?i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsx(et,{variant:"title",className:"w-48"}),i.jsx("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3].map(h=>i.jsx(et,{variant:"card",className:"h-24"},h))}),i.jsx(et,{variant:"card",className:"h-64"})]}):i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Factures"}),i.jsxs("p",{className:"text-gray-500",children:[t.length," facture(s)"]})]}),i.jsx(Z,{icon:i.jsx(tt,{className:"w-4 h-4"}),children:"Nouvelle facture"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(Ee,{padding:"normal",hover:!1,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"CA Total"}),i.jsxs("p",{className:"text-2xl font-bold",children:[f.toFixed(2)," "]})]}),i.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:i.jsx(_c,{className:"w-6 h-6 text-blue-600"})})]})}),i.jsx(Ee,{padding:"normal",hover:!1,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Encaiss"}),i.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[d.toFixed(2)," "]})]}),i.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:i.jsx(an,{className:"w-6 h-6 text-green-600"})})]})}),i.jsx(Ee,{padding:"normal",hover:!1,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"En attente"}),i.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[p.toFixed(2)," "]})]}),i.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:i.jsx(an,{className:"w-6 h-6 text-orange-600"})})]})})]}),i.jsxs("div",{className:"relative max-w-md",children:[i.jsx(Oi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Rechercher...",value:a,onChange:h=>l(h.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]}),u.length===0?i.jsx(Ns,{icon:i.jsx(an,{className:"w-16 h-16"}),title:"Aucune facture",description:"Crez votre premire facture",action:i.jsx(Z,{icon:i.jsx(tt,{className:"w-4 h-4"}),children:"Nouvelle facture"})}):i.jsx(Ee,{padding:"none",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"N"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Objet"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Montant TTC"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"chance"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map(h=>{var v,x,w,y;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:h.numero||"-"}),i.jsx("td",{className:"px-4 py-3 font-medium",children:(v=h.clients)==null?void 0:v.raison_sociale}),i.jsx("td",{className:"px-4 py-3 text-gray-600",children:h.objet||"-"}),i.jsxs("td",{className:"px-4 py-3 font-medium",children:[((x=h.montant_ttc)==null?void 0:x.toFixed(2))||"0.00"," "]}),i.jsx("td",{className:"px-4 py-3",children:i.jsx(Je,{variant:(w=o[h.statut])==null?void 0:w.color,size:"sm",children:(y=o[h.statut])==null?void 0:y.label})}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:h.date_echeance?new Date(h.date_echeance).toLocaleDateString("fr-FR"):"-"}),i.jsxs("td",{className:"px-4 py-3 text-right",children:[i.jsx("button",{className:"text-blue-600 hover:text-blue-800 mr-2",children:i.jsx(bn,{className:"w-4 h-4 inline"})}),i.jsx("button",{className:"text-gray-600 hover:text-gray-800",children:i.jsx(Au,{className:"w-4 h-4 inline"})})]})]},h.id)})})]})})]})},nj=()=>{var p;const{orgId:e}=Ie(),[t,r]=b.useState([]),[s,n]=b.useState(!0),[a,l]=b.useState("nouvelle"),o={nouvelle:{label:"Nouvelles",color:"danger"},vue:{label:"Vues",color:"warning"},traitee:{label:"Traites",color:"success"},ignoree:{label:"Ignores",color:"default"}},c={critique:{label:"Critique",color:"danger"},haute:{label:"Haute",color:"warning"},moyenne:{label:"Moyenne",color:"info"},basse:{label:"Basse",color:"default"}},u=[{id:"all",label:"Toutes"},{id:"nouvelle",label:"Nouvelles"},{id:"vue",label:"Vues"},{id:"traitee",label:"Traites"}];b.useEffect(()=>{f()},[e,a]);const f=async()=>{if(e)try{let h=G.from("alertes").select("*, sites(nom), clients(raison_sociale)").eq("organisation_id",e).order("created_at",{ascending:!1});a!=="all"&&(h=h.eq("statut",a));const{data:v}=await h;r(v||[])}catch(h){console.error("Erreur:",h)}finally{n(!1)}},d=async(h,v)=>{try{const x={statut:v};v==="vue"&&(x.date_vue=new Date().toISOString()),v==="traitee"&&(x.date_traitement=new Date().toISOString()),await G.from("alertes").update(x).eq("id",h),f()}catch(x){console.error("Erreur:",x)}};return s?i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsx(et,{variant:"title",className:"w-48"}),i.jsx(et,{variant:"card",className:"h-64"})]}):i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Alertes"}),i.jsxs("p",{className:"text-gray-500",children:[t.length," alerte(s)"]})]})}),i.jsx(ng,{tabs:u,activeTab:a,onChange:l}),t.length===0?i.jsx(Ns,{icon:i.jsx(Ru,{className:"w-16 h-16"}),title:"Aucune alerte",description:a==="all"?"Vous n'avez aucune alerte":`Aucune alerte ${(p=o[a])==null?void 0:p.label.toLowerCase()}`}):i.jsx("div",{className:"space-y-4",children:t.map(h=>{var v,x,w,y,g,m;return i.jsx(Ee,{padding:"normal",hover:!1,children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:`p-3 rounded-lg ${h.priorite==="critique"?"bg-red-100":h.priorite==="haute"?"bg-orange-100":h.priorite==="moyenne"?"bg-yellow-100":"bg-blue-100"}`,children:i.jsx(mn,{className:`w-6 h-6 ${h.priorite==="critique"?"text-red-600":h.priorite==="haute"?"text-orange-600":h.priorite==="moyenne"?"text-yellow-600":"text-blue-600"}`})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:h.titre}),i.jsx("p",{className:"text-gray-600 mt-1",children:h.message})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{variant:(v=c[h.priorite])==null?void 0:v.color,size:"sm",children:(x=c[h.priorite])==null?void 0:x.label}),i.jsx(Je,{variant:(w=o[h.statut])==null?void 0:w.color,size:"sm",children:(y=o[h.statut])==null?void 0:y.label})]})]}),i.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-gray-500",children:[i.jsx("span",{children:(g=h.sites)==null?void 0:g.nom}),i.jsx("span",{children:""}),i.jsx("span",{children:(m=h.domaine)==null?void 0:m.toUpperCase()}),i.jsx("span",{children:""}),i.jsx("span",{children:new Date(h.created_at).toLocaleDateString("fr-FR")})]}),h.statut!=="traitee"&&i.jsxs("div",{className:"flex gap-2 mt-4",children:[h.statut==="nouvelle"&&i.jsxs(Z,{variant:"secondary",size:"sm",onClick:()=>d(h.id,"vue"),children:[i.jsx(bn,{className:"w-4 h-4 mr-1"})," Marquer comme vue"]}),i.jsxs(Z,{variant:"primary",size:"sm",onClick:()=>d(h.id,"traitee"),children:[i.jsx(ve,{className:"w-4 h-4 mr-1"})," Traiter"]}),i.jsxs(Z,{variant:"ghost",size:"sm",onClick:()=>d(h.id,"ignoree"),children:[i.jsx(Ou,{className:"w-4 h-4 mr-1"})," Ignorer"]})]})]})]})},h.id)})})]})};var Ii=e=>e.type==="checkbox",cs=e=>e instanceof Date,it=e=>e==null;const ig=e=>typeof e=="object";var Te=e=>!it(e)&&!Array.isArray(e)&&ig(e)&&!cs(e),ij=e=>Te(e)&&e.target?Ii(e.target)?e.target.checked:e.target.value:e,aj=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,lj=(e,t)=>e.has(aj(t)),oj=e=>{const t=e.constructor&&e.constructor.prototype;return Te(t)&&t.hasOwnProperty("isPrototypeOf")},$u=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function De(e){if(e instanceof Date)return new Date(e);const t=typeof FileList<"u"&&e instanceof FileList;if($u&&(e instanceof Blob||t))return e;const r=Array.isArray(e);if(!r&&!(Te(e)&&oj(e)))return e;const s=r?[]:Object.create(Object.getPrototypeOf(e));for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=De(e[n]));return s}var wl=e=>/^\w*$/.test(e),be=e=>e===void 0,Du=e=>Array.isArray(e)?e.filter(Boolean):[],Lu=e=>Du(e.replace(/["|']|\]/g,"").split(/\.|\[/)),F=(e,t,r)=>{if(!t||!Te(e))return r;const s=(wl(t)?[t]:Lu(t)).reduce((n,a)=>it(n)?n:n[a],e);return be(s)||s===e?be(e[t])?r:e[t]:s},Jt=e=>typeof e=="boolean",Ut=e=>typeof e=="function",de=(e,t,r)=>{let s=-1;const n=wl(t)?[t]:Lu(t),a=n.length,l=a-1;for(;++s<a;){const o=n[s];let c=r;if(s!==l){const u=e[o];c=Te(u)||Array.isArray(u)?u:isNaN(+n[s+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=c,e=e[o]}};const Fh={BLUR:"blur",FOCUS_OUT:"focusout"},Mt={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ir={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},cj=Ke.createContext(null);cj.displayName="HookFormContext";var uj=(e,t,r,s=!0)=>{const n={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(n,a,{get:()=>{const l=a;return t._proxyFormState[l]!==Mt.all&&(t._proxyFormState[l]=!s||Mt.all),e[l]}});return n};const dj=typeof window<"u"?Ke.useLayoutEffect:Ke.useEffect;var mt=e=>typeof e=="string",hj=(e,t,r,s,n)=>mt(e)?(s&&t.watch.add(e),F(r,e,n)):Array.isArray(e)?e.map(a=>(s&&t.watch.add(a),F(r,a))):(s&&(t.watchAll=!0),r),Nc=e=>it(e)||!ig(e);function Rr(e,t,r=new WeakSet){if(Nc(e)||Nc(t))return Object.is(e,t);if(cs(e)&&cs(t))return e.getTime()===t.getTime();const s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const a of s){const l=e[a];if(!n.includes(a))return!1;if(a!=="ref"){const o=t[a];if(cs(l)&&cs(o)||Te(l)&&Te(o)||Array.isArray(l)&&Array.isArray(o)?!Rr(l,o,r):!Object.is(l,o))return!1}}return!0}var fj=(e,t,r,s,n)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:n||!0}}:{},Jn=e=>Array.isArray(e)?e:[e],zh=()=>{let e=[];return{get observers(){return e},next:n=>{for(const a of e)a.next&&a.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(a=>a!==n)}}),unsubscribe:()=>{e=[]}}};function ag(e,t){const r={};for(const s in e)if(e.hasOwnProperty(s)){const n=e[s],a=t[s];if(n&&Te(n)&&a){const l=ag(n,a);Te(l)&&(r[s]=l)}else e[s]&&(r[s]=a)}return r}var Qe=e=>Te(e)&&!Object.keys(e).length,Uu=e=>e.type==="file",Ka=e=>{if(!$u)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},lg=e=>e.type==="select-multiple",Mu=e=>e.type==="radio",pj=e=>Mu(e)||Ii(e),co=e=>Ka(e)&&e.isConnected;function mj(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=be(e)?s++:e[t[s++]];return e}function gj(e){for(const t in e)if(e.hasOwnProperty(t)&&!be(e[t]))return!1;return!0}function ke(e,t){const r=Array.isArray(t)?t:wl(t)?[t]:Lu(t),s=r.length===1?e:mj(e,r),n=r.length-1,a=r[n];return s&&delete s[a],n!==0&&(Te(s)&&Qe(s)||Array.isArray(s)&&gj(s))&&ke(e,r.slice(0,-1)),e}var xj=e=>{for(const t in e)if(Ut(e[t]))return!0;return!1};function og(e){return Array.isArray(e)||Te(e)&&!xj(e)}function kc(e,t={}){for(const r in e){const s=e[r];og(s)?(t[r]=Array.isArray(s)?[]:{},kc(s,t[r])):be(s)||(t[r]=!0)}return t}function Us(e,t,r){r||(r=kc(t));for(const s in e){const n=e[s];if(og(n))be(t)||Nc(r[s])?r[s]=kc(n,Array.isArray(n)?[]:{}):Us(n,it(t)?{}:t[s],r[s]);else{const a=t[s];r[s]=!Rr(n,a)}}return r}const Vh={value:!1,isValid:!1},Bh={value:!0,isValid:!0};var cg=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!be(e[0].attributes.value)?be(e[0].value)||e[0].value===""?Bh:{value:e[0].value,isValid:!0}:Bh:Vh}return Vh},ug=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>be(e)?e:t?e===""?NaN:e&&+e:r&&mt(e)?new Date(e):s?s(e):e;const qh={isValid:!1,value:null};var dg=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,qh):qh;function Wh(e){const t=e.ref;return Uu(t)?t.files:Mu(t)?dg(e.refs).value:lg(t)?[...t.selectedOptions].map(({value:r})=>r):Ii(t)?cg(e.refs).value:ug(be(t.value)?e.ref.value:t.value,e)}var yj=(e,t,r,s)=>{const n={};for(const a of e){const l=F(t,a);l&&de(n,a,l._f)}return{criteriaMode:r,names:[...e],fields:n,shouldUseNativeValidation:s}},Ga=e=>e instanceof RegExp,An=e=>be(e)?e:Ga(e)?e.source:Te(e)?Ga(e.value)?e.value.source:e.value:e,Hh=e=>({isOnSubmit:!e||e===Mt.onSubmit,isOnBlur:e===Mt.onBlur,isOnChange:e===Mt.onChange,isOnAll:e===Mt.all,isOnTouch:e===Mt.onTouched});const Kh="AsyncFunction";var vj=e=>!!e&&!!e.validate&&!!(Ut(e.validate)&&e.validate.constructor.name===Kh||Te(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Kh)),wj=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Gh=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const Xn=(e,t,r,s)=>{for(const n of r||Object.keys(e)){const a=F(e,n);if(a){const{_f:l,...o}=a;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],n)&&!s)return!0;if(l.ref&&t(l.ref,l.name)&&!s)return!0;if(Xn(o,t))break}else if(Te(o)&&Xn(o,t))break}}};function Jh(e,t,r){const s=F(e,r);if(s||wl(r))return{error:s,name:r};const n=r.split(".");for(;n.length;){const a=n.join("."),l=F(t,a),o=F(e,a);if(l&&!Array.isArray(l)&&r!==a)return{name:r};if(o&&o.type)return{name:a,error:o};if(o&&o.root&&o.root.type)return{name:`${a}.root`,error:o.root};n.pop()}return{name:r}}var bj=(e,t,r,s)=>{r(e);const{name:n,...a}=e;return Qe(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(l=>t[l]===(!s||Mt.all))},jj=(e,t,r)=>!e||!t||e===t||Jn(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s))),_j=(e,t,r,s,n)=>n.isOnAll?!1:!r&&n.isOnTouch?!(t||e):(r?s.isOnBlur:n.isOnBlur)?!e:(r?s.isOnChange:n.isOnChange)?e:!0,Nj=(e,t)=>!Du(F(e,t)).length&&ke(e,t),kj=(e,t,r)=>{const s=Jn(F(e,r));return de(s,"root",t[r]),de(e,r,s),e};function Xh(e,t,r="validate"){if(mt(e)||Array.isArray(e)&&e.every(mt)||Jt(e)&&!e)return{type:r,message:mt(e)?e:"",ref:t}}var Is=e=>Te(e)&&!Ga(e)?e:{value:e,message:""},Qh=async(e,t,r,s,n,a)=>{const{ref:l,refs:o,required:c,maxLength:u,minLength:f,min:d,max:p,pattern:h,validate:v,name:x,valueAsNumber:w,mount:y}=e._f,g=F(r,x);if(!y||t.has(x))return{};const m=o?o[0]:l,N=M=>{n&&m.reportValidity&&(m.setCustomValidity(Jt(M)?"":M||""),m.reportValidity())},_={},j=Mu(l),E=Ii(l),C=j||E,A=(w||Uu(l))&&be(l.value)&&be(g)||Ka(l)&&l.value===""||g===""||Array.isArray(g)&&!g.length,S=fj.bind(null,x,s,_),V=(M,B,P,J=ir.maxLength,$e=ir.minLength)=>{const ce=M?B:P;_[x]={type:M?J:$e,message:ce,ref:l,...S(M?J:$e,ce)}};if(a?!Array.isArray(g)||!g.length:c&&(!C&&(A||it(g))||Jt(g)&&!g||E&&!cg(o).isValid||j&&!dg(o).isValid)){const{value:M,message:B}=mt(c)?{value:!!c,message:c}:Is(c);if(M&&(_[x]={type:ir.required,message:B,ref:m,...S(ir.required,B)},!s))return N(B),_}if(!A&&(!it(d)||!it(p))){let M,B;const P=Is(p),J=Is(d);if(!it(g)&&!isNaN(g)){const $e=l.valueAsNumber||g&&+g;it(P.value)||(M=$e>P.value),it(J.value)||(B=$e<J.value)}else{const $e=l.valueAsDate||new Date(g),ce=Q=>new Date(new Date().toDateString()+" "+Q),D=l.type=="time",X=l.type=="week";mt(P.value)&&g&&(M=D?ce(g)>ce(P.value):X?g>P.value:$e>new Date(P.value)),mt(J.value)&&g&&(B=D?ce(g)<ce(J.value):X?g<J.value:$e<new Date(J.value))}if((M||B)&&(V(!!M,P.message,J.message,ir.max,ir.min),!s))return N(_[x].message),_}if((u||f)&&!A&&(mt(g)||a&&Array.isArray(g))){const M=Is(u),B=Is(f),P=!it(M.value)&&g.length>+M.value,J=!it(B.value)&&g.length<+B.value;if((P||J)&&(V(P,M.message,B.message),!s))return N(_[x].message),_}if(h&&!A&&mt(g)){const{value:M,message:B}=Is(h);if(Ga(M)&&!g.match(M)&&(_[x]={type:ir.pattern,message:B,ref:l,...S(ir.pattern,B)},!s))return N(B),_}if(v){if(Ut(v)){const M=await v(g,r),B=Xh(M,m);if(B&&(_[x]={...B,...S(ir.validate,B.message)},!s))return N(B.message),_}else if(Te(v)){let M={};for(const B in v){if(!Qe(M)&&!s)break;const P=Xh(await v[B](g,r),m,B);P&&(M={...P,...S(B,P.message)},N(P.message),s&&(_[x]=M))}if(!Qe(M)&&(_[x]={ref:m,...M},!s))return _}}return N(!0),_};const Sj={mode:Mt.onSubmit,reValidateMode:Mt.onChange,shouldFocusError:!0};function Ej(e={}){let t={...Sj,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ut(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},n=Te(t.defaultValues)||Te(t.values)?De(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:De(n),l={action:!1,mount:!1,watch:!1,keepIsValid:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={...f};let p={...d};const h={array:zh(),state:zh()},v=t.criteriaMode===Mt.all,x=k=>T=>{clearTimeout(u),u=setTimeout(k,T)},w=async k=>{if(!l.keepIsValid&&!t.disabled&&(d.isValid||p.isValid||k)){let T;t.resolver?(T=Qe((await C()).errors),y()):T=await S(s,!0),T!==r.isValid&&h.state.next({isValid:T})}},y=(k,T)=>{!t.disabled&&(d.isValidating||d.validatingFields||p.isValidating||p.validatingFields)&&((k||Array.from(o.mount)).forEach(R=>{R&&(T?de(r.validatingFields,R,T):ke(r.validatingFields,R))}),h.state.next({validatingFields:r.validatingFields,isValidating:!Qe(r.validatingFields)}))},g=(k,T=[],R,L,$=!0,I=!0)=>{if(L&&R&&!t.disabled){if(l.action=!0,I&&Array.isArray(F(s,k))){const W=R(F(s,k),L.argA,L.argB);$&&de(s,k,W)}if(I&&Array.isArray(F(r.errors,k))){const W=R(F(r.errors,k),L.argA,L.argB);$&&de(r.errors,k,W),Nj(r.errors,k)}if((d.touchedFields||p.touchedFields)&&I&&Array.isArray(F(r.touchedFields,k))){const W=R(F(r.touchedFields,k),L.argA,L.argB);$&&de(r.touchedFields,k,W)}(d.dirtyFields||p.dirtyFields)&&(r.dirtyFields=Us(n,a)),h.state.next({name:k,isDirty:M(k,T),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else de(a,k,T)},m=(k,T)=>{de(r.errors,k,T),h.state.next({errors:r.errors})},N=k=>{r.errors=k,h.state.next({errors:r.errors,isValid:!1})},_=(k,T,R,L)=>{const $=F(s,k);if($){const I=F(a,k,be(R)?F(n,k):R);be(I)||L&&L.defaultChecked||T?de(a,k,T?I:Wh($._f)):J(k,I),l.mount&&!l.action&&w()}},j=(k,T,R,L,$)=>{let I=!1,W=!1;const re={name:k};if(!t.disabled){if(!R||L){(d.isDirty||p.isDirty)&&(W=r.isDirty,r.isDirty=re.isDirty=M(),I=W!==re.isDirty);const ne=Rr(F(n,k),T);W=!!F(r.dirtyFields,k),ne?ke(r.dirtyFields,k):de(r.dirtyFields,k,!0),re.dirtyFields=r.dirtyFields,I=I||(d.dirtyFields||p.dirtyFields)&&W!==!ne}if(R){const ne=F(r.touchedFields,k);ne||(de(r.touchedFields,k,R),re.touchedFields=r.touchedFields,I=I||(d.touchedFields||p.touchedFields)&&ne!==R)}I&&$&&h.state.next(re)}return I?re:{}},E=(k,T,R,L)=>{const $=F(r.errors,k),I=(d.isValid||p.isValid)&&Jt(T)&&r.isValid!==T;if(t.delayError&&R?(c=x(()=>m(k,R)),c(t.delayError)):(clearTimeout(u),c=null,R?de(r.errors,k,R):ke(r.errors,k)),(R?!Rr($,R):$)||!Qe(L)||I){const W={...L,...I&&Jt(T)?{isValid:T}:{},errors:r.errors,name:k};r={...r,...W},h.state.next(W)}},C=async k=>(y(k,!0),await t.resolver(a,t.context,yj(k||o.mount,s,t.criteriaMode,t.shouldUseNativeValidation))),A=async k=>{const{errors:T}=await C(k);if(y(k),k)for(const R of k){const L=F(T,R);L?de(r.errors,R,L):ke(r.errors,R)}else r.errors=T;return T},S=async(k,T,R={valid:!0})=>{for(const L in k){const $=k[L];if($){const{_f:I,...W}=$;if(I){const re=o.array.has(I.name),ne=$._f&&vj($._f);ne&&d.validatingFields&&y([I.name],!0);const jt=await Qh($,o.disabled,a,v,t.shouldUseNativeValidation&&!T,re);if(ne&&d.validatingFields&&y([I.name]),jt[I.name]&&(R.valid=!1,T))break;!T&&(F(jt,I.name)?re?kj(r.errors,jt,I.name):de(r.errors,I.name,jt[I.name]):ke(r.errors,I.name))}!Qe(W)&&await S(W,T,R)}}return R.valid},V=()=>{for(const k of o.unMount){const T=F(s,k);T&&(T._f.refs?T._f.refs.every(R=>!co(R)):!co(T._f.ref))&&bl(k)}o.unMount=new Set},M=(k,T)=>!t.disabled&&(k&&T&&de(a,k,T),!Rr(ue(),n)),B=(k,T,R)=>hj(k,o,{...l.mount?a:be(T)?n:mt(k)?{[k]:T}:T},R,T),P=k=>Du(F(l.mount?a:n,k,t.shouldUnregister?F(n,k,[]):[])),J=(k,T,R={})=>{const L=F(s,k);let $=T;if(L){const I=L._f;I&&(!I.disabled&&de(a,k,ug(T,I)),$=Ka(I.ref)&&it(T)?"":T,lg(I.ref)?[...I.ref.options].forEach(W=>W.selected=$.includes(W.value)):I.refs?Ii(I.ref)?I.refs.forEach(W=>{(!W.defaultChecked||!W.disabled)&&(Array.isArray($)?W.checked=!!$.find(re=>re===W.value):W.checked=$===W.value||!!$)}):I.refs.forEach(W=>W.checked=W.value===$):Uu(I.ref)?I.ref.value="":(I.ref.value=$,I.ref.type||h.state.next({name:k,values:De(a)})))}(R.shouldDirty||R.shouldTouch)&&j(k,$,R.shouldTouch,R.shouldDirty,!0),R.shouldValidate&&Q(k)},$e=(k,T,R)=>{for(const L in T){if(!T.hasOwnProperty(L))return;const $=T[L],I=k+"."+L,W=F(s,I);(o.array.has(k)||Te($)||W&&!W._f)&&!cs($)?$e(I,$,R):J(I,$,R)}},ce=(k,T,R={})=>{const L=F(s,k),$=o.array.has(k),I=De(T);de(a,k,I),$?(h.array.next({name:k,values:De(a)}),(d.isDirty||d.dirtyFields||p.isDirty||p.dirtyFields)&&R.shouldDirty&&h.state.next({name:k,dirtyFields:Us(n,a),isDirty:M(k,I)})):L&&!L._f&&!it(I)?$e(k,I,R):J(k,I,R),Gh(k,o)&&h.state.next({...r,name:k}),h.state.next({name:l.mount?k:void 0,values:De(a)})},D=async k=>{l.mount=!0;const T=k.target;let R=T.name,L=!0;const $=F(s,R),I=ne=>{L=Number.isNaN(ne)||cs(ne)&&isNaN(ne.getTime())||Rr(ne,F(a,R,ne))},W=Hh(t.mode),re=Hh(t.reValidateMode);if($){let ne,jt;const $i=T.type?Wh($._f):ij(k),br=k.type===Fh.BLUR||k.type===Fh.FOCUS_OUT,xg=!wj($._f)&&!t.resolver&&!F(r.errors,R)&&!$._f.deps||_j(br,F(r.touchedFields,R),r.isSubmitted,re,W),Nl=Gh(R,o,br);de(a,R,$i),br?(!T||!T.readOnly)&&($._f.onBlur&&$._f.onBlur(k),c&&c(0)):$._f.onChange&&$._f.onChange(k);const kl=j(R,$i,br),yg=!Qe(kl)||Nl;if(!br&&h.state.next({name:R,type:k.type,values:De(a)}),xg)return(d.isValid||p.isValid)&&(t.mode==="onBlur"?br&&w():br||w()),yg&&h.state.next({name:R,...Nl?{}:kl});if(!br&&Nl&&h.state.next({...r}),t.resolver){const{errors:Wu}=await C([R]);if(y([R]),I($i),L){const vg=Jh(r.errors,s,R),Hu=Jh(Wu,s,vg.name||R);ne=Hu.error,R=Hu.name,jt=Qe(Wu)}}else y([R],!0),ne=(await Qh($,o.disabled,a,v,t.shouldUseNativeValidation))[R],y([R]),I($i),L&&(ne?jt=!1:(d.isValid||p.isValid)&&(jt=await S(s,!0)));L&&($._f.deps&&(!Array.isArray($._f.deps)||$._f.deps.length>0)&&Q($._f.deps),E(R,jt,ne,kl))}},X=(k,T)=>{if(F(r.errors,T)&&k.focus)return k.focus(),1},Q=async(k,T={})=>{let R,L;const $=Jn(k);if(t.resolver){const I=await A(be(k)?k:$);R=Qe(I),L=k?!$.some(W=>F(I,W)):R}else k?(L=(await Promise.all($.map(async I=>{const W=F(s,I);return await S(W&&W._f?{[I]:W}:W)}))).every(Boolean),!(!L&&!r.isValid)&&w()):L=R=await S(s);return h.state.next({...!mt(k)||(d.isValid||p.isValid)&&R!==r.isValid?{}:{name:k},...t.resolver||!k?{isValid:R}:{},errors:r.errors}),T.shouldFocus&&!L&&Xn(s,X,k?$:o.mount),L},ue=(k,T)=>{let R={...l.mount?a:n};return T&&(R=ag(T.dirtyFields?r.dirtyFields:r.touchedFields,R)),be(k)?R:mt(k)?F(R,k):k.map(L=>F(R,L))},we=(k,T)=>({invalid:!!F((T||r).errors,k),isDirty:!!F((T||r).dirtyFields,k),error:F((T||r).errors,k),isValidating:!!F(r.validatingFields,k),isTouched:!!F((T||r).touchedFields,k)}),ks=k=>{k&&Jn(k).forEach(T=>ke(r.errors,T)),h.state.next({errors:k?r.errors:{}})},Wt=(k,T,R)=>{const L=(F(s,k,{_f:{}})._f||{}).ref,$=F(r.errors,k)||{},{ref:I,message:W,type:re,...ne}=$;de(r.errors,k,{...ne,...T,ref:L}),h.state.next({name:k,errors:r.errors,isValid:!1}),R&&R.shouldFocus&&L&&L.focus&&L.focus()},jn=(k,T)=>Ut(k)?h.state.subscribe({next:R=>"values"in R&&k(B(void 0,T),R)}):B(k,T,!0),Ht=k=>h.state.subscribe({next:T=>{jj(k.name,T.name,k.exact)&&bj(T,k.formState||d,gg,k.reRenderRoot)&&k.callback({values:{...a},...r,...T,defaultValues:n})}}).unsubscribe,Ss=k=>(l.mount=!0,p={...p,...k.formState},Ht({...k,formState:{...f,...k.formState}})),bl=(k,T={})=>{for(const R of k?Jn(k):o.mount)o.mount.delete(R),o.array.delete(R),T.keepValue||(ke(s,R),ke(a,R)),!T.keepError&&ke(r.errors,R),!T.keepDirty&&ke(r.dirtyFields,R),!T.keepTouched&&ke(r.touchedFields,R),!T.keepIsValidating&&ke(r.validatingFields,R),!t.shouldUnregister&&!T.keepDefaultValue&&ke(n,R);h.state.next({values:De(a)}),h.state.next({...r,...T.keepDirty?{isDirty:M()}:{}}),!T.keepIsValid&&w()},Fu=({disabled:k,name:T})=>{(Jt(k)&&l.mount||k||o.disabled.has(T))&&(k?o.disabled.add(T):o.disabled.delete(T))},jl=(k,T={})=>{let R=F(s,k);const L=Jt(T.disabled)||Jt(t.disabled);return de(s,k,{...R||{},_f:{...R&&R._f?R._f:{ref:{name:k}},name:k,mount:!0,...T}}),o.mount.add(k),R?Fu({disabled:Jt(T.disabled)?T.disabled:t.disabled,name:k}):_(k,!0,T.value),{...L?{disabled:T.disabled||t.disabled}:{},...t.progressive?{required:!!T.required,min:An(T.min),max:An(T.max),minLength:An(T.minLength),maxLength:An(T.maxLength),pattern:An(T.pattern)}:{},name:k,onChange:D,onBlur:D,ref:$=>{if($){jl(k,T),R=F(s,k);const I=be($.value)&&$.querySelectorAll&&$.querySelectorAll("input,select,textarea")[0]||$,W=pj(I),re=R._f.refs||[];if(W?re.find(ne=>ne===I):I===R._f.ref)return;de(s,k,{_f:{...R._f,...W?{refs:[...re.filter(co),I,...Array.isArray(F(n,k))?[{}]:[]],ref:{type:I.type,name:k}}:{ref:I}}}),_(k,!1,void 0,I)}else R=F(s,k,{}),R._f&&(R._f.mount=!1),(t.shouldUnregister||T.shouldUnregister)&&!(lj(o.array,k)&&l.action)&&o.unMount.add(k)}}},_l=()=>t.shouldFocusError&&Xn(s,X,o.mount),fg=k=>{Jt(k)&&(h.state.next({disabled:k}),Xn(s,(T,R)=>{const L=F(s,R);L&&(T.disabled=L._f.disabled||k,Array.isArray(L._f.refs)&&L._f.refs.forEach($=>{$.disabled=L._f.disabled||k}))},0,!1))},zu=(k,T)=>async R=>{let L;R&&(R.preventDefault&&R.preventDefault(),R.persist&&R.persist());let $=De(a);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:I,values:W}=await C();y(),r.errors=I,$=De(W)}else await S(s);if(o.disabled.size)for(const I of o.disabled)ke($,I);if(ke(r.errors,"root"),Qe(r.errors)){h.state.next({errors:{}});try{await k($,R)}catch(I){L=I}}else T&&await T({...r.errors},R),_l(),setTimeout(_l);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Qe(r.errors)&&!L,submitCount:r.submitCount+1,errors:r.errors}),L)throw L},pg=(k,T={})=>{F(s,k)&&(be(T.defaultValue)?ce(k,De(F(n,k))):(ce(k,T.defaultValue),de(n,k,De(T.defaultValue))),T.keepTouched||ke(r.touchedFields,k),T.keepDirty||(ke(r.dirtyFields,k),r.isDirty=T.defaultValue?M(k,De(F(n,k))):M()),T.keepError||(ke(r.errors,k),d.isValid&&w()),h.state.next({...r}))},Vu=(k,T={})=>{const R=k?De(k):n,L=De(R),$=Qe(k),I=$?n:L;if(T.keepDefaultValues||(n=R),!T.keepValues){if(T.keepDirtyValues){const W=new Set([...o.mount,...Object.keys(Us(n,a))]);for(const re of Array.from(W))F(r.dirtyFields,re)?de(I,re,F(a,re)):ce(re,F(I,re))}else{if($u&&be(k))for(const W of o.mount){const re=F(s,W);if(re&&re._f){const ne=Array.isArray(re._f.refs)?re._f.refs[0]:re._f.ref;if(Ka(ne)){const jt=ne.closest("form");if(jt){jt.reset();break}}}}if(T.keepFieldsRef)for(const W of o.mount)ce(W,F(I,W));else s={}}a=t.shouldUnregister?T.keepDefaultValues?De(n):{}:De(I),h.array.next({values:{...I}}),h.state.next({values:{...I}})}o={mount:T.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!d.isValid||!!T.keepIsValid||!!T.keepDirtyValues||!t.shouldUnregister&&!Qe(I),l.watch=!!t.shouldUnregister,l.keepIsValid=!!T.keepIsValid,l.action=!1,T.keepErrors||(r.errors={}),h.state.next({submitCount:T.keepSubmitCount?r.submitCount:0,isDirty:$?!1:T.keepDirty?r.isDirty:!!(T.keepDefaultValues&&!Rr(k,n)),isSubmitted:T.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:$?{}:T.keepDirtyValues?T.keepDefaultValues&&a?Us(n,a):r.dirtyFields:T.keepDefaultValues&&k?Us(n,k):T.keepDirty?r.dirtyFields:{},touchedFields:T.keepTouched?r.touchedFields:{},errors:T.keepErrors?r.errors:{},isSubmitSuccessful:T.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},Bu=(k,T)=>Vu(Ut(k)?k(a):k,{...t.resetOptions,...T}),mg=(k,T={})=>{const R=F(s,k),L=R&&R._f;if(L){const $=L.refs?L.refs[0]:L.ref;$.focus&&setTimeout(()=>{$.focus(),T.shouldSelect&&Ut($.select)&&$.select()})}},gg=k=>{r={...r,...k}},qu={control:{register:jl,unregister:bl,getFieldState:we,handleSubmit:zu,setError:Wt,_subscribe:Ht,_runSchema:C,_updateIsValidating:y,_focusError:_l,_getWatch:B,_getDirty:M,_setValid:w,_setFieldArray:g,_setDisabledField:Fu,_setErrors:N,_getFieldArray:P,_reset:Vu,_resetDefaultValues:()=>Ut(t.defaultValues)&&t.defaultValues().then(k=>{Bu(k,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:V,_disableForm:fg,_subjects:h,_proxyFormState:d,get _fields(){return s},get _formValues(){return a},get _state(){return l},set _state(k){l=k},get _defaultValues(){return n},get _names(){return o},set _names(k){o=k},get _formState(){return r},get _options(){return t},set _options(k){t={...t,...k}}},subscribe:Ss,trigger:Q,register:jl,handleSubmit:zu,watch:jn,setValue:ce,getValues:ue,reset:Bu,resetField:pg,clearErrors:ks,unregister:bl,setError:Wt,setFocus:mg,getFieldState:we};return{...qu,formControl:qu}}function Cj(e={}){const t=Ke.useRef(void 0),r=Ke.useRef(void 0),[s,n]=Ke.useState({isDirty:!1,isValidating:!1,isLoading:Ut(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Ut(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!Ut(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...o}=Ej(e);t.current={...o,formState:s}}const a=t.current.control;return a._options=e,dj(()=>{const l=a._subscribe({formState:a._proxyFormState,callback:()=>n({...a._formState}),reRenderRoot:!0});return n(o=>({...o,isReady:!0})),a._formState.isReady=!0,l},[a]),Ke.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),Ke.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),Ke.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),Ke.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),Ke.useEffect(()=>{if(a._proxyFormState.isDirty){const l=a._getDirty();l!==s.isDirty&&a._subjects.state.next({isDirty:l})}},[a,s.isDirty]),Ke.useEffect(()=>{var l;e.values&&!Rr(e.values,r.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),!((l=a._options.resetOptions)===null||l===void 0)&&l.keepIsValid||a._setValid(),r.current=e.values,n(o=>({...o}))):a._resetDefaultValues()},[a,e.values]),Ke.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=uj(s,a),t.current}const hg=async(e,t)=>{try{const{data:r,error:s}=await G.from("organisations").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw s;return r}catch(r){throw console.error("Erreur mise  jour settings:",r),r}},Tj=async(e,t)=>{try{if(!t.type.startsWith("image/"))throw new Error("Le fichier doit tre une image");if(t.size>2*1024*1024)throw new Error("Le fichier ne doit pas dpasser 2 Mo");const r=t.name.split(".").pop(),n=`logos/${`logo_${e}_${Date.now()}.${r}`}`,{error:a}=await G.storage.from("organisations").upload(n,t);if(a)throw a;const{data:{publicUrl:l}}=G.storage.from("organisations").getPublicUrl(n);return await hg(e,{logo_url:l}),l}catch(r){throw console.error("Erreur upload logo:",r),r}},Pj=()=>{var _,j,E,C,A,S,V,M,B;const{orgSettings:e,orgId:t,userData:r,refreshSettings:s,isAdmin:n}=Ie(),[a,l]=b.useState("identite"),[o,c]=b.useState(!1),[u,f]=b.useState(!1),[d,p]=b.useState(null),{register:h,handleSubmit:v,reset:x,formState:{errors:w,isDirty:y}}=Cj();b.useEffect(()=>{e&&(x(e),p(e.logo_url))},[e,x]);const g=async P=>{if(!n()){Rn.error("Seul un administrateur peut modifier les paramtres");return}c(!0);try{await hg(t,r.uid,P),await s(),Rn.success("Paramtres enregistrs")}catch(J){console.error("Erreur sauvegarde:",J),Rn.error("Erreur lors de la sauvegarde")}finally{c(!1)}},m=async P=>{const J=P.target.files[0];if(!J)return;const $e=new FileReader;$e.onload=ce=>p(ce.target.result),$e.readAsDataURL(J),f(!0);try{const ce=await Tj(t,r.uid,J);p(ce),await s(),Rn.success("Logo mis  jour")}catch(ce){console.error("Erreur upload:",ce),Rn.error(ce.message||"Erreur lors de l'upload"),p(e==null?void 0:e.logo_url)}finally{f(!1)}},N=[{id:"identite",label:"Identit",icon:Ue},{id:"coordonnees",label:"Coordonnes",icon:hr},{id:"legal",label:"Informations lgales",icon:Vt},{id:"bancaire",label:"Bancaire",icon:Xm},{id:"apparence",label:"Apparence",icon:L1},{id:"notifications",label:"Notifications",icon:Ru},{id:"espace_client",label:"Espace client",icon:Lt},{id:"licence",label:"Licence",icon:rr}];return e?i.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[i.jsx(tr,{className:"w-7 h-7 text-blue-500"}),"Paramtres de l'organisation"]}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Configurez les informations de votre entreprise"})]}),i.jsxs("div",{className:"flex gap-6",children:[i.jsx("div",{className:"w-64 flex-shrink-0",children:i.jsx("nav",{className:"space-y-1",children:N.map(P=>{const J=P.icon;return i.jsxs("button",{onClick:()=>l(P.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all ${a===P.id?"bg-blue-50 text-blue-600 font-medium":"text-slate-600 hover:bg-slate-50"}`,children:[i.jsx(J,{className:"w-5 h-5"}),P.label]},P.id)})})}),i.jsx("div",{className:"flex-1",children:i.jsxs("form",{onSubmit:v(g),children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6",children:[a==="identite"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-800 pb-4 border-b",children:"Identit de l'entreprise"}),i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Raison sociale *"}),i.jsx("input",{type:"text",...h("nom",{required:"Raison sociale requise"}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nom de votre entreprise"}),w.nom&&i.jsx("p",{className:"mt-1 text-sm text-red-500",children:w.nom.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Forme juridique"}),i.jsxs("select",{...h("forme_juridique"),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"Slectionner"}),i.jsx("option",{value:"SAS",children:"SAS"}),i.jsx("option",{value:"SARL",children:"SARL"}),i.jsx("option",{value:"SA",children:"SA"}),i.jsx("option",{value:"EURL",children:"EURL"}),i.jsx("option",{value:"EI",children:"Entreprise Individuelle"}),i.jsx("option",{value:"Auto-entrepreneur",children:"Auto-entrepreneur"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Capital social"}),i.jsx("input",{type:"text",...h("capital"),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: 10 000 "})]})]})]}),a==="coordonnees"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-800 pb-4 border-b",children:"Coordonnes"}),i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Adresse"}),i.jsx("input",{type:"text",...h("adresse"),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Numro et nom de rue"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Code postal"}),i.jsx("input",{type:"text",...h("code_postal"),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"75001"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ville"}),i.jsx("input",{type:"text",...h("ville"),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Paris"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tlphone"}),i.jsxs("div",{className:"relative",children:[i.jsx(bs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"tel",...h("telephone"),className:"w-full pl-12 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+33 1 23 45 67 89"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(ws,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"email",...h("email"),className:"w-full pl-12 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"contact@entreprise.fr"})]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Site web"}),i.jsxs("div",{className:"relative",children:[i.jsx(O1,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"url",...h("site_web"),className:"w-full pl-12 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://www.entreprise.fr"})]})]})]})]}),a==="legal"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-800 pb-4 border-b",children:"Informations lgales"}),i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"SIRET"}),i.jsx("input",{type:"text",...h("siret"),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"XXX XXX XXX XXXXX"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"SIREN"}),i.jsx("input",{type:"text",...h("siren"),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"XXX XXX XXX"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Code APE"}),i.jsx("input",{type:"text",...h("code_ape"),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"XXXX X"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"RCS"}),i.jsx("input",{type:"text",...h("rcs"),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ville du RCS"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"N TVA Intracommunautaire"}),i.jsx("input",{type:"text",...h("tva_intracommunautaire"),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"FR XX XXX XXX XXX"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Lien CGV"}),i.jsx("input",{type:"url",...h("cgv_url"),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://www.entreprise.fr/cgv"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Mention lgale pied de page (documents)"}),i.jsx("textarea",{...h("mention_legale_pied_page"),rows:3,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Toute commande implique l'acceptation des CGV..."})]})]})]}),a==="bancaire"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-800 pb-4 border-b",children:"Coordonnes bancaires"}),i.jsx("p",{className:"text-sm text-slate-500 -mt-2",children:"Ces informations apparatront sur vos factures"}),i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"IBAN"}),i.jsx("input",{type:"text",...h("iban"),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono",placeholder:"FR76 XXXX XXXX XXXX XXXX XXXX XXX"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"BIC"}),i.jsx("input",{type:"text",...h("bic"),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono",placeholder:"XXXXXXXX"})]})]})]}),a==="apparence"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-800 pb-4 border-b",children:"Apparence"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-4",children:"Logo de l'entreprise"}),i.jsxs("div",{className:"flex items-start gap-6",children:[i.jsx("div",{className:"w-40 h-24 bg-slate-100 rounded-xl flex items-center justify-center overflow-hidden border-2 border-dashed border-slate-300",children:d?i.jsx("img",{src:d,alt:"Logo",className:"max-w-full max-h-full object-contain"}):i.jsx("span",{className:"text-slate-400 text-sm",children:"Aucun logo"})}),i.jsxs("div",{children:[i.jsxs("label",{className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-xl cursor-pointer hover:bg-blue-100 transition-colors",children:[u?i.jsx(hs,{className:"w-5 h-5 animate-spin"}):i.jsx(eg,{className:"w-5 h-5"}),u?"Upload...":"Changer le logo",i.jsx("input",{type:"file",accept:"image/*",onChange:m,className:"hidden",disabled:u})]}),i.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["PNG ou JPG, max 2 Mo",i.jsx("br",{}),"Dimensions recommandes : 300x100 px"]})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Couleur primaire"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("input",{type:"color",...h("couleur_primaire"),className:"w-12 h-12 rounded-xl cursor-pointer border-0"}),i.jsx("input",{type:"text",...h("couleur_primaire"),className:"w-32 px-4 py-2 border border-slate-200 rounded-xl font-mono text-sm",placeholder:"#1E3A5F"})]})]})]}),a==="notifications"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-800 pb-4 border-b",children:"Notifications automatiques"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium text-slate-700",children:"Notifications clients"}),[{key:"notifications.client_rapport_disponible",label:"Rapport disponible"},{key:"notifications.client_devis_cree",label:"Nouveau devis"},{key:"notifications.client_relance_devis",label:"Relance devis sans rponse"},{key:"notifications.client_facture_emise",label:"Facture mise"},{key:"notifications.client_relance_facture",label:"Relance facture impaye"},{key:"notifications.client_alerte_critique",label:"Alerte critique"},{key:"notifications.client_rappel_maintenance",label:"Rappel maintenance"}].map(P=>i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",...h(P.key),className:"w-5 h-5 rounded border-slate-300 text-blue-500 focus:ring-blue-500"}),i.jsx("span",{className:"text-slate-600",children:P.label})]},P.key))]}),i.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[i.jsx("h3",{className:"font-medium text-slate-700",children:"Notifications sous-traitants"}),[{key:"notifications.stt_mission_assignee",label:"Mission assigne"},{key:"notifications.stt_mission_modifiee",label:"Mission modifie"},{key:"notifications.stt_rappel_j1",label:"Rappel J-1"}].map(P=>i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",...h(P.key),className:"w-5 h-5 rounded border-slate-300 text-blue-500 focus:ring-blue-500"}),i.jsx("span",{className:"text-slate-600",children:P.label})]},P.key))]})]}),a==="espace_client"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-800 pb-4 border-b",children:"Espace client en ligne"}),i.jsx("p",{className:"text-sm text-slate-500 -mt-2",children:"Choisissez les informations visibles par vos clients"}),i.jsx("div",{className:"space-y-4",children:[{key:"espace_client.sites_visible",label:"Mes sites"},{key:"espace_client.materiel_visible",label:"Matriel install"},{key:"espace_client.historique_interventions_visible",label:"Historique interventions"},{key:"espace_client.devis_visible",label:"Devis"},{key:"espace_client.factures_visible",label:"Factures"},{key:"espace_client.rapports_visible",label:"Rapports"},{key:"espace_client.alertes_visible",label:"Alertes"},{key:"espace_client.planning_visible",label:"Planning interventions"},{key:"espace_client.contrats_visible",label:"Contrats de maintenance"}].map(P=>i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",...h(P.key),className:"w-5 h-5 rounded border-slate-300 text-blue-500 focus:ring-blue-500"}),i.jsx("span",{className:"text-slate-600",children:P.label})]},P.key))})]}),a==="licence"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-800 pb-4 border-b",children:"Informations de licence"}),i.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-600",children:"Cl de licence"}),i.jsx("span",{className:"font-mono font-medium",children:((_=e.licence)==null?void 0:_.cle)||"N/A"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-600",children:"Plan"}),i.jsx("span",{className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium capitalize",children:((j=e.licence)==null?void 0:j.plan)||"N/A"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-600",children:"Statut"}),i.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${((E=e.licence)==null?void 0:E.statut)==="actif"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[((C=e.licence)==null?void 0:C.statut)==="actif"?i.jsx(R1,{className:"w-4 h-4"}):i.jsx(Ai,{className:"w-4 h-4"}),((A=e.licence)==null?void 0:A.statut)||"N/A"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-600",children:"Modules actifs"}),i.jsx("div",{className:"flex gap-2",children:(V=(S=e.licence)==null?void 0:S.modules_actifs)==null?void 0:V.map(P=>i.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-slate-200 text-slate-700 rounded text-xs font-medium capitalize",children:P},P))})]}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[i.jsx("span",{className:"text-slate-600",children:"Expiration"}),i.jsx("span",{className:"font-medium",children:(B=(M=e.licence)==null?void 0:M.date_expiration)!=null&&B.toDate?e.licence.date_expiration.toDate().toLocaleDateString("fr-FR"):"N/A"})]})]}),i.jsx("p",{className:"text-sm text-slate-500",children:"Pour modifier votre abonnement ou ajouter des modules, contactez le support."})]})]}),a!=="licence"&&i.jsx("div",{className:"mt-6 flex justify-end",children:i.jsxs("button",{type:"submit",disabled:o||!y,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-xl shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[o?i.jsx(hs,{className:"w-5 h-5 animate-spin"}):i.jsx(M1,{className:"w-5 h-5"}),"Enregistrer les modifications"]})})]})})]})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(hs,{className:"w-8 h-8 animate-spin text-blue-500"})})},Rj=({isOpen:e,onClose:t,featureType:r="default"})=>{const s=nt(),{formatTimeRemaining:n,demoRequest:a}=Ri();if(!e)return null;const l={create_report:{title:"Crer un rapport",desc:"Crez des rapports SSI, BAES, Extincteurs..."},edit_report:{title:"Modifier un rapport",desc:"Modifiez vos rapports existants"},generate_pdf:{title:"Gnrer un PDF",desc:"Exportez vos rapports en PDF professionnel"},export_data:{title:"Exporter les donnes",desc:"Exportez vers Excel ou votre comptable"},add_client:{title:"Ajouter un client",desc:"Grez votre portefeuille client"},add_site:{title:"Ajouter un site",desc:"Ajoutez les sites de vos clients"},settings:{title:"Paramtres",desc:"Configurez votre entreprise"},default:{title:"Fonctionnalit Premium",desc:"Accdez  toutes les fonctionnalits"}},o=l[r]||l.default,c=()=>{t(),s("/subscribe",{state:{fromDemo:!0,request:a}})};return i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[60] p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full overflow-hidden shadow-2xl animate-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 p-6 text-white relative",children:[i.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-white/80 hover:text-white",children:i.jsx(Ou,{className:"w-6 h-6"})}),i.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mb-4",children:i.jsx(Yt,{className:"w-8 h-8"})}),i.jsx("h2",{className:"text-2xl font-bold",children:o.title}),i.jsx("p",{className:"text-white/80 mt-1",children:o.desc})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("p",{className:"text-gray-600 mb-6",children:["Cette fonctionnalit est disponible avec un abonnement. Souscrivez maintenant et profitez de ",i.jsx("strong",{className:"text-red-500",children:"-10% sur le premier mois"})," !"]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Avec l'abonnement vous aurez :"}),i.jsx("div",{className:"space-y-2",children:["Cration illimite de rapports","Gnration PDF automatique","Signature lectronique","Envoi client en 1 clic","Application mobile"].map((u,f)=>i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[i.jsx(ve,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),i.jsx("span",{children:u})]},f))})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:c,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-red-500 to-orange-500 text-white py-3 rounded-xl font-bold hover:from-red-600 hover:to-orange-600 transition-all shadow-lg",children:[i.jsx(sr,{className:"w-5 h-5"}),"Souscrire maintenant"]}),i.jsxs("button",{onClick:t,className:"w-full text-gray-500 hover:text-gray-700 py-2 text-sm",children:["Continuer la dmo (",n()," restant)"]})]})]})]})})},Aj=()=>{const e=nt(),t=bt(),{user:r,orgId:s}=Ie(),{isDemoMode:n,startDemo:a,demoExpired:l,demoRequest:o,timeRemaining:c,formatTimeRemaining:u,DEMO_DURATION:f}=Ri(),[d,p]=b.useState({open:!1,feature:"default"}),[h,v]=b.useState(!1),x=b.useMemo(()=>{var j;return((j=t.state)==null?void 0:j.request)||o||null},[t.state,o]);b.useEffect(()=>{(async()=>{if(!(r!=null&&r.email)){e("/login",{replace:!0});return}if(!x){e("/dashboard",{replace:!0});return}if(l){e("/demo-expired",{state:{request:x}});return}!n&&!h&&(v(!0),await a({organisation_id:s||null,email:r.email,domaines_demandes:x.domaines_demandes||x.domaines||x.modulesInteresses||["ssi"],profil_demande:x.profil_demande||x.profil||x.typeActivite||"mainteneur",nb_utilisateurs:x.nb_utilisateurs||x.nombreTechniciens||"1",tarif_calcule:x.tarif_calcule,options_selectionnees:x.options_selectionnees||{}}))})()},[r==null?void 0:r.email,x,n,h,l,a,e,s]),b.useEffect(()=>{l&&e("/demo-expired",{state:{request:x||o}})},[l,e,x,o]);const w=j=>p({open:!0,feature:j}),y=()=>e("/subscribe",{state:{fromDemo:!0,request:x||o}}),g=(x==null?void 0:x.domaines_demandes)||["ssi"],m={ssi:{label:"SSI",icon:rr},dsf:{label:"Dsenfumage",icon:yl},baes:{label:"BAES",icon:sr},extincteurs:{label:"Extincteurs",icon:Bt},ria:{label:"RIA",icon:rr},colonnes_seches:{label:"Colonnes sches",icon:tr},compartimentage:{label:"Compartimentage",icon:Ue}},N=c/f*100,_=c<=30?"text-red-500":c<=60?"text-orange-500":"text-green-500";return i.jsxs("div",{className:"min-h-screen bg-gray-100",children:[i.jsx("header",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white sticky top-0 z-50",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:i.jsx("span",{className:"font-black",children:"ES"})}),i.jsxs("div",{children:[i.jsx("span",{className:"font-bold",children:"Easy Scurit"}),i.jsx("span",{className:"ml-2 px-2 py-0.5 bg-orange-500 text-xs rounded font-bold",children:"DMO"})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs opacity-75",children:"Temps restant"}),i.jsx("div",{className:`text-4xl font-mono font-black ${_} ${c<=30?"animate-pulse":""}`,children:u()})]}),i.jsx("div",{className:"w-32 h-3 bg-white/30 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full transition-all duration-1000 rounded-full ${c<=30?"bg-red-500":c<=60?"bg-orange-400":"bg-green-400"}`,style:{width:`${N}%`}})})]}),i.jsxs("button",{onClick:y,className:"flex items-center gap-2 bg-gradient-to-r from-red-500 to-orange-500 px-6 py-2 rounded-lg font-bold hover:from-red-600 hover:to-orange-600 transition-all shadow-lg",children:[i.jsx(sr,{className:"w-4 h-4"}),"Souscrire -10%"]})]})})}),i.jsxs("div",{className:"flex",children:[i.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 min-h-[calc(100vh-60px)] p-4",children:[i.jsxs("nav",{className:"space-y-1",children:[i.jsxs("a",{href:"#",className:"flex items-center gap-3 px-3 py-2 bg-blue-50 text-blue-700 rounded-lg font-medium",children:[i.jsx(C1,{className:"w-5 h-5"}),"Dashboard"]}),i.jsxs("button",{onClick:()=>w("add_client"),className:"w-full flex items-center gap-3 px-3 py-2 text-gray-400 hover:bg-gray-50 rounded-lg",children:[i.jsx(Ue,{className:"w-5 h-5"}),"Clients",i.jsx(Yt,{className:"w-4 h-4 ml-auto text-orange-500"})]}),i.jsxs("a",{href:"#",className:"flex items-center gap-3 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg",children:[i.jsx(_i,{className:"w-5 h-5"}),"Planning"]}),i.jsxs("a",{href:"#",className:"flex items-center gap-3 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg",children:[i.jsx(Vt,{className:"w-5 h-5"}),"Rapports (aperu)"]}),i.jsxs("button",{onClick:()=>w("settings"),className:"w-full flex items-center gap-3 px-3 py-2 text-gray-400 hover:bg-gray-50 rounded-lg",children:[i.jsx(tr,{className:"w-5 h-5"}),"Paramtres",i.jsx(Yt,{className:"w-4 h-4 ml-auto text-orange-500"})]})]}),i.jsxs("div",{className:"mt-8 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border border-blue-100",children:[i.jsx("p",{className:"text-xs font-bold text-blue-800 mb-3",children:"VOS DOMAINES"}),i.jsx("div",{className:"space-y-2",children:g.map(j=>{const E=m[j];if(!E)return null;const C=E.icon;return i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(C,{className:"w-4 h-4 text-blue-600"}),i.jsx("span",{className:"font-medium text-gray-700",children:E.label})]},j)})})]})]}),i.jsxs("main",{className:"flex-1 p-6",children:[i.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-xl p-4 mb-6 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(xl,{className:"w-6 h-6"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:"Dmo 3 minutes (lecture seule)"}),i.jsx("p",{className:"text-sm opacity-90",children:"Explorez l'interface. Les actions de cration sont verrouilles."})]})]}),i.jsx("div",{className:`text-3xl font-mono font-black ${c<=30?"animate-pulse":""}`,children:u()})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"font-bold text-gray-900",children:"Clients (exemples)"}),i.jsxs("button",{onClick:()=>w("add_client"),className:"flex items-center gap-1 text-orange-500 text-sm font-medium",children:[i.jsx(tt,{className:"w-4 h-4"}),"Ajouter",i.jsx(Yt,{className:"w-3 h-3"})]})]}),i.jsx("div",{className:"space-y-2",children:["Carrefour Bziers","Mairie Montpellier","Hpital Saint-Roch"].map(j=>i.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg flex items-center justify-between",children:[i.jsx("span",{className:"font-medium",children:j}),i.jsx(bn,{className:"w-4 h-4 text-gray-400"})]},j))})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"font-bold text-gray-900",children:"Rapports (aperu)"}),i.jsxs("button",{onClick:()=>w("create_report"),className:"flex items-center gap-1 text-orange-500 text-sm font-medium",children:[i.jsx(tt,{className:"w-4 h-4"}),"Nouveau",i.jsx(Yt,{className:"w-3 h-3"})]})]}),i.jsx("div",{className:"space-y-2",children:["Rapport SSI - Cat A","Rapport BAES - Maintenance","Rapport Extincteurs"].map(j=>i.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg flex items-center justify-between",children:[i.jsx("span",{className:"font-medium",children:j}),i.jsx(mn,{className:"w-4 h-4 text-gray-400"})]},j))})]})]}),i.jsx(Rj,{isOpen:d.open,onClose:()=>p({open:!1,feature:"default"}),featureType:d.feature})]})]})]})},Oj=()=>{var l;const e=nt(),r=((l=bt().state)==null?void 0:l.request)||{},s=r.tarif_calcule||59,n=Math.round(s*.1),a=s-n;return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-900 to-black flex items-center justify-center p-4",children:i.jsx("div",{className:"max-w-lg w-full",children:i.jsxs("div",{className:"bg-white rounded-3xl overflow-hidden shadow-2xl",children:[i.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 p-8 text-white text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(xl,{className:"w-10 h-10"})}),i.jsx("h1",{className:"text-3xl font-black mb-2",children:"Dmo termine !"}),i.jsx("p",{className:"opacity-90",children:"Vos 3 minutes d'essai sont coules"})]}),i.jsxs("div",{className:"p-8",children:[r.domaines_demandes&&i.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 mb-2",children:"Votre configuration"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(r.domaines_demandes||r.modulesInteresses||[]).map(o=>i.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium",children:o.toUpperCase()},o))}),i.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[r.nb_utilisateurs||"1"," utilisateur(s)"]})]}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Votre tarif personnalis"}),i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsxs("span",{className:"text-gray-400 line-through text-xl",children:[s,""]}),i.jsxs("span",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-orange-500",children:[a,""]}),i.jsx("span",{className:"text-gray-500",children:"/mois"})]}),i.jsx("p",{className:"text-green-600 font-medium text-sm mt-1",children:"-10% le premier mois"})]}),i.jsx("div",{className:"space-y-3 mb-8",children:["Sans engagement, rsiliez quand vous voulez","Support prioritaire inclus","Mises  jour automatiques","Application mobile incluse"].map((o,c)=>i.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[i.jsx(ve,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),i.jsx("span",{children:o})]},c))}),i.jsxs("button",{onClick:()=>e("/subscribe",{state:{fromDemo:!0,request:r}}),className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-red-500 to-orange-500 text-white py-4 rounded-xl font-bold text-lg hover:from-red-600 hover:to-orange-600 transition-all shadow-lg mb-3",children:[i.jsx(sr,{className:"w-5 h-5"}),"Souscrire maintenant",i.jsx(vs,{className:"w-5 h-5"})]}),i.jsxs("button",{onClick:()=>e("/"),className:"w-full flex items-center justify-center gap-2 text-gray-500 hover:text-gray-700 py-2",children:[i.jsx(U1,{className:"w-4 h-4"}),"Recommencer la configuration"]})]})]})})})},Ij=()=>{var j,E;const e=nt(),t=bt(),{orgId:r,refreshSubscription:s,userData:n}=Ie(),{endDemo:a,demoRequest:l}=Ri(),[o,c]=b.useState(!1),[u,f]=b.useState(""),[d,p]=b.useState([]),h=((j=t.state)==null?void 0:j.request)||l||{},v=((E=t.state)==null?void 0:E.fromDemo)||!1,x=b.useMemo(()=>Iu(h.domaines||h.modulesInteresses||h.domaines_demandes||["ssi"],h.nb_utilisateurs||h.nombreTechniciens||"1",d),[h,d]),w=b.useMemo(()=>vl(h.profil||h.typeActivite||h.profil_demande||"mainteneur",h.domaines||h.modulesInteresses||h.domaines_demandes||["ssi"]),[h]),y=[{id:"ia",name:"Module IA",description:"Gnration automatique de contenu",price:9},{id:"export_compta",name:"Export comptable",description:"Export vers votre logiciel",price:5},{id:"veille_reglementaire",name:"Veille rglementaire",description:"Alertes normes",price:5}],g=C=>{p(A=>A.includes(C)?A.filter(S=>S!==C):[...A,C])},m=async()=>{c(!0),f("");try{const{data:C,error:A}=await G.from("abonnements").insert({organisation_id:r,formule:"custom",nb_utilisateurs_max:parseInt(h.nb_utilisateurs||h.nombreTechniciens||"1")||1,domaines_actifs:h.domaines||h.modulesInteresses||h.domaines_demandes||["ssi"],prix_mensuel_ht:x.totalPrice,options:{addons:d,prix_base:x.basePrice,prix_options:x.addonsTotal,premier_mois_remise:!0,remise_appliquee:x.discount},statut:"active",date_debut:new Date().toISOString().split("T")[0]}).select().single();if(A)throw A;r&&await G.from("demandes_prospects").update({converti:!0}).eq("organisation_id",r),await G.from("organisations").update({modules_actifs:h.domaines||h.modulesInteresses||h.domaines_demandes||["ssi"]}).eq("id",r),v&&await a(!0),await s(),e("/dashboard",{state:{subscriptionSuccess:!0,firstMonth:!0}})}catch(C){console.error("Erreur souscription:",C),f(C.message||"Erreur lors de la souscription")}finally{c(!1)}},N=V1(),_=h.domaines||h.modulesInteresses||h.domaines_demandes||["ssi"];return i.jsx("div",{className:"min-h-screen bg-gray-100 py-8 px-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>e(-1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[i.jsx(Hm,{className:"w-4 h-4"}),"Retour"]}),i.jsx("h1",{className:"text-3xl font-black text-gray-900",children:"Finaliser votre abonnement"}),i.jsx("p",{className:"text-gray-500 mt-1",children:"Profitez de -10% sur votre premier mois"})]}),i.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[i.jsxs("h2",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[i.jsx(rr,{className:"w-5 h-5 text-red-500"}),"Domaines inclus"]}),i.jsx("div",{className:"grid grid-cols-2 gap-3",children:_.map(C=>i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 rounded-lg",children:[i.jsx(ve,{className:"w-5 h-5 text-green-500"}),i.jsx("span",{className:"font-medium",children:N[C]||C.toUpperCase()})]},C))})]}),i.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[i.jsxs("h2",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[i.jsx(Vt,{className:"w-5 h-5 text-blue-500"}),"Rapports inclus"]}),i.jsx("div",{className:"space-y-3",children:Object.entries(w).map(([C,A])=>i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 mb-2",children:A.label}),i.jsx("div",{className:"flex flex-wrap gap-2",children:A.reports.map(S=>i.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm",children:S},S))})]},C))})]}),i.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[i.jsxs("h2",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[i.jsx(sr,{className:"w-5 h-5 text-yellow-500"}),"Options additionnelles"]}),i.jsx("div",{className:"space-y-3",children:y.map(C=>i.jsxs("button",{onClick:()=>g(C.id),className:`w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all ${d.includes(C.id)?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`,children:[i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"font-medium text-gray-900",children:C.name}),i.jsx("p",{className:"text-sm text-gray-500",children:C.description})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"font-bold text-red-500",children:["+",C.price,"/mois"]}),i.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${d.includes(C.id)?"border-red-500 bg-red-500":"border-gray-300"}`,children:d.includes(C.id)&&i.jsx(ve,{className:"w-4 h-4 text-white"})})]})]},C.id))})]})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm sticky top-8",children:[i.jsx("h2",{className:"font-bold text-gray-900 mb-4",children:"Rcapitulatif"}),i.jsxs("div",{className:"space-y-3 text-sm border-b border-gray-200 pb-4 mb-4",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{className:"text-gray-600",children:["Abonnement (",_.length," domaines)"]}),i.jsxs("span",{children:[x.basePrice,""]})]}),d.map(C=>{const A=y.find(S=>S.id===C);return i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:A==null?void 0:A.name}),i.jsxs("span",{children:["+",A==null?void 0:A.price,""]})]},C)}),i.jsxs("div",{className:"flex justify-between font-medium",children:[i.jsx("span",{children:"Sous-total"}),i.jsxs("span",{children:[x.totalPrice,"/mois"]})]}),i.jsxs("div",{className:"flex justify-between text-green-600",children:[i.jsx("span",{children:"Remise 1er mois (-10%)"}),i.jsxs("span",{children:["-",x.discount,""]})]})]}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("span",{className:"font-bold text-lg",children:"Premier mois"}),i.jsxs("span",{className:"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-orange-500",children:[x.finalPrice,""]})]}),i.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["Puis ",x.totalPrice,"/mois"]}),u&&i.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:u}),i.jsx("button",{onClick:m,disabled:o,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-red-500 to-orange-500 text-white py-4 rounded-xl font-bold hover:from-red-600 hover:to-orange-600 transition-all disabled:opacity-50",children:o?i.jsx(hs,{className:"w-5 h-5 animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(Xm,{className:"w-5 h-5"}),"Payer ",x.finalPrice,""]})}),i.jsx("div",{className:"mt-6 space-y-2",children:["Sans engagement","Rsiliation  tout moment","Support inclus","Paiement scuris"].map((C,A)=>i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[i.jsx(ve,{className:"w-4 h-4 text-green-500"}),i.jsx("span",{children:C})]},A))}),i.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-xs text-gray-400",children:[i.jsx(Yt,{className:"w-3 h-3"}),i.jsx("span",{children:"Paiement scuris SSL"})]})]})})]})]})})},$j=()=>{const e=bt(),t=nt(),{userData:r,orgSettings:s,subscription:n,logout:a}=Ie(),{isDemoMode:l}=Ri(),[o,c]=b.useState(!1),[u,f]=b.useState(!1),d=(n==null?void 0:n.domaines_actifs)||(s==null?void 0:s.modules_actifs)||[],p=async()=>{await a(),t("/login")},h=[{path:"/dashboard",label:"Tableau de bord",icon:I1},{path:"/clients",label:"Clients",icon:Ue},{path:"/sites",label:"Sites",icon:hr},{path:"/planning",label:"Planning",icon:_i},{path:"/interventions",label:"Interventions",icon:rg}],v=[{path:"/rapports-ssi",label:"SSI",icon:rr,domain:"ssi"},{path:"/rapports-dsf",label:"Dsenfumage",icon:yl,domain:"dsf"},{path:"/rapports-baes",label:"BAES",icon:sr,domain:"baes"},{path:"/rapports-extincteurs",label:"Extincteurs",icon:Bt,domain:"extincteurs"},{path:"/rapports-ria",label:"RIA",icon:rr,domain:"ria"},{path:"/rapports-colonnes-seches",label:"Colonnes sches",icon:tr,domain:"colonnes_seches"}].filter(m=>d.includes(m.domain)),x=[{path:"/devis",label:"Devis",icon:Vt},{path:"/factures",label:"Factures",icon:an}],w=[{path:"/techniciens",label:"Techniciens",icon:tg},{path:"/alertes",label:"Alertes",icon:mn},{path:"/settings",label:"Paramtres",icon:tr}],y=({item:m})=>{const N=e.pathname===m.path;return i.jsxs(gi,{to:m.path,onClick:()=>f(!1),className:`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all ${N?"bg-gradient-to-r from-red-500 to-orange-500 text-white shadow-lg shadow-red-500/25":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[i.jsx(m.icon,{className:"w-5 h-5 flex-shrink-0"}),!o&&i.jsx("span",{className:"font-medium",children:m.label})]})},g=({title:m,items:N})=>i.jsxs("div",{className:"mb-6",children:[!o&&i.jsx("p",{className:"text-gray-500 text-xs uppercase tracking-wider mb-2 px-3",children:m}),i.jsx("div",{className:"space-y-1",children:N.map(_=>i.jsx(y,{item:_},_.path))})]});return i.jsxs("div",{className:"min-h-screen bg-gray-100 flex",children:[u&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>f(!1)}),i.jsxs("aside",{className:`
        fixed lg:static inset-y-0 left-0 z-50
        ${o?"w-20":"w-64"} 
        ${u?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        bg-gray-900 transition-all duration-300 flex flex-col
      `,children:[i.jsx("div",{className:"p-4 border-b border-gray-800",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-orange-500 rounded-xl flex items-center justify-center shadow-lg shadow-red-500/30",children:i.jsx(Bt,{className:"w-6 h-6 text-white"})}),!o&&i.jsxs("div",{children:[i.jsx("span",{className:"text-white font-bold",children:"Easy"}),i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-red-400 to-orange-400 font-bold",children:"Scurit"})]})]})}),!o&&s&&i.jsxs("div",{className:"px-4 py-3 border-b border-gray-800",children:[i.jsx("p",{className:"text-gray-500 text-xs",children:"Organisation"}),i.jsx("p",{className:"text-white font-medium truncate",children:s.nom})]}),i.jsxs("nav",{className:"flex-1 p-4 overflow-y-auto",children:[i.jsx(g,{title:"Principal",items:h}),v.length>0&&i.jsx(g,{title:"Rapports",items:v}),i.jsx(g,{title:"Commercial",items:x}),i.jsx(g,{title:"Gestion",items:w})]}),i.jsxs("div",{className:"p-4 border-t border-gray-800",children:[!o&&r&&i.jsxs("div",{className:"mb-3",children:[i.jsxs("p",{className:"text-white font-medium",children:[r.prenom," ",r.nom]}),i.jsx("p",{className:"text-gray-500 text-sm truncate",children:r.email})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:p,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",children:[i.jsx($1,{className:"w-5 h-5"}),!o&&i.jsx("span",{children:"Dconnexion"})]}),i.jsx("button",{onClick:()=>c(!o),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors hidden lg:block",children:o?i.jsx(Jm,{className:"w-5 h-5"}):i.jsx(Gm,{className:"w-5 h-5"})})]})]})]}),i.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[i.jsxs("header",{className:"lg:hidden bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[i.jsx("button",{onClick:()=>f(!0),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:i.jsx(D1,{className:"w-6 h-6"})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Bt,{className:"w-6 h-6 text-red-500"}),i.jsx("span",{className:"font-bold",children:"Easy Scurit"})]}),i.jsx("div",{className:"w-10"})]}),i.jsx("main",{className:"flex-1 overflow-auto",children:i.jsx(zy,{})})]})]})},Dj=()=>{const e=nt(),t=bt(),{isDemoMode:r,demoExpired:s,timeRemaining:n,formatTimeRemaining:a}=Ri(),{isAuthenticated:l}=Ie();if(["/","/login","/register","/demo","/demo-expired","/subscribe"].includes(t.pathname)||!r&&!s)return null;if(s)return i.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-700 text-white px-4 py-3",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-white/20 rounded-full",children:i.jsx(Yt,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:"Dmo termine"}),i.jsx("p",{className:"text-sm opacity-90",children:"Souscrivez pour continuer  utiliser Easy Scurit"})]})]}),i.jsxs("button",{onClick:()=>e("/subscribe"),className:"flex items-center gap-2 bg-white text-red-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors",children:["S'abonner maintenant",i.jsx(vs,{className:"w-4 h-4"})]})]})});const c=n<=60;return i.jsx("div",{className:`${c?"bg-gradient-to-r from-red-600 to-orange-600":"bg-gradient-to-r from-orange-500 to-red-500"} text-white px-4 py-3`,children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`p-2 bg-white/20 rounded-full ${c?"animate-pulse":""}`,children:i.jsx(xl,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Mode Dmo"}),i.jsx("span",{className:"mx-2 opacity-60",children:""}),i.jsx("span",{className:"text-white/90",children:"Accs en lecture seule"})]})]}),i.jsx("div",{className:`px-4 py-1 bg-white/20 rounded-full font-mono text-lg font-bold ${c?"animate-pulse":""}`,children:a()})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm opacity-80 hidden sm:block",children:c?" Dernire minute !":"Testez les fonctionnalits"}),i.jsxs("button",{onClick:()=>e("/subscribe"),className:"flex items-center gap-2 bg-white text-red-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors shadow-lg",children:["S'abonner",i.jsx(vs,{className:"w-4 h-4"})]})]})]})})},na=({children:e})=>{const{isAuthenticated:t,loading:r,needsProfile:s}=Ie();return r?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950",children:i.jsx("div",{className:"w-16 h-16 border-4 border-red-500 border-t-transparent rounded-full animate-spin"})}):t?s?i.jsx(ys,{to:"/complete-profile",replace:!0}):e:i.jsx(ys,{to:"/login",replace:!0})},uo=({children:e})=>{const{isAuthenticated:t,loading:r,needsProfile:s}=Ie();return r?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950",children:i.jsx("div",{className:"w-16 h-16 border-4 border-red-500 border-t-transparent rounded-full animate-spin"})}):t?s?i.jsx(ys,{to:"/complete-profile",replace:!0}):i.jsx(ys,{to:"/dashboard",replace:!0}):e},Lj=({children:e})=>{const{isAuthenticated:t,loading:r,needsProfile:s}=Ie();return r?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950",children:i.jsx("div",{className:"w-16 h-16 border-4 border-red-500 border-t-transparent rounded-full animate-spin"})}):t?s?e:i.jsx(ys,{to:"/dashboard",replace:!0}):i.jsx(ys,{to:"/login",replace:!0})},Pt=({title:e})=>i.jsx("div",{className:"p-6 flex items-center justify-center h-96",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:e}),i.jsx("p",{className:"text-gray-500",children:"Module en cours de dveloppement"}),i.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-4 py-2 bg-red-100 text-red-700 rounded-full text-sm font-medium",children:[i.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),"Bientt disponible"]})]})});function Uj(){return i.jsx(N1,{children:i.jsx(k1,{children:i.jsxs(Qy,{children:[i.jsx(Bv,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#1e293b",color:"#f1f5f9"}}}),i.jsx(Dj,{}),i.jsxs(By,{children:[i.jsx(te,{path:"/",element:i.jsx(uo,{children:i.jsx(q1,{})})}),i.jsx(te,{path:"/login",element:i.jsx(uo,{children:i.jsx(W1,{})})}),i.jsx(te,{path:"/register",element:i.jsx(uo,{children:i.jsx(H1,{})})}),i.jsx(te,{path:"/auth/callback",element:i.jsx(G1,{})}),i.jsx(te,{path:"/complete-profile",element:i.jsx(Lj,{children:i.jsx(K1,{})})}),i.jsx(te,{path:"/demo",element:i.jsx(na,{children:i.jsx(Aj,{})})}),i.jsx(te,{path:"/demo-expired",element:i.jsx(na,{children:i.jsx(Oj,{})})}),i.jsx(te,{path:"/subscribe",element:i.jsx(na,{children:i.jsx(Ij,{})})}),i.jsxs(te,{element:i.jsx(na,{children:i.jsx($j,{})}),children:[i.jsx(te,{path:"/dashboard",element:i.jsx(X1,{})}),i.jsx(te,{path:"/clients",element:i.jsx(Q1,{})}),i.jsx(te,{path:"/sites",element:i.jsx(Y1,{})}),i.jsx(te,{path:"/techniciens",element:i.jsx(Z1,{})}),i.jsx(te,{path:"/planning",element:i.jsx(tj,{})}),i.jsx(te,{path:"/interventions",element:i.jsx(ej,{})}),i.jsx(te,{path:"/devis",element:i.jsx(rj,{})}),i.jsx(te,{path:"/factures",element:i.jsx(sj,{})}),i.jsx(te,{path:"/alertes",element:i.jsx(nj,{})}),i.jsx(te,{path:"/settings",element:i.jsx(Pj,{})}),i.jsx(te,{path:"/rapports",element:i.jsx(Pt,{title:"Rapports"})}),i.jsx(te,{path:"/rapports-ssi",element:i.jsx(Pt,{title:"Rapports SSI"})}),i.jsx(te,{path:"/rapports-dsf",element:i.jsx(Pt,{title:"Rapports DSF"})}),i.jsx(te,{path:"/rapports-extincteurs",element:i.jsx(Pt,{title:"Rapports Extincteurs"})}),i.jsx(te,{path:"/rapports-baes",element:i.jsx(Pt,{title:"Rapports BAES"})}),i.jsx(te,{path:"/rapports-ria",element:i.jsx(Pt,{title:"Rapports RIA"})}),i.jsx(te,{path:"/rapports-colonnes-seches",element:i.jsx(Pt,{title:"Rapports Colonnes Sches"})}),i.jsx(te,{path:"/registre-securite",element:i.jsx(Pt,{title:"Registre Scurit"})}),i.jsx(te,{path:"/utilisateurs",element:i.jsx(Pt,{title:"Utilisateurs"})}),i.jsx(te,{path:"/equipements",element:i.jsx(Pt,{title:"quipements"})}),i.jsx(te,{path:"/export-comptable",element:i.jsx(Pt,{title:"Export Comptable"})})]}),i.jsx(te,{path:"*",element:i.jsx(ys,{to:"/",replace:!0})})]})]})})})}ho.createRoot(document.getElementById("root")).render(i.jsx(Ke.StrictMode,{children:i.jsx(Uj,{})}));
//# sourceMappingURL=index-B7HfoJvG.js.map
